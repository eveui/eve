!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b=b.d3||(b.d3={}),b=b.layout||(b.layout={}),b.cloud=a()}}(function(){var a;return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){function d(a){return a.text}function e(){return"serif"}function f(){return"normal"}function g(a){return Math.sqrt(a.value)}function h(){return 30*(~~(6*Math.random())-3)}function i(){return 1}function j(a,b,c,d){if(!b.sprite){var e=a.context,f=a.ratio;e.clearRect(0,0,(u<<5)/f,v/f);var g=0,h=0,i=0,j=c.length;for(--d;++d<j;){b=c[d],e.save(),e.font=b.style+" "+b.weight+" "+~~((b.size+1)/f)+"px "+b.font;var k=e.measureText(b.text+"m").width*f,l=b.size<<1;if(b.rotate){var m=Math.sin(b.rotate*t),n=Math.cos(b.rotate*t),o=k*n,p=k*m,q=l*n,r=l*m;k=Math.max(Math.abs(o+r),Math.abs(o-r))+31>>5<<5,l=~~Math.max(Math.abs(p+q),Math.abs(p-q))}else k=k+31>>5<<5;if(l>i&&(i=l),g+k>=u<<5&&(g=0,h+=i,i=0),h+l>=v)break;e.translate((g+(k>>1))/f,(h+(l>>1))/f),b.rotate&&e.rotate(b.rotate*t),e.fillText(b.text,0,0),b.padding&&(e.lineWidth=2*b.padding,e.strokeText(b.text,0,0)),e.restore(),b.width=k,b.height=l,b.xoff=g,b.yoff=h,b.x1=k>>1,b.y1=l>>1,b.x0=-b.x1,b.y0=-b.y1,b.hasText=!0,g+=k}for(var s=e.getImageData(0,0,(u<<5)/f,v/f).data,w=[];--d>=0;)if(b=c[d],b.hasText){for(var k=b.width,x=k>>5,l=b.y1-b.y0,y=0;y<l*x;y++)w[y]=0;if(g=b.xoff,null==g)return;h=b.yoff;for(var z=0,A=-1,B=0;B<l;B++){for(var y=0;y<k;y++){var C=x*B+(y>>5),D=s[(h+B)*(u<<5)+(g+y)<<2]?1<<31-y%32:0;w[C]|=D,z|=D}z?A=B:(b.y0++,l--,B--,h++)}b.y1=b.y0+A,b.sprite=w.slice(0,(b.y1-b.y0)*x)}}}function k(a,b,c){c>>=5;for(var d,e=a.sprite,f=a.width>>5,g=a.x-(f<<4),h=127&g,i=32-h,j=a.y1-a.y0,k=(a.y+a.y0)*c+(g>>5),l=0;l<j;l++){d=0;for(var m=0;m<=f;m++)if((d<<i|(m<f?(d=e[l*f+m])>>>h:0))&b[k+m])return!0;k+=c}return!1}function l(a,b){var c=a[0],d=a[1];b.x+b.x0<c.x&&(c.x=b.x+b.x0),b.y+b.y0<c.y&&(c.y=b.y+b.y0),b.x+b.x1>d.x&&(d.x=b.x+b.x1),b.y+b.y1>d.y&&(d.y=b.y+b.y1)}function m(a,b){return a.x+a.x1>b[0].x&&a.x+a.x0<b[1].x&&a.y+a.y1>b[0].y&&a.y+a.y0<b[1].y}function n(a){var b=a[0]/a[1];return function(a){return[b*(a*=.1)*Math.cos(a),a*Math.sin(a)]}}function o(a){var b=4,c=b*a[0]/a[1],d=0,e=0;return function(a){var f=a<0?-1:1;switch(Math.sqrt(1+4*f*a)-f&3){case 0:d+=c;break;case 1:e+=b;break;case 2:d-=c;break;default:e-=b}return[d,e]}}function p(a){for(var b=[],c=-1;++c<a;)b[c]=0;return b}function q(){return document.createElement("canvas")}function r(a){return"function"==typeof a?a:function(){return a}}var s=a("d3-dispatch").dispatch,t=Math.PI/180,u=64,v=2048;b.exports=function(){function a(a){a.width=a.height=1;var b=Math.sqrt(a.getContext("2d").getImageData(0,0,1,1).data.length>>2);a.width=(u<<5)/b,a.height=v/b;var c=a.getContext("2d");return c.fillStyle=c.strokeStyle="red",c.textAlign="center",{context:c,ratio:b}}function b(a,b,d){for(var e,f,g,h=([{x:0,y:0},{x:c[0],y:c[1]}],b.x),i=b.y,j=Math.sqrt(c[0]*c[0]+c[1]*c[1]),l=C(c),n=H()<.5?1:-1,o=-n;(e=l(o+=n))&&(f=~~e[0],g=~~e[1],!(Math.min(Math.abs(f),Math.abs(g))>=j));)if(b.x=h+f,b.y=i+g,!(b.x+b.x0<0||b.y+b.y0<0||b.x+b.x1>c[0]||b.y+b.y1>c[1])&&(!d||!k(b,a,c[0]))&&(!d||m(b,d))){for(var p,q=b.sprite,r=b.width>>5,s=c[0]>>5,t=b.x-(r<<4),u=127&t,v=32-u,w=b.y1-b.y0,x=(b.y+b.y0)*s+(t>>5),y=0;y<w;y++){p=0;for(var z=0;z<=r;z++)a[x+z]|=p<<v|(z<r?(p=q[y*r+z])>>>u:0);x+=s}return delete b.sprite,!0}return!1}var c=[256,256],o=d,t=e,x=g,y=f,z=f,A=h,B=i,C=n,D=[],E=1/0,F=s("word","end"),G=null,H=Math.random,I={},J=q;return I.canvas=function(a){return arguments.length?(J=r(a),I):J},I.start=function(){function d(){for(var a=Date.now();Date.now()-a<E&&++i<h&&G;){var d=m[i];d.x=c[0]*(H()+.5)>>1,d.y=c[1]*(H()+.5)>>1,j(e,d,m,i),d.hasText&&b(f,d,g)&&(k.push(d),F.word(d),g?l(g,d):g=[{x:d.x+d.x0,y:d.y+d.y0},{x:d.x+d.x1,y:d.y+d.y1}],d.x-=c[0]>>1,d.y-=c[1]>>1)}i>=h&&(I.stop(),F.end(k,g))}var e=a(J()),f=p((c[0]>>5)*c[1]),g=null,h=D.length,i=-1,k=[],m=D.map(function(a,b){return a.text=o.call(this,a,b),a.font=t.call(this,a,b),a.style=y.call(this,a,b),a.weight=z.call(this,a,b),a.rotate=A.call(this,a,b),a.size=~~x.call(this,a,b),a.padding=B.call(this,a,b),a}).sort(function(a,b){return b.size-a.size});return G&&clearInterval(G),G=setInterval(d,0),d(),I},I.stop=function(){return G&&(clearInterval(G),G=null),I},I.timeInterval=function(a){return arguments.length?(E=null==a?1/0:a,I):E},I.words=function(a){return arguments.length?(D=a,I):D},I.size=function(a){return arguments.length?(c=[+a[0],+a[1]],I):c},I.font=function(a){return arguments.length?(t=r(a),I):t},I.fontStyle=function(a){return arguments.length?(y=r(a),I):y},I.fontWeight=function(a){return arguments.length?(z=r(a),I):z},I.rotate=function(a){return arguments.length?(A=r(a),I):A},I.text=function(a){return arguments.length?(o=r(a),I):o},I.spiral=function(a){return arguments.length?(C=w[a]||a,I):C},I.fontSize=function(a){return arguments.length?(x=r(a),I):x},I.padding=function(a){return arguments.length?(B=r(a),I):B},I.random=function(a){return arguments.length?(H=a,I):H},I.on=function(){var a=F.on.apply(F,arguments);return a===F?I:a},I};var w={archimedean:n,rectangular:o}},{"d3-dispatch":2}],2:[function(b,c,d){!function(b,e){"object"==typeof d&&"undefined"!=typeof c?e(d):"function"==typeof a&&a.amd?a(["exports"],e):e(b.dispatch={})}(this,function(a){"use strict";function b(a){function b(a){var b=(a+="").indexOf("."),c=a;if(b>=0?a=a.slice(0,b):c+=".",a&&!g.hasOwnProperty(a))throw new Error("unknown type: "+a);return{type:a,name:c}}function c(a){return function(){for(var b,c,d=g[a],e=-1,f=d.length;++e<f;)(c=(b=d[e]).value)&&c.apply(this,arguments);return i}}var d,e=-1,f=a.length,g={},h={},i=this;for(i.on=function(a,c){if(a=b(a),arguments.length<2)return(c=h[a.name])&&c.value;if(a.type){var d,e=g[a.type],f=h[a.name];f&&(f.value=null,d=e.indexOf(f),g[a.type]=e=e.slice(0,d).concat(e.slice(d+1)),delete h[a.name]),c&&(c={value:c},h[a.name]=c,e.push(c))}else if(null==c)for(var j in g)if(c=h[j+a.name]){c.value=null;var e=g[j],d=e.indexOf(c);g[j]=e.slice(0,d).concat(e.slice(d+1)),delete h[c.name]}return i};++e<f;){if(d=a[e]+"",!d||d in i)throw new Error("illegal or duplicate type: "+d);g[d]=[],i[d]=c(d)}}function c(){return new b(arguments)}c.prototype=b.prototype,a.dispatch=c})},{}]},{},[1])(1)}),d3.sankey=function(){function a(){n.forEach(function(a){a.sourceLinks=[],a.targetLinks=[]}),o.forEach(function(a){var b=a.source,c=a.target;"number"==typeof b&&(b=a.source=n[a.source]),"number"==typeof c&&(c=a.target=n[a.target]),b.sourceLinks.push(a),c.targetLinks.push(a)})}function b(){n.forEach(function(a){a.value=Math.max(d3.sum(a.sourceLinks,i),d3.sum(a.targetLinks,i))})}function c(){for(var a,b=n,c=0;b.length;)a=[],b.forEach(function(b){b.x=c,b.dx=k,b.sourceLinks.forEach(function(b){a.indexOf(b.target)<0&&a.push(b.target)})}),b=a,++c;d(c),e((m[0]-k)/(c-1))}function d(a){n.forEach(function(b){b.sourceLinks.length||(b.x=a-1)})}function e(a){n.forEach(function(b){b.x*=a})}function f(a){function b(){var a=d3.min(g,function(a){return(m[1]-(a.length-1)*l)/d3.sum(a,i)});g.forEach(function(b){b.forEach(function(b,c){b.y=c,b.dy=b.value*a})}),o.forEach(function(b){b.dy=b.value*a})}function c(a){function b(a){return h(a.source)*a.value}g.forEach(function(c,d){c.forEach(function(c){if(c.targetLinks.length){var d=d3.sum(c.targetLinks,b)/d3.sum(c.targetLinks,i);c.y+=(d-h(c))*a}})})}function d(a){function b(a){return h(a.target)*a.value}g.slice().reverse().forEach(function(c){c.forEach(function(c){if(c.sourceLinks.length){var d=d3.sum(c.sourceLinks,b)/d3.sum(c.sourceLinks,i);c.y+=(d-h(c))*a}})})}function e(){g.forEach(function(a){var b,c,d,e=0,g=a.length;for(a.sort(f),d=0;g>d;++d)b=a[d],c=e-b.y,c>0&&(b.y+=c),e=b.y+b.dy+l;if(c=e-l-m[1],c>0)for(e=b.y-=c,d=g-2;d>=0;--d)b=a[d],c=b.y+b.dy+l-e,c>0&&(b.y-=c),e=b.y})}function f(a,b){return a.y-b.y}var g=d3.nest().key(function(a){return a.x}).sortKeys(d3.ascending).entries(n).map(function(a){return a.values});b(),e();for(var j=1;a>0;--a)d(j*=.99),e(),c(j),e()}function g(){function a(a,b){return a.source.y-b.source.y}function b(a,b){return a.target.y-b.target.y}n.forEach(function(c){c.sourceLinks.sort(b),c.targetLinks.sort(a)}),n.forEach(function(a){var b=0,c=0;a.sourceLinks.forEach(function(a){a.sy=b,b+=a.dy}),a.targetLinks.forEach(function(a){a.ty=c,c+=a.dy})})}function h(a){return a.y+a.dy/2}function i(a){return a.value}var j={},k=24,l=8,m=[1,1],n=[],o=[];return j.nodeWidth=function(a){return arguments.length?(k=+a,j):k},j.nodePadding=function(a){return arguments.length?(l=+a,j):l},j.nodes=function(a){return arguments.length?(n=a,j):n},j.links=function(a){return arguments.length?(o=a,j):o},j.size=function(a){return arguments.length?(m=a,j):m},j.layout=function(d){return a(),b(),c(),f(d),g(),j},j.relayout=function(){return g(),j},j.link=function(){function a(a){var c=a.source.x+a.source.dx,d=a.target.x,e=d3.interpolateNumber(c,d),f=e(b),g=e(1-b),h=a.source.y+a.sy+a.dy/2,i=a.target.y+a.ty+a.dy/2;return"M"+c+","+h+"C"+f+","+h+" "+g+","+i+" "+d+","+i}var b=.5;return a.curvature=function(c){return arguments.length?(b=+c,a):b},a},j},function(){var eve={base:{},colors:["#83AA30","#1499D3","#4D6684","#3D3D3D","#B9340B","#CEA45C","#C5BE8B","#498379","#3F261C","#E74700","#F1E68F","#FF976F","#FF6464","#554939","#706C4D","#9C651E","#506B0B","#1A6B4D","#0D8074","#208291","#0F92A6"]};eve.base.axisDefaults={alpha:1,color:"#999999",gridLineColor:"#aaaaaa",gridLineThickness:.5,gridLineAlpha:.5,labelAngle:0,labelFontColor:"#999999",labelFontFamily:"Tahoma",labelFontSize:10,labelFontStyle:"normal",labelFormat:"",logarithmic:!1,startsFromZero:!1,locked:!1,min:null,max:null,tickCount:"auto",title:"",titleFontColor:"#666666",titleFontFamily:"Tahoma",titleFontSize:11,titleFontStyle:"bold",thickness:1,enabled:!0,stacked:!0,position:"left",stackType:"normal"},eve.base.tooltipDefaults={backColor:"#ffffff",borderColor:"#61c9f6",borderRadius:3,borderSize:1,borderStyle:"solid",enabled:!0,fontColor:"#333333",fontFamily:"Tahoma",fontSize:12,fontStyle:"normal",format:"",opacity:.9,padding:10},eve.base.legendDefaults={enabled:!0,type:"default",secondaryType:"",fontColor:"#333333",fontFamily:"Tahoma",fontSize:12,fontStyle:"normal",icon:"square",iconColor:"",position:"right",circleCount:3,legendColors:[],rangeList:[],gradientStopCount:"auto",gradientColors:[],numberFormat:""},eve.base.defaults={animation:{duration:500,delay:10,easing:"linear"},tooltip:eve.base.tooltipDefaults,backColor:"#ffffff",border:{color:"transparent",size:0,style:"solid"},margin:{left:5,top:5,right:5,bottom:5},container:null,data:null,currTransform:null,legend:eve.base.legendDefaults,series:[],title:{content:"",fontColor:"#333333",fontFamily:"Tahoma",fontSize:13,fontStyle:"normal",position:"topCenter"},width:"auto",height:"auto",trends:[],xField:"",xAxis:eve.base.axisDefaults,yAxis:eve.base.axisDefaults,zoomable:!1,onLoaded:function(){},onLegendClick:function(){},onSliceClick:function(){},onBeforeZoom:function(){},onAfterZoom:function(){}},eve.base.serieDefaults={alpha:.8,alphaField:"",behavior:"linear",backColor:"#efefef",borderColor:"#cdcdcd",bullet:"none",bulletAlpha:.9,bulletColor:"",bulletSize:8,bulletStrokeAlpha:1,bulletStrokeThickness:1,closeField:"",colField:"",color:"",colorField:"",dateField:"",direction:"linear",drawingStyle:"solid",endField:"",expression:"none",fontFamily:"Impact",groupField:"",handleColor:"#999999",highField:"",isSparkline:!1,labelField:"",labelFontColor:"#333333",labelFontFamily:"Tahoma",labelFontSize:"auto",labelFontStyle:"normal",labelFormat:"",labelPosition:"auto",latField:"",longField:"",lowField:"",lineAlpha:1,lineMeasures:!1,lineThickness:1.5,linkDistance:0,majorTicks:5,mapLayers:["boundaries","landuse","roads","water"],marker:0,markerField:"",markerFormat:"{{title}}: {{marker}}",maxBulletSize:30,maxFontSize:50,maxRange:null,measureField:"",minBulletSize:5,minFontSize:12,minorTicks:5,minRange:null,neckHeight:25,negativeColor:"#E21020",openField:"",orderMode:"name",parentField:"",rangeField:"",rowField:"",segmentLineAlpha:1,segmentLineColor:"#cccccc",segmentLineThickness:1,showBullets:!0,sliceHoverAlpha:1,sliceStrokeAlpha:.1,sliceStrokeColor:"",sliceStrokeThickness:0,sizeField:"",sourceField:"",spriteAngle:"none",startField:"",tileType:"squarify",title:"",titleColor:"#666666",titleField:"",type:"column",valueField:"",xField:"",yField:"",rangeColor:"#cccccc",markerColor:"#000000",markerWidth:5,tileIcon:"circle"},eve.mapDirectory="/libraries/eve/",eve.days=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],eve.daysMin=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],eve.months=["January","February","March","April","May","June","July","August","September","October","November","December"],eve.monthsMin=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],eve.getType=function(a){var b=typeof a,c="null";if(null===a)return"null";if(void 0===a)return"undefined";switch(b){case"string":case"number":case"boolean":case"function":c=b;break;default:if("undefined"==typeof a.getMonth)if("[object Array]"===Object.prototype.toString.call(a))c="array";else if("[object Function]"===Object.prototype.toString.call(a))c="function";else if("[object NodeList]"===Object.prototype.toString.call(a))c="nodeList";else if("[object Object]"===Object.prototype.toString.call(a))c="object";else{var d="object"==typeof HTMLElement?a instanceof HTMLElement:a&&"object"==typeof a&&null!==a&&1===a.nodeType&&"string"==typeof a.nodeName;c=d?"htmlElement":"wtf"}else c="date"}return c},eve.setColors=function(){if(0!==arguments.length){var a=arguments[0],b=eve.getType(a);"string"===b?a.indexOf(";")>-1?eve.colors=a.split(";"):a.indexOf(",")>-1&&(eve.colors=a.split(",")):"array"===b&&(eve.colors=a)}},eve.toHex=function(a){var b=a.toString(16);return 1===b.length?"0"+b:b},eve.rgbToHex=function(){if(1===arguments.length){if(arguments.toString().indexOf("#")>-1)return arguments[0];var a=arguments[0].toString().replace("rgb(","").replace(")",""),b=a.split(",");return"#"+eve.toHex(parseInt(b[0]))+eve.toHex(parseInt(b[1]))+eve.toHex(parseInt(b[2]))}return 3===arguments.length?"#"+eve.toHex(parseInt(arguments[0]))+eve.toHex(parseInt(arguments[1]))+eve.toHex(parseInt(arguments[2])):"#0066CC"},eve.hexToRgb=function(a){var b=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a);return b?{r:parseInt(b[1],16),g:parseInt(b[2],16),b:parseInt(b[3],16)}:null},eve.gradient=function(a,b){var c=d3.scaleLinear().domain([0,100]).range(a);return c(b)},eve.randInt=function(){var a=0,b=1;if(2===arguments.length&&(a=arguments[0],b=arguments[1]),a>=b)throw Error("Max argument should be greater than min argument!");return Math.floor(Math.random()*(b-a+1))+a},eve.randDecimal=function(a,b,c){return 1*(Math.random()*(b-a)+a).toFixed(c)},eve.randColor=function(){for(var a="0123456789ABCDEF".split(""),b="#",c=0;c<6;c++)b+=a[Math.floor(16*Math.random())];return b},eve.clone=function(a){var b;if(!a||"object"!=typeof a)return a;if(a instanceof Date)return b=new Date,b.setTime(a.getTime()),b;if(a instanceof Array){b=[];for(var c=0,d=a.length;c<d;c++)b[c]=eve.clone(a[c]);return b}if(a instanceof Object){b={};for(var e in a)a.hasOwnProperty(e)&&(b[e]=eve.clone(a[e]));return b}throw new Error("Unable to copy obj! Its type isn't supported.")},eve.isPrime=function(a){if(isNaN(a)||!isFinite(a)||a%1||a<2)return!1;if(a%2===0)return 2==a;for(var b=Math.sqrt(a),c=3;c<=b;c+=2)if(a%c===0)return!1;return!0},eve.getPrimeFactors=function(a){if(isNaN(a)||!isFinite(a))return[];var b=Math.sqrt(a),c=arguments[1]||[],d=2;if(a%d)for(d=3;a%d&&(d+=2)<b;);return d=d<=b?d:a,c.push(d),d===a?c:eve.getPrimeFactors(a/d,c)},eve.extend=function(sub,base){function extended(){}if(extended.prototype=base.prototype,"function"===eve.getType(sub)&&"function"===eve.getType(base)){for(var key1 in base)eval("sub."+key1+" = base."+key1);return sub}if("object"===eve.getType(sub)&&"object"===eve.getType(base)){for(var key2 in base){var baseType=eve.getType(base[key2]);"object"===baseType?sub[key2]?eve.extend(sub[key2],base[key2]):sub[key2]=base[key2]:void 0===sub[key2]&&(sub[key2]=base[key2])}return sub}},eve.queryString=function(a){if(0===arguments.length)return"";a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var b=new RegExp("[\\?&]"+a+"=([^&#]*)"),c=b.exec(window.location.search);return null===c?"":decodeURIComponent(c[1].replace(/\+/g," "))},eve.isIdentical=function(a){for(var b=0;b<a.length-1;b++)if(a[b]!==a[b+1])return!1;return!0},eve.offset=function(a){var b={width:0,height:0,left:0,top:0};if(!a)return b;if("htmlElement"!==eve.getType(a))return b;var c=getComputedStyle(a,null),d=parseInt(c.getPropertyValue("border-left-width")),e=parseInt(c.getPropertyValue("border-right-width")),f=parseInt(c.getPropertyValue("border-top-width")),g=parseInt(c.getPropertyValue("border-bottom-width"));if(a.getBoundingClientRect){var h=a.getBoundingClientRect();b.width=h.width-d-e,b.height=h.height-f-g,b.left=h.left,b.top=h.top}else b.width=a.offsetWidth?0:parseFloat(a.offsetWidth)-d-e,b.height=a.offsetHeight?0:parseFloat(a.offsetHeight)-f-g,b.left=a.offsetLeft?0:parseFloat(a.offsetLeft),b.top=a.offsetTop?0:parseFloat(a.offsetTop);return b},eve.filterNumeric=function(a,b,c){return a.filter(function(a){return!(!a[b]||!c)&&a[b]==c})},eve.filter=function(a,b,c){return a.filter(function(a){return!(!a[b]||!c)&&a[b].toUpperCase()==c.toUpperCase()})},eve.matchRange=function(a,b,c){for(i=0;i<b.length;i++){var d=b[i];if(a>=d.minValue&&a<=d.maxValue)return d[c]}},eve.matchGroup=function(a,b,c){for(i=0;i<b.length;i++){var d=b[i];if(a==d.value)return d[c]}},eve.getUniqueValues=function(a,b){return _.uniq(_.map(a,function(a){return a[b]}))},eve.detectIE=function(){var a=window.navigator.userAgent,b=a.indexOf("MSIE ");if(b>0)return!0;var c=a.indexOf("Trident/");if(c>0)return!0;var d=a.indexOf("Edge/");return d>0},String.prototype.replaceAll=function(a,b){return this.replace(new RegExp(a,"g"),b)},Date.prototype.diff=function(a){return(this.getTime()-a.getTime())/864e5},Date.prototype.addHours=function(a){return this.setHours(this.getHours()+a)},String.prototype.toSymbol=function(){var a=d3.symbolSquare;switch(this){case"circle":a=d3.symbolCircle;break;case"cross":a=d3.symbolCross;break;case"diamond":a=d3.symbolDiamond;break;case"star":a=d3.symbolStar;break;case"triangle":a=d3.symbolTriangle;break;case"wye":a=d3.symbolWye}return a},String.prototype.toTileType=function(){var a=d3.treemapSquarify;switch(this.toString().toLowerCase()){case"binary":a=d3.treemapBinary;break;case"dice":a=d3.treemapDice;break;case"slice":a=d3.treemapSlice;break;case"slicedice":a=d3.treemapSliceDice;break;case"resquarify":a=d3.treemapResquarify}return a},String.prototype.toEasing=function(){return d3["ease"+this.toString()[0].toUpperCase()+this.toString().slice(1)]||d3.easeLinearIn},"undefined"!=typeof amd?define(function(){return eve}):"object"==typeof module&&module.exports?module.exports=eve:window.eve=eve}.call(this),function(a){function b(b,c){var d={};return c.map(function(c){d[c]={type:[a.getType(b[0][c])],uniques:b.length<1e3?a.getUniqueValues(b,c):[]}}),d}function c(b,c){for(var e=b.length>5?5:b.length,f=null,g="string",h="string",i="string",j=1;j<e;j++)f=b[j],d3.keys(f).map(function(b,d){i=a.getType(f[b]),1===d?g=i:d===e-1&&(h=i),c[b].type.push(i)});return d(c,g,h)}function d(b,c,d){var e=!0;return d3.keys(b).map(function(f){e=a.isIdentical(b[f].type),b[f].type=e?d:c}),b}a.getDataProperties=function(){if(0===arguments.length)return null;var d=arguments[0],e=a.getType(d);if("array"===e){var f=d3.keys(d[0]),g=b(d,f);return g=c(d,g),{columns:g,rowCount:d.length,colCount:f.length}}return{columns:d3.keys(d)}}}(eve),function(a){function b(b){var c=b?a.extend(b,a.base.defaults):a.base.defaults,d=this,e=c.container,f=null;this.type="xy",this.visualizationType="area";for(var g in c)switch(g){case"tooltip":d[g]=a.extend(c[g],a.base.tooltipDefaults);break;case"legend":d[g]=a.extend(c[g],a.base.legendDefaults);break;case"xAxis":case"yAxis":d[g]=a.extend(c[g],a.base.axisDefaults);break;case"series":var h=a.getType(c[g]);"array"===h?(d[g]=[],c[g].forEach(function(b){d[g].push(a.extend(b,a.base.serieDefaults))})):"object"===h?d[g]=[a.extend(c[g],a.base.serieDefaults)]:d[g]=[a.base.serieDefaults];break;default:d[g]=c[g]}if(!d.container)throw Error("Chart container could not found!");"string"===a.getType(e)&&(e=document.getElementById(e)),e.innerHTML="",f=a.offset(e),"auto"===d.width?d.width=f.width-d.margin.left-d.margin.right:d.width=d.width-d.margin.left-d.margin.right,"auto"===d.height?d.height=f.height-d.margin.top-d.margin.bottom:d.height=d.height-d.margin.top-d.margin.bottom,d.left=f.left,d.top=f.top,d.dataProps=a.getDataProperties(d.data),d.xFieldDataType=b.frozenXAxis?b.frozenXAxis:""!==d.xField?d.dataProps.columns[d.xField].type:"string",d.serieNames=[],d.serieNameStability={},d.normalizedData=null,d.reversedAxis=!!b.reversedAxis&&b.reversedAxis,d.aspectRatio=d.width/d.height,d.svg=d3.select(e).style("background-color",d.backColor).style("border-color",d.border.color).style("border-size",d.border.size).style("border-style",d.border.style).append("svg").attr("id",d.container+"_svg").attr("viewBox","0 0 "+d.width+" "+d.height).attr("preserveAspectRatio","xMidYMid").attr("width",d.width).attr("height",d.height).attr("fill",d.backColor).attr("stroke","none"),d.plot={width:d.width,height:d.height,left:d.margin.left,top:d.margin.top,right:d.margin.right,bottom:d.margin.bottom};var i=null,j=null,k=null,l=null,m=null;d.formatNumber=function(a,b){return isNaN(a)?0:a.toFixed(2)},d.formatDate=function(a,b){return a},d.domains={x:[],y:[]},d.updateTitle=function(){var a=arguments.length>0?arguments[0]:d.title.content;null===i?""!==a&&(i=d.svg.append("foreignObject").attr("width",d.width),k=i.append("xhtml:div").append("div").style("font-size",d.title.fontSize).style("color",d.title.fontColor).style("font-family",d.title.fontFamily+", Arial, Helvetica, Ubuntu").style("padding-left",d.margin.left).style("padding-right",d.margin.right).style("font-style","bold"==d.title.fontStyle?"normal":d.title.fontStyle).style("font-weight","bold"==d.title.fontStyle?"bold":"normal").style("text-align",function(){switch(d.title.position){case"topLeft":case"bottomLeft":return"left";case"topRight":case"bottomRight":return"right";case"topCenter":case"bottomCenter":return"center";default:return"center"}}).html(a),j=k.node().getBoundingClientRect(),i.transition(100).attr("y",function(){switch(d.title.position){case"bottomLeft":case"bottomRight":case"bottomCenter":return d.height-j.height;default:return 0}})):""!==a&&(k.html(a),j=k.node().getBoundingClientRect(),d.plot.height-=j.height,i.transition(100).attr("y",function(){switch(d.title.position){case"bottomLeft":case"bottomRight":case"bottomCenter":return d.height-j.height;default:return 0}})),null!==i&&""!==a&&(d.title.position.indexOf("top")>-1?d.plot.top+=j.height:d.plot.bottom+=j.height)},d.getSerieIndexByName=function(a){var b=-1;return d.series.forEach(function(c,d){c.yField&&c.yField===a?b=d:c.measureField&&c.measureField===a?b=d:c.valueField&&c.valueField===a&&(b=d)}),b},d.updateXYDomain=function(){if("xy"===d.type){var c="";switch(d.serieNames=[],d.domains={x:[],y:[]},d.series.forEach(function(b,e){b.yField&&""!==b.yField?d.serieNames.push(b.yField):b.valueField&&""!==b.valueField?d.serieNames.push(b.valueField):b.measureField&&""!==b.measureField&&d.serieNames.push(b.measureField),d.serieNameStability[d.serieNames[e]]=0,c=e>=a.colors.length?a.randColor():a.colors[e],""===b.color&&(b.color=c),""===b.sliceStrokeColor&&(b.sliceStrokeColor=c)}),d.data.forEach(function(a){a.total=0,d.serieNames.forEach(function(b){void 0===a[b]?a[b]=0:d.serieNameStability[b]+=1,a.total+=+a[b]})}),d.xFieldDataType){case"string":d.domains.x=a.getUniqueValues(d.data,d.xField);break;default:d.domains.x.push(d.xAxis.startsFromZero?0:d3.min(d.data,function(a){return a[d.xField]})),d.domains.x.push(d3.max(d.data,function(a){return a[d.xField]}))}if(b.frozenYAxis&&"string"===b.frozenYAxis)d.domains.y=a.getUniqueValues(d.data,d.series[0].yField);else{var e=[],f=d3.min(d.data,function(a){e=[],d.serieNames.forEach(function(b){e.push(+a[b])});var b=d3.min(e);return d.yAxis.stacked&&b<0?d3.sum(e):b}),g=d3.max(d.data,function(a){return d.yAxis.stacked?a.total:(e=[],d.serieNames.forEach(function(b){e.push(+a[b])}),d3.max(e))});d.domains.y.push(d.yAxis.startsFromZero?0:f),d.domains.y.push(d.frozenMaxY?g:1.1*g)}}},d.updateStandardDomain=function(){"standard"===d.type&&(d.domains={x:[],y:[]},d.domains.y.push(d3.min(d.data,function(a){return d.series[0].yField?+a[d.series[0].yField]:d.series[0].sizeField?+a[d.series[0].sizeField]:d.series[0].measureField?+a[d.series[0].measureField]:d.series[0].valueField?+a[d.series[0].valueField]:void 0})),d.domains.y.push(d3.max(d.data,function(a){return d.series[0].yField?+a[d.series[0].yField]:d.series[0].sizeField?+a[d.series[0].sizeField]:d.series[0].measureField?+a[d.series[0].measureField]:d.series[0].valueField?+a[d.series[0].valueField]:void 0})))},d.updateMapDomain=function(){var a=0,b=0,c=0,e=0;switch(d.visualizationType){case"standardMap":case"tileMap":d.domains={y:[]},c=d.yAxis.startsFromZero?0:d.yAxis.min?d.yAxis.min:d3.min(d.data,function(a){return parseFloat(a[d.series[0].valueField])}),e=d.yAxis.max?d.yAxis.max:d3.max(d.data,function(a){return parseFloat(a[d.series[0].valueField])}),d.domains.y.push(c),d.domains.y.push(e);break;case"ddCartogram":d.domains={y:[],color:[]},a=d.yAxis.startsFromZero?0:d.yAxis.min?d.yAxis.min:d3.min(d.data,function(a){return parseFloat(a[d.series[0].valueField])}),b=d.yAxis.max?d.yAxis.max:d3.max(d.data,function(a){return parseFloat(a[d.series[0].valueField])}),d.domains.y.push(a),d.domains.y.push(b),a=d3.min(d.data,function(a){return parseFloat(a[d.series[0].colorField])}),b=d3.max(d.data,function(a){return parseFloat(a[d.series[0].colorField])}),d.domains.color.push(a),d.domains.color.push(b);break;case"routeMap":d.domains={lat:[],long:[]},null===d.currTransform&&(a=d3.min(d.data,function(a){return parseFloat(a[d.series[0].latField])}),b=d3.max(d.data,function(a){return parseFloat(a[d.series[0].latField])}),d.domains.lat.push(a),d.domains.lat.push(b),a=d3.min(d.data,function(a){return parseFloat(a[d.series[0].longField])}),b=d3.max(d.data,function(a){return parseFloat(a[d.series[0].longField])}),d.domains.long.push(a),d.domains.long.push(b));break;case"locationMap":d.domains={y:[],lat:[],long:[]},a=d.yAxis.startsFromZero?0:d.yAxis.min?d.yAxis.min:d.data.length>1?d3.min(d.data,function(a){return parseFloat(a[d.series[0].valueField])?parseFloat(a[d.series[0].valueField]):1<<500}):d.data[0][d.series[0].valueField],b=d.yAxis.max?d.yAxis.max:d.data.length>1?d3.max(d.data,function(a){return parseFloat(a[d.series[0].valueField])?parseFloat(a[d.series[0].valueField]):0}):d.data[0][d.series[0].valueField],d.domains.y.push(a),d.domains.y.push(b),null===d.currTransform&&(a=d3.min(d.data,function(a){return parseFloat(a[d.series[0].latField])}),b=d3.max(d.data,function(a){return parseFloat(a[d.series[0].latField])}),d.domains.lat.push(a),d.domains.lat.push(b),a=d3.min(d.data,function(a){return parseFloat(a[d.series[0].longField])}),b=d3.max(d.data,function(a){return parseFloat(a[d.series[0].longField])}),d.domains.long.push(a),d.domains.long.push(b));break;default:d.domains={y:[],lat:[],long:[]},a=d.yAxis.startsFromZero?0:d.yAxis.min?d.yAxis.min:d.data.length>1?d3.min(d.data,function(a){return parseFloat(a[d.series[0].valueField])?parseFloat(a[d.series[0].valueField]):1<<500}):d.data[0][d.series[0].valueField],b=d.yAxis.max?d.yAxis.max:d.data.length>1?d3.max(d.data,function(a){return parseFloat(a[d.series[0].valueField])?parseFloat(a[d.series[0].valueField]):0}):d.data[0][d.series[0].valueField],d.domains.y.push(a),d.domains.y.push(b),null===d.currTransform&&(a=d3.min(d.data,function(a){return parseFloat(a[d.series[0].latField])}),b=d3.max(d.data,function(a){return parseFloat(a[d.series[0].latField])}),d.domains.lat.push(a),d.domains.lat.push(b),a=d3.min(d.data,function(a){return parseFloat(a[d.series[0].longField])}),b=d3.max(d.data,function(a){return parseFloat(a[d.series[0].longField])}),d.domains.long.push(a),d.domains.long.push(b))}},d.updateTreeDomain=function(){d.domains={x:[],y:[]};var a=d.series[0].sizeField,b=d.series[0].sourceField,c=d3.pack().padding(2).size([d.plot.width,d.plot.height]),e=d3.hierarchy(d.data).each(function(a){/^other[0-9]+$/.test(a.data[b])&&(a.data[b]=null)}).sum(function(b){return+b[a]}).sort(function(a,b){return b.value-a.value}),f=c(e).descendants();d.domains.y.push(d3.min(f,function(a){return a.value})),d.domains.y.push(d3.max(f,function(a){return a.value}))},d.showTooltip=function(){m.show(Array.prototype.slice.call(arguments))},d.hideTooltip=function(){m.hide()},d.updateLegend=function(){l.update(d)},d.getContent=function(a,b,c){if(!c)return"";var d=c,e=a.data||a,f=d.match(/{(.*?)}/g).map(function(a){return a}),g=b.title||b.yField||b.measureField||b.valueField||b.sizeField,h=e[b.alphaField],i=e[b.closeField],j=e[b.columnField],k=e[b.colorField],l=e[b.dateField],m=e[b.endField],n=e[b.groupField],o=e[b.highField],p=e[b.labelField],q=e[b.latField],r=e[b.longField],s=e[b.lowField],t=e[b.markerField],u=e.measure||e[b.measureField],v=e[b.openField],w=e[b.rangeField],x=e[b.rowField],y=e.sizeValue||e[b.sizeField],z=e[b.sourceField],A=e[b.startField],B=e.value||e[b.valueField],C=e.xValue||e[b.xField],D=e.yValue||e[b.yField];return f.forEach(function(a){var b=a.replace("{","").replace("}",""),c=(b.split(":"),"");switch(b){case"value":c=B;break;case"start":c=A;break;case"source":c=z;break;case"size":c=y;break;case"row":c=x;break;case"range":c=w;break;case"measure":c=u;break;case"open":c=v;break;case"marker":c=t;break;case"low":c=s;break;case"long":c=r;break;case"lat":c=q;break;case"label":c=p;break;case"high":c=o;break;case"serie":c=g;break;case"group":c=n||g;break;case"end":c=m;break;case"date":c=l;break;case"color":c=k;break;case"column":case"col":c=j;break;case"alpha":c=h;break;case"close":c=i;break;case"x":c=C;break;case"y":c=D}d=d.replaceAll(a,c)}),d},d.updateTitle(),"xy"===d.type?d.updateXYDomain():"map"===d.type?d.updateMapDomain():"standard"===d.type?d.updateStandardDomain():"tree"===d.type&&d.updateTreeDomain(),l=eve.base.createLegend(d),m=eve.base.createTooltip(d)}a.base.init=function(a,c){return new b(a,c)}}(eve),function(a){function b(){function a(){switch(k.xFieldDataType){case"string":q=0,k.domains.x.forEach(function(a){a&&a.toString().length>q&&(q=a.length,r=a)});break;case"number":r=k.formatNumber(k.domains.x[1]);break;case"date":r=k.formatDate(k.domains.x[1])}t=k.svg.append("text").style("font-size",k.xAxis.labelFontSize).style("color",k.xAxis.labelFontColor).style("font-family",k.xAxis.labelFontFamily+", Arial, Helvetica, Ubuntu").style("font-style","bold"==k.xAxis.labelFontStyle?"normal":k.xAxis.labelFontStyle).style("font-weight","bold"==k.xAxis.labelFontStyle?"bold":"normal").attr("transform","rotate("+k.xAxis.labelAngle+")").text(r),u=t.node().getBoundingClientRect(),t.remove(),s=k.formatNumber(k.domains.y[1]),t=k.svg.append("text").style("font-size",k.yAxis.labelFontSize).style("color",k.yAxis.labelFontColor).style("font-family",k.yAxis.labelFontFamily+", Arial, Helvetica, Ubuntu").style("font-style","bold"==k.yAxis.labelFontStyle?"normal":k.yAxis.labelFontStyle).style("font-weight","bold"==k.yAxis.labelFontStyle?"bold":"normal").attr("transform","rotate("+k.yAxis.labelAngle+")").text(s),v=t.node().getBoundingClientRect(),t.remove(),C.enabled&&("right"===C.position?k.plot.right+=k.reversedAxis?u.width+C.titleFontSize:v.width+C.titleFontSize:k.plot.left+=k.reversedAxis?u.width+C.titleFontSize:v.width+C.titleFontSize),
B.enabled&&("top"===B.position?k.plot.top+=k.reversedAxis?v.height:u.height:k.plot.bottom+=k.reversedAxis?v.height:u.height),k.plot.width=k.plot.width-k.plot.left-k.plot.right,k.plot.height=k.plot.height-k.plot.top-k.plot.bottom}function b(){if(k.reversedAxis){switch(k.xFieldDataType){case"string":E=d3.scaleBand().range([0,k.plot.height]).padding(.1).round(!0).domain(k.domains.x);break;case"date":E=d3.scaleTime().range([0,k.plot.height]).domain(k.domains.x);break;default:E=d3.scaleLinear().range([0,k.plot.height]).domain(k.domains.x)}D=d3.scaleLinear().range([0,k.plot.width]).domain(k.domains.y)}else{switch(k.xFieldDataType){case"string":D=d3.scaleBand().range([0,k.plot.width]).padding(.1).round(!0).domain(k.domains.x.sort());break;case"date":D=d3.scaleTime().range([0,k.plot.width]).domain(k.domains.x);break;default:D=d3.scaleLinear().range([0,k.plot.width]).domain(k.domains.x)}E=k.frozenYAxis&&"string"===k.frozenYAxis?d3.scaleBand().range([0,k.plot.height]).padding(.1).round(!0).domain(k.domains.y):d3.scaleLinear().range([k.plot.height,0]).domain(k.domains.y)}l.xScale=D,l.yScale=E}function c(){""!==B.title&&(m=k.svg.append("g").append("text").text(B.title).style("fill",B.titleFontColor).style("font-family",B.titleFontFamily+", Arial, Helvetica, Ubuntu").style("font-size",B.titleFontSize+"px").style("font-style","bold"===B.titleFontStyle?"normal":B.titleFontStyle).style("font-weight","bold"===B.titleFontStyle?"bold":"normal").style("text-anchor","middle").attr("x",k.width/2).attr("y",function(){return k.height-k.plot.bottom-this.getBBox().height/2}),G=m.node().getBBox(),k.plot.bottom+=G.height,k.plot.height-=G.height),""!==C.title&&(n=k.svg.append("g").append("text").text(C.title).style("fill",C.titleFontColor).style("font-family",C.titleFontFamily+", Arial, Helvetica, Ubuntu").style("font-size",C.titleFontSize+"px").style("font-style","bold"===C.titleFontStyle?"normal":C.titleFontStyle).style("font-weight","bold"===C.titleFontStyle?"bold":"normal").style("text-anchor","middle").attr("transform",function(a){return G=this.getBBox(),o="right"===C.position?k.plot.width-k.plot.right-G.height:k.plot.left+G.height,p=k.height/2-G.height/2,"translate("+o+","+p+")rotate(-90)"}),k.plot.left+=G.height,k.plot.width-=G.height),k.plot.height-=C.labelFontSize+F}function d(){var a=10;return a="auto"===B.tickCount?k.plot.width/(k.reversedAxis?v.width:u.width)-1:parseInt(B.tickCount),Math.ceil(a)}function e(){var a=10;return"auto"===C.tickCount?(a=k.plot.height/(k.reversedAxis?u.height:v.height)-1,a>k.data.length&&(a=k.data.length)):a=parseInt(C.tickCount),Math.ceil(a)>10?10:Math.ceil(a)}function f(){return"top"===B.position?"string"===k.xFieldDataType?d3.axisTop(l.xScale):d3.axisTop(l.xScale).ticks(d()).tickFormat(B.labelFormat):"string"===k.xFieldDataType?d3.axisBottom(l.xScale):d3.axisBottom(l.xScale).ticks(d()).tickFormat(B.labelFormat)}function g(){return"right"===C.position?d3.axisRight(l.yScale).ticks(e()).tickFormat(C.labelFormat):d3.axisLeft(l.yScale).ticks(e()).tickFormat(C.labelFormat)}function h(a){a?(w.transition(k.animation.duration).ease(k.animation.easing.toEasing()).attr("transform","translate(0,"+("top"===B.position?0:k.plot.height)+")").call(f().tickSize(-k.plot.height,0,0).tickFormat(k.xAxis.labelFormat)),x.transition(k.animation.duration).ease(k.animation.easing.toEasing()).attr("transform","translate("+("right"===C.position?k.plot.width:0)+")").call(g().tickSize(-k.plot.width,0,0).tickFormat(k.yAxis.labelFormat))):(w.attr("transform","translate(0,"+("top"===B.position?0:k.plot.height)+")").call(f().tickSize(-k.plot.height,0,0).tickFormat(k.xAxis.labelFormat)),x.attr("transform","translate("+("right"===C.position?k.plot.width:0)+")").call(g().tickSize(-k.plot.width,0,0).tickFormat(k.yAxis.labelFormat))),w.selectAll(".domain").style("stroke","none").style("stroke-width","0px"),w.selectAll("line").style("stroke-opacity",k.xAxis.gridLineAlpha).style("stroke-width",k.xAxis.gridLineThickness+"px").style("stroke",k.xAxis.gridLineColor),x.selectAll(".domain").style("stroke","none").style("stroke-width","0px"),x.selectAll("line").style("stroke-opacity",k.yAxis.gridLineAlpha).style("stroke-width",k.yAxis.gridLineThickness+"px").style("stroke",k.yAxis.gridLineColor)}function i(){k.xAxis.enabled&&(y.selectAll("path").style("stroke-opacity",k.xAxis.alpha).style("stroke-width",k.xAxis.thickness+"px").style("stroke",k.xAxis.color),y.selectAll("line").style("fill","none").style("stroke-width",k.xAxis.thickness+"px").style("shape-rendering","crispEdges").style("stroke-opacity",k.xAxis.alpha).style("stroke",k.xAxis.color),y.selectAll("text").style("fill",k.xAxis.labelFontColor).style("font-size",k.xAxis.labelFontSize+"px").style("font-family",k.xAxis.labelFontFamily+", Arial, Helvetica, Ubuntu").style("font-style","bold"===k.xAxis.labelFontStyle?"normal":k.xAxis.labelFontStyle).style("font-weight","bold"===k.xAxis.labelFontStyle?"bold":"normal").style("text-anchor",function(a){return k.xAxis.labelAngle>0?"start":k.xAxis.labelAngle<0?"end":"middle"}).transition(k.animation.duration).ease(k.animation.easing.toEasing()).text(function(a){return a})),k.yAxis.enabled&&(z.selectAll("path").style("stroke-opacity",k.yAxis.alpha).style("stroke-width",k.yAxis.thickness+"px").style("stroke",k.yAxis.color),z.selectAll("line").style("fill","none").style("stroke-width",k.yAxis.thickness+"px").style("shape-rendering","crispEdges").style("stroke-opacity",k.yAxis.alpha).style("stroke",k.yAxis.color),z.selectAll("text").style("fill",k.yAxis.labelFontColor).style("font-size",k.yAxis.labelFontSize+"px").style("font-family",k.yAxis.labelFontFamily+", Arial, Helvetica, Ubuntu").style("font-style","bold"===k.yAxis.labelFontStyle?"normal":k.yAxis.labelFontStyle).style("font-weight","bold"===k.yAxis.labelFontStyle?"bold":"normal").transition(k.animation.duration).ease(k.animation.easing.toEasing()).text(function(a){return a}))}function j(){a(),b(),A=k.svg.append("g").attr("transform","translate("+k.plot.left+","+k.plot.top+")"),w=A.append("g").attr("class","eve-x-grid"),x=A.append("g").attr("class","eve-y-grid"),h(),l.xAxis=f(),l.yAxis=g(),k.xAxis.enabled&&(y=A.append("g").style("fill","none").style("shape-rendering","crispEdges").attr("transform","translate(0,"+("top"===B.position?0:k.plot.height)+")").attr("class","eve-x-axis").call(l.xAxis)),k.yAxis.enabled&&(z=A.append("g").style("fill","none").style("shape-rendering","crispEdges").attr("transform","translate("+("right"===C.position?k.plot.width:0)+")").attr("class","eve-y-axis").call(l.yAxis)),i()}if(0===arguments.length)throw Error("Invalid chart data!");var k=arguments[0];this.xScale=null,this.yScale=null,this.xAxis=null,this.yAxis=null;var l=this,m=null,n=null,o=0,p=0,q=0,r="",s="",t=null,u=null,v=null,w=null,x=null,y=null,z=null,A=null,B=null,C=null,D=null,E=null,F=6,G=null;B=k.reversedAxis?k.yAxis:k.xAxis,C=k.reversedAxis?k.xAxis:k.yAxis,c(),j(),l.updateAxis=function(){k.updateXYDomain(),b(),h(!0),k.xAxis.enabled&&y.style("fill","none").style("shape-rendering","crispEdges").transition(k.animation.duration).ease(k.animation.easing.toEasing()).call(f()),k.yAxis.enabled&&z.style("fill","none").style("shape-rendering","crispEdges").transition(k.animation.duration).ease(k.animation.easing.toEasing()).call(g()),i()}}a.base.createAxis=function(a){return new b(a)}}(eve),function(a){function b(b){function c(){var c=null;switch(b.type){case"sliced":b.data.sort(function(a,c){return a[b.xField]<c[b.xField]?-1:a[b.xField]>c[b.xField]?1:0}),b.data.forEach(function(d,e){Y=d[b.xField],c=a.filter(b.legend.legendColors,"value",Y),c.length>0?W.push({value:c[0].value,length:c[0].value.length,color:c[0].color}):W.push({value:Y?Y.toString():"",length:Y?Y.toString().length:0,color:e>a.colors.length?a.randColor():a.colors[e]})});break;case"grouped":_=a.getUniqueValues(b.data,b.series[0].groupField),_.forEach(function(d,e){c=a.filter(b.legend.legendColors,"value",d.toString()),c.length>0?W.push({value:c[0].value,length:c[0].value.length,color:c[0].color}):W.push({value:d?d.toString():"",length:d?d.toString().length:0,color:e>a.colors.length?a.randColor():a.colors[e]})}),W.sort(function(a,b){return a.value<b.value?-1:a.value>b.value?1:0}),b.legendValues=W;break;case"map":if(""===b.series[0].groupField)return;_=a.getUniqueValues(b.data,b.series[0].groupField),_.forEach(function(d,e){c=a.filter(b.legend.legendColors,"value",d.toString()),c.length>0?W.push({value:c[0].value,length:c[0].value.length,color:c[0].color}):W.push({value:d?d.toString():"",length:d?d.toString().length:0,color:e>a.colors.length?a.randColor():a.colors[e]})}),W.sort(function(a,b){return a.value<b.value?-1:a.value>b.value?1:0}),b.legendValues=W;break;default:b.data.sort(function(a,c){return a[b.xField]<c[b.xField]?-1:a[b.xField]>c[b.xField]?1:0}),b.series.forEach(function(a,b){a.title&&""!==a.title?Y=a.title:a.yField&&""!==a.yField?Y=a.yField:a.valueField&&""!==a.valueField?Y=a.valueField:a.measureField&&""!==a.measureField&&(Y=a.measureField),W.push({value:Y?Y.toString():"",length:Y?Y.toString().length:0,color:a.color})})}switch(W.forEach(function(a){a.width=p(a.value).width+b.legend.fontSize+2*s,a.length>T&&(S=a.value,T=a.length)}),Q=p(S),u=Q.height+s,v=Q.width+b.legend.fontSize+2*s,b.legend.position){case"left":case"right":x=u*W.length,w=v,w=w>q?q:w;break;default:x=u,x=x>r?r:x,w=d3.sum(W,function(a){return a.width})}ca.legendSVG=b.svg.append("g").attr("transform",function(a){switch(b.legend.position){case"left":N=b.plot.left,O=b.plot.top+(b.plot.height-b.plot.bottom-b.plot.top)/2-x/2,b.plot.left+=w+b.margin.left;break;case"right":N=b.plot.width-w-b.plot.right+b.margin.right,O=b.plot.top+(b.plot.height-b.plot.bottom-b.plot.top)/2-x/2,b.plot.right+=w+b.margin.right;break;case"bottom":N=b.plot.left+(b.plot.width-b.plot.left-b.plot.right)/2-w/2,O=b.height-b.plot.bottom-x+b.margin.bottom,b.plot.bottom+=x+b.margin.bottom;break;case"top":N=b.plot.left+(b.plot.width-b.plot.left-b.plot.right)/2-w/2,O=b.plot.top+b.margin.top,b.plot.top+=x+b.margin.top}return"translate("+N+","+O+")"}),l(!0)}function d(){var c=[],d=null;switch(b.type){case"sliced":b.data.sort(function(a,c){return a[b.xField]<c[b.xField]?-1:a[b.xField]>c[b.xField]?1:0}),b.data.forEach(function(e,f){Y=e[b.xField],d=a.filter(b.legend.legendColors,"value",Y),d.length>0?c.push({value:d[0].value,length:d[0].value.length,color:d[0].color}):c.push({value:Y?Y.toString():"",length:Y?Y.toString().length:0,color:f>a.colors.length?a.randColor():a.colors[f]})});break;case"grouped":_=a.getUniqueValues(b.data,b.series[0].groupField),_.forEach(function(e,f){d=a.filter(b.legend.legendColors,"value",e.toString()),d.length>0?c.push({value:d[0].value,length:d[0].value.length,color:d[0].color}):c.push({value:e?e.toString():"",length:e?e.toString().length:0,color:f>a.colors.length?a.randColor():a.colors[f]})}),c.sort(function(a,b){return a.value<b.value?-1:a.value>b.value?1:0});break;case"map":if(""===b.series[0].groupField)break;_=a.getUniqueValues(b.data,b.series[0].groupField),_.forEach(function(e,f){d=a.filter(b.legend.legendColors,"value",e.toString()),d.length>0?c.push({value:d[0].value,length:d[0].value.length,color:d[0].color}):c.push({value:e?e.toString():"",length:e?e.toString().length:0,color:a.randColor()})}),c.sort(function(a,b){return a.value<b.value?-1:a.value>b.value?1:0});break;default:b.data.sort(function(a,c){return a[b.xField]<c[b.xField]?-1:a[b.xField]>c[b.xField]?1:0}),b.series.forEach(function(a,d){var e=b.serieNames[d];b.serieNameStability[e]===b.data.length&&(a.title&&""!==a.title?Y=a.title:a.yField&&""!==a.yField?Y=a.yField:a.valueField&&""!==a.valueField?Y=a.valueField:a.measureField&&""!==a.measureField&&(Y=a.measureField),c.push({value:Y?Y.toString():"",length:Y?Y.toString().length:0,color:a.color}))})}switch(W=c,S="",T=0,W.forEach(function(a){a.width=p(a.value).width+b.legend.fontSize+2*s,a.length>T&&(S=a.value,T=a.length)}),ba=v-(p(S).width+b.legend.fontSize+2*s),b.legend.position){case"left":case"right":x=u*W.length;break;default:w=d3.sum(W,function(a){return a.width})}ca.legendSVG.transition(b.animation.duration).ease(b.animation.easing.toEasing()).attr("transform",function(a){switch(b.legend.position){case"left":N=V.left,O=V.top+(V.height-V.bottom-V.top)/2-x/2;break;case"right":N=V.width-w-V.right+b.margin.right,O=V.top+(V.height-V.bottom-V.top)/2-x/2;break;case"bottom":N=V.left+(V.width-V.left-V.right)/2-w/2,O=b.height-V.bottom-x+b.margin.bottom;break;case"top":N=V.left+(V.width-V.left-V.right)/2-w/2,O=V.top+b.margin.top}return"translate("+N+","+O+")"}),m()}function e(){switch(b.legend.rangeList.forEach(function(a,b){a.text.length>T&&(S=a.text,T=a.text.length),a.maxValue.toString().length>T&&(S=a.maxValue.toString(),T=a.maxValue.toString().length)}),Q=p(S),b.legend.position){case"left":case"right":w=C+s+Q.width,x=b.plot.height-b.plot.top-b.plot.bottom,E=x/b.legend.rangeList.length-s,D=C;break;default:x=C+Q.height,w=b.plot.width,D=b.plot.width/b.legend.rangeList.length-s,E=C}ca.legendSVG=b.svg.append("g").attr("transform",function(a){switch(b.legend.position){case"left":N=b.plot.left,O=b.plot.top,b.plot.left+=w+b.margin.left;break;case"right":N=b.plot.width-w-b.plot.right,O=b.plot.top,b.plot.right+=w+b.margin.right;break;case"bottom":N=b.plot.left,O=b.height-b.plot.bottom-x,b.plot.bottom+=x+b.margin.bottom;break;case"top":N=b.plot.left,O=b.plot.top,b.plot.top+=x+b.margin.top}return"translate("+N+","+O+")"}),n(!0)}function f(){}function g(){switch(S=b.formatNumber(b.domains.y[1]),U=Math.ceil(100/b.legend.gradientColors.length),Q=p(S),b.legend.position){case"left":case"right":w=C+s+Q.width,x=b.plot.height-b.plot.top-b.plot.bottom,D=C,E=x-2*s;break;default:x=C+Q.height,w=b.plot.width,D=w-2*s,E=C}ca.legendSVG=b.svg.append("g").attr("transform",function(a){switch(b.legend.position){case"left":N=b.plot.left,O=b.plot.top,b.plot.left+=w+b.margin.left;break;case"right":N=b.plot.width-w-b.plot.right,O=b.plot.top,b.plot.right+=w+b.margin.right;break;case"bottom":N=b.plot.left,O=b.height-b.plot.bottom-x,b.plot.bottom+=x+b.margin.bottom;break;case"top":N=b.plot.left,O=b.plot.top,b.plot.top+=x+b.margin.top}return"translate("+N+","+O+")"}),o(b.domains.y)}function h(){Z.text(b.formatNumber(b.domains.y[0])),$.text(b.formatNumber(b.domains.y[1]))}function j(){switch(b.legend.secondaryType){case"default":switch(b.type){case"map":if(""===b.series[0].groupField)break;_=a.getUniqueValues(b.data,b.series[0].groupField);var c=null;_.forEach(function(d,e){c=a.filter(b.legend.legendColors,"value",d.toString()),c.length>0?W.push({value:c[0].value,length:c[0].value.length,color:c[0].color}):W.push({value:d?d.toString():"",length:d?d.toString().length:0,color:a.randColor()})}),b.legendValues=W,W.forEach(function(a){a.width=p(a.value).width+b.legend.fontSize+2*s,a.length>T&&(S=a.value,T=a.length)}),W.sort(function(a,b){return a.value<b.value?-1:a.value>b.value?1:0}),R=p(S),u=R.height+s,v=R.width+b.legend.fontSize+2*s}break;case"gradient":switch(b.type){case"map":if(""===b.series[0].colorField)break;switch(S=b.formatNumber(b.domains.color[1]),U=Math.ceil(100/b.legend.gradientColors.length),R=p(S),b.legend.position){case"left":case"right":A=C+s+R.width,B=b.plot.height-b.plot.top-b.plot.bottom,D=C,E=B-2*s;break;default:B=C+R.height,A=b.plot.width-b.plot.left-b.plot.right,D=A-2*s,E=C}}break;case"ranged":switch(b.type){case"map":if(""===b.series[0].colorField)break;switch(b.legend.rangeList.forEach(function(a,b){a.text.length>T&&(S=a.text,T=a.text.length),a.maxValue.toString().length>T&&(S=a.maxValue.toString(),T=a.maxValue.toString().length)}),R=p(S),b.legend.position){case"left":case"right":A=C+s+R.width,B=b.plot.height-b.plot.top-b.plot.bottom,D=C,E=B/b.legend.rangeList.length-s;break;default:B=C+R.height,A=b.plot.width-b.plot.left-b.plot.right,D=A/b.legend.rangeList.length-s,E=C}}}var d=d3.scalePow().exponent(.5).domain([b.domains.y[0],b.domains.y[1]]).range([b.domains.y[0]===b.domains.y[1]?b.series[0].maxBulletSize:b.series[0].minBulletSize,b.series[0].maxBulletSize]),e=(b.domains.y[1]-b.domains.y[0])/(b.legend.circleCount-1);for(i=0;i<b.legend.circleCount;i++)X.push({value:(b.domains.y[1]-e*i).toFixed(0),radius:d((b.domains.y[1]-e*i).toFixed(0))});switch(S="",T=0,X.forEach(function(a){a.value.toString().length>T&&(S=a.value.toString(),T=a.value.toString().length)}),Q=p(S),y=Q.width+2*b.series[0].maxBulletSize+2*s,z=2*b.series[0].maxBulletSize+b.legend.fontSize/2,x=z,w=y,"top"===b.legend.position||"bottom"===b.legend.position?x=x>r?r:x:w=w>q?q:w,b.legend.secondaryType){case"default":switch(b.type){case"map":if(""===b.series[0].groupField)break;switch(b.legend.position){case"left":case"right":B=u*W.length,A=v,x=B+t+z,w=Math.max(v,y),w=w>q?q:w,L=(w-A)/2,M=0;break;default:B=u,A=d3.sum(W,function(a){return a.width}),x=Math.max(u,z),x=x>r?r:x,w=A+t+y,L=0,M=(x-B)/2}}break;case"gradient":switch(b.type){case"map":if(""===b.series[0].colorField)break;switch(b.legend.position){case"left":case"right":x=B,B-=t+z,E=B-2*s,w=Math.max(A,y),w=w>q?q:w,L=(w-A)/2,M=0;break;default:w=A,A-=t+y,D=A-2*s,x=Math.max(B,z),x=x>r?r:x,L=0,M=(x-B)/2}}break;case"ranged":switch(b.type){case"map":if(""===b.series[0].colorField)break;switch(b.legend.position){case"left":case"right":x=B,B-=t+z,E=B/b.legend.rangeList.length-s,w=Math.max(A,y),w=w>q?q:w,L=(w-A)/2,M=0;break;default:w=A,A-=t+y,D=A/b.legend.rangeList.length-s,x=Math.max(B,z),x=x>r?r:x,L=0,M=(x-B)/2}}}switch(ca.legendSVG=b.svg.append("g").attr("transform",function(a){switch(b.legend.position){case"left":N=b.plot.left,O=b.plot.top+(b.plot.height-b.plot.bottom-b.plot.top)/2-x/2,b.plot.left+=w+b.margin.left;break;case"right":N=b.plot.width-w-b.plot.right+b.margin.right,O=b.plot.top+(b.plot.height-b.plot.bottom-b.plot.top)/2-x/2,b.plot.right+=w+b.margin.right;break;case"bottom":N=b.plot.left+(b.plot.width-b.plot.left-b.plot.right)/2-w/2,O=b.height-b.plot.bottom-x+b.margin.bottom,b.plot.bottom+=x+b.margin.bottom;break;case"top":N=b.plot.left+(b.plot.width-b.plot.left-b.plot.right)/2-w/2,O=b.plot.top+b.margin.top,b.plot.top+=x+b.margin.top}return"translate("+N+","+O+")"}),b.legend.secondaryType){case"default":switch(b.type){case"map":if(""===b.series[0].groupField)break;l()}break;case"gradient":switch(b.type){case"map":if(""===b.series[0].colorField)break;o(b.domains.color)}break;case"ranged":switch(b.type){case"map":if(""===b.series[0].colorField)break;n()}}switch(b.legend.position){case"left":case"right":L=0===A?0:(w-y)/2,M=(0===B?0:B+t)+b.series[0].maxBulletSize;break;default:L=0===A?0:A+t,M=(0===B?0:(x-z)/2)+b.series[0].maxBulletSize}switch(b.series[0].tileIcon){case"circle":I=ca.legendSVG.selectAll(".eve-legend-scaled-circle").data(X).enter().append("circle").attr("class","eve-legend-scaled-circle").style("stroke","black").style("stroke-width",1).attr("r",function(a){return a.radius});break;case"square":I=ca.legendSVG.selectAll(".eve-legend-scaled-circle").data(X).enter().append("rect").attr("class","eve-legend-scaled-circle").style("stroke","black").style("stroke-width",1).attr("width",function(a){return 2*a.radius}).attr("height",function(a){return 2*a.radius});break;default:I=ca.legendSVG.selectAll(".eve-legend-scaled-circle").data(X).enter().append("circle").attr("class","eve-legend-scaled-circle").style("stroke","black").style("stroke-width",1).attr("r",function(a){return a.radius})}J=ca.legendSVG.selectAll(".eve-legend-scaled-line").data(X).enter().append("line").attr("class","eve-legend-scaled-line").style("stroke","black").style("stroke-width",1),K=ca.legendSVG.selectAll(".eve-legend-scaled-text").data(X).enter().append("text").attr("class","eve-legend-scaled-text").style("font-size",b.legend.fontSize).style("fill",b.legend.fontColor).style("font-family",b.legend.fontFamily+", Arial, Helvetica, Ubuntu").style("font-style","bold"==b.legend.fontStyle?"normal":b.legend.fontStyle).style("font-weight","bold"==b.legend.fontStyle?"bold":"normal").style("cursor","pointer").text(function(a){return a.value}),I.attr("transform",function(a,c){return O=M+("square"===b.series[0].tileIcon?b.series[0].maxBulletSize-2*a.radius:b.series[0].maxBulletSize-a.radius),N=L+("square"===b.series[0].tileIcon?0:b.series[0].maxBulletSize),"translate("+N+", "+O+")"}),J.attr("x1",L+("square"===b.series[0].tileIcon?0:b.series[0].maxBulletSize)).attr("y1",function(a,c){return M+b.series[0].maxBulletSize-2*a.radius}).attr("x2",L+2*b.series[0].maxBulletSize+s).attr("y2",function(a,c){return M+b.series[0].maxBulletSize-2*a.radius}),K.attr("transform",function(a,c){return N=L+2*b.series[0].maxBulletSize+2*s,O=M+b.series[0].maxBulletSize-2*a.radius+b.legend.fontSize/2,"translate("+N+", "+O+")"})}function k(){var c=[];switch(b.legend.secondaryType){case"default":switch(b.type){case"map":if(""===b.series[0].groupField)break;_=a.getUniqueValues(b.data,b.series[0].groupField);var d=null;_.forEach(function(e,f){d=a.filter(b.legend.legendColors,"value",e.toString()),d.length>0?c.push({value:d[0].value,length:d[0].value.length,color:d[0].color}):c.push({value:e?e.toString():"",length:e?e.toString().length:0,color:a.randColor()})}),S="",T=0,c.forEach(function(a){a.width=p(a.value).width+b.legend.fontSize+2*s,a.length>T&&(S=a.value,T=a.length)}),c.sort(function(a,b){return a.value<b.value?-1:a.value>b.value?1:0})}ba=v-(p(S).width+b.legend.fontSize+2*s),W=c}var e=d3.scalePow().exponent(.5).domain([b.domains.y[0],b.domains.y[1]]).range([b.domains.y[0]===b.domains.y[1]?b.series[0].maxBulletSize:b.series[0].minBulletSize,b.series[0].maxBulletSize]),f=(b.domains.y[1]-b.domains.y[0])/(b.legend.circleCount-1);for(i=0;i<b.legend.circleCount;i++)X[i].value=(b.domains.y[1]-f*i).toFixed(0),X[i].radius=e((b.domains.y[1]-f*i).toFixed(0));switch(b.legend.secondaryType){case"default":switch(b.type){case"map":if(""===b.series[0].groupField)break;switch(b.legend.position){case"left":case"right":B=u*c.length,x=B+t+z,L=(w-A)/2,M=0;break;default:A=d3.sum(c,function(a){return a.width}),w=A+t+y,L=0,M=(x-B)/2}}}switch(ca.legendSVG.transition(b.animation.duration).ease(b.animation.easing.toEasing()).attr("transform",function(){switch(b.legend.position){case"left":N=V.left,O=V.top+(V.height-V.bottom-V.top)/2-x/2;break;case"right":N=V.width-w-V.right+b.margin.right,O=V.top+(V.height-V.bottom-V.top)/2-x/2;break;case"bottom":N=V.left+(V.width-V.left-b.plot.right)/2-w/2,O=b.height-V.bottom-x+b.margin.bottom;break;case"top":N=V.left+(V.width-V.left-V.right)/2-w/2,O=V.top+b.margin.top}return"translate("+N+","+O+")"}),b.legend.secondaryType){case"default":if(""===b.series[0].groupField)break;m();break;case"gradient":switch(b.type){case"map":if(""===b.series[0].colorField)break;Z.text(b.formatNumber(b.domains.color[0])),$.text(b.formatNumber(b.domains.color[1]))}}switch(b.legend.position){case"left":case"right":L=0===A?0:(w-y)/2,M=(0===B?0:B+t)+b.series[0].maxBulletSize;break;default:L=0===A?0:A+t,M=(0===B?0:(x-z)/2)+b.series[0].maxBulletSize}switch(I.data(X),b.series[0].tileIcon){case"circle":I.transition(b.animation.duration).ease(b.animation.easing.toEasing()).attr("r",function(a){return a.radius}).attr("transform",function(a,c){return O=M+("square"===b.series[0].tileIcon?b.series[0].maxBulletSize-2*a.radius:b.series[0].maxBulletSize-a.radius),N=L+("square"===b.series[0].tileIcon?0:b.series[0].maxBulletSize),"translate("+N+", "+O+")"});break;case"square":I.transition(b.animation.duration).ease(b.animation.easing.toEasing()).attr("width",function(a){return 2*a.radius}).attr("height",function(a){return 2*a.radius}).attr("transform",function(a,c){return O=M+("square"===b.series[0].tileIcon?b.series[0].maxBulletSize-2*a.radius:b.series[0].maxBulletSize-a.radius),N=L+("square"===b.series[0].tileIcon?0:b.series[0].maxBulletSize),"translate("+N+", "+O+")"});break;default:I.transition(b.animation.duration).ease(b.animation.easing.toEasing()).attr("r",function(a){return a.radius}).attr("transform",function(a,c){return O=M+("square"===b.series[0].tileIcon?b.series[0].maxBulletSize-2*a.radius:b.series[0].maxBulletSize-a.radius),N=L+("square"===b.series[0].tileIcon?0:b.series[0].maxBulletSize),"translate("+N+", "+O+")"})}J.data(X),J.transition(b.animation.duration).ease(b.animation.easing.toEasing()).attr("x1",L+("square"===b.series[0].tileIcon?0:b.series[0].maxBulletSize)).attr("y1",function(a,c){return M+b.series[0].maxBulletSize-2*a.radius}).attr("x2",L+2*b.series[0].maxBulletSize+s).attr("y2",function(a,c){return M+b.series[0].maxBulletSize-2*a.radius}),K.data(X),K.transition(b.animation.duration).ease(b.animation.easing.toEasing()).text(function(a){return a.value}).attr("transform",function(a,c){return N=L+2*b.series[0].maxBulletSize+2*s,O=M+b.series[0].maxBulletSize-2*a.radius+b.legend.fontSize/2,"translate("+N+", "+O+")"})}function l(a){F=ca.legendSVG.selectAll(".eve-legend-icon").data(W).enter().append("rect").attr("class","eve-legend-icon").attr("width",b.legend.fontSize).attr("height",b.legend.fontSize).style("cursor",a?"pointer":"auto").style("fill",function(a,b){return a.color}).on("click",function(c,d){b.legendClick&&a&&b.legendClick(c,d)}),G=ca.legendSVG.selectAll(".eve-legend-text").data(W).enter().append("text").attr("class","eve-legend-text").style("font-size",b.legend.fontSize).style("fill",b.legend.fontColor).style("font-family",b.legend.fontFamily+", Arial, Helvetica, Ubuntu").style("font-style","bold"==b.legend.fontStyle?"normal":b.legend.fontStyle).style("font-weight","bold"==b.legend.fontStyle?"bold":"normal").style("cursor",a?"pointer":"auto").text(function(a,b){return a.value}).on("click",function(c,d){b.legendClick&&a&&b.legendClick(c,d)}),F.attr("transform",function(a,c){switch(b.legend.position){case"left":case"right":N=L,O=M+c*u;break;default:O=M,N=L+d3.sum(W,function(a,b){return b<c?a.width:0})}return"translate("+N+", "+O+")"}),G.attr("transform",function(a,c){switch(b.legend.position){case"left":case"right":N=L+b.legend.fontSize+s,O=M+c*u+u/2;break;default:O=M+u/2,N=L+d3.sum(W,function(a,b){return b<c?a.width:0})+b.legend.fontSize+s}return"translate("+N+", "+O+")"})}function m(a){var c=ca.legendSVG.selectAll(".eve-legend-icon").data(W);c.attr("class","eve-legend-icon update"),c.exit().remove(),F=c.enter().append("rect").attr("class","eve-legend-icon").attr("width",b.legend.fontSize).attr("height",b.legend.fontSize).style("cursor",a?"pointer":"auto").on("click",function(c,d){b.legendClick&&a&&b.legendClick(c,d)}).merge(c).style("fill",function(a,b){return a.color});var d=ca.legendSVG.selectAll(".eve-legend-text").data(W);d.attr("class","eve-legend-text update"),d.exit().remove(),G=d.enter().append("text").attr("class","eve-legend-text").style("font-size",b.legend.fontSize).style("fill",b.legend.fontColor).style("font-family",b.legend.fontFamily+", Arial, Helvetica, Ubuntu").style("font-style","bold"==b.legend.fontStyle?"normal":b.legend.fontStyle).style("font-weight","bold"==b.legend.fontStyle?"bold":"normal").style("cursor",a?"pointer":"auto").on("click",function(c,d){b.legendClick&&a&&b.legendClick(c,d)}).merge(d).text(function(a,b){return a.value}),F.transition(b.animation.duration).ease(b.animation.easing.toEasing()).attr("transform",function(a,c){switch(b.legend.position){case"left":case"right":N=L+ba/2,O=M+c*u;break;default:O=M,N=L+d3.sum(W,function(a,b){return b<c?a.width:0})}return"translate("+N+", "+O+")"}),G.transition(b.animation.duration).ease(b.animation.easing.toEasing()).attr("transform",function(a,c){switch(b.legend.position){case"left":case"right":N=L+ba/2+b.legend.fontSize+s,O=M+c*u+u/2;break;default:O=M+u/2,N=L+d3.sum(W,function(a,b){return b<c?a.width:0})+b.legend.fontSize+s}return"translate("+N+", "+O+")"})}function n(c){F=ca.legendSVG.selectAll(".eve-legend-icon").data(b.legend.rangeList).enter().append("rect").attr("width",D).attr("height",E).style("cursor",c?"pointer":"auto").style("fill",function(b,c){return b.color&&""!==b.color?b.color:a.colors[c]}).attr("transform",function(a,c){switch(b.legend.position){case"left":case"right":N=L,O=M+c*E;break;default:N=L+c*D,O=M}return"translate("+N+","+O+")"}).on("click",function(a,d){b.legendClick&&c&&b.legendClick(a,d)}),G=ca.legendSVG.selectAll(".eve-legend-text").data(b.legend.rangeList).enter().append("text").style("font-size",b.legend.fontSize).style("fill",b.legend.fontColor).style("font-family",b.legend.fontFamily+", Arial, Helvetica, Ubuntu").style("font-style","bold"==b.legend.fontStyle?"normal":b.legend.fontStyle).style("font-weight","bold"==b.legend.fontStyle?"bold":"normal").style("cursor",c?"pointer":"auto").style("text-anchor",function(){switch(b.legend.position){case"left":case"right":return"start";default:return"middle"}}).text(function(a){return a.text}).attr("transform",function(a,c){switch(b.legend.position){case"left":case"right":N=L+D+s,O=M+c*E+E/2;break;default:N=L+c*D+D/2,O=M+E+Q.height}return"translate("+N+","+O+")"}).on("click",function(a,d){b.legendClick&&c&&b.legendClick(a,d)}),ca.legendSVG.selectAll(".eve-legend-line").data(b.legend.rangeList).enter().append("rect").attr("width",function(){switch(b.legend.position){case"left":case"right":return D+s;default:return 2}}).attr("height",function(){switch(b.legend.position){case"left":case"right":return 2;default:return E+s}}).style("fill","#000").attr("transform",function(a,c){switch(b.legend.position){case"left":case"right":N=L,O=M+c*E;break;default:N=L+c*D,O=M}return"translate("+N+","+O+")"}),ca.legendSVG.append("rect").attr("width",function(){switch(b.legend.position){case"left":case"right":return D+s;default:return 2}}).attr("height",function(){switch(b.legend.position){case"left":case"right":return 2;default:return E+s}}).style("fill","#000").attr("transform",function(){switch(b.legend.position){case"left":case"right":N=L,O=M+E*b.legend.rangeList.length;break;default:N=L+D*b.legend.rangeList.length,O=M}return"translate("+N+","+O+")"}),ca.legendSVG.selectAll(".eve-legend-icon").data(b.legend.rangeList).enter().append("text").style("font-size",b.legend.fontSize).style("fill",b.legend.fontColor).style("font-family",b.legend.fontFamily+", Arial, Helvetica, Ubuntu").style("font-style","bold"==b.legend.fontStyle?"normal":b.legend.fontStyle).style("font-weight","bold"==b.legend.fontStyle?"bold":"normal").style("text-anchor",function(a,c){switch(b.legend.position){case"left":case"right":return"start";default:return 0===c?"start":"middle"}}).text(function(a){return a.minValue}).attr("transform",function(a,c){switch(b.legend.position){case"left":case"right":N=L+D+s+1,O=0===c?M+c*E+b.legend.fontSize:M+c*E+b.legend.fontSize/2;break;default:N=L+c*D,O=M+E+Q.height+1}return"translate("+N+","+O+")"}),ca.legendSVG.append("text").style("font-size",b.legend.fontSize).style("fill",b.legend.fontColor).style("font-family",b.legend.fontFamily+", Arial, Helvetica, Ubuntu").style("font-style","bold"==b.legend.fontStyle?"normal":b.legend.fontStyle).style("font-weight","bold"==b.legend.fontStyle?"bold":"normal").style("text-anchor",function(){switch(b.legend.position){case"left":case"right":return"start";default:return"end"}}).text(function(a){return b.legend.rangeList[b.legend.rangeList.length-1].maxValue}).attr("transform",function(){switch(b.legend.position){case"left":case"right":N=L+D+s+1,O=M+E*b.legend.rangeList.length;break;default:N=L+D*b.legend.rangeList.length,O=M+E+Q.height+1}return"translate("+N+","+O+")"})}function o(a){switch(b.legend.position){case"left":case"right":legendMinStopX="0%",legendMaxStopX="0%",legendMinStopY="0%",legendMaxStopY="100%";break;default:legendMinStopX="0%",legendMaxStopX="100%",legendMinStopY="0%",legendMaxStopY="0%"}H=b.svg.append("defs").append("linearGradient").attr("x1",legendMinStopX).attr("y1",legendMinStopY).attr("x2",legendMaxStopX).attr("y2",legendMaxStopY).attr("id","gradient"+b.container),H.selectAll("stop").data(b.legend.gradientColors).enter().append("stop").attr("offset",function(a,c){return c===b.legend.gradientColors.length-1?"100%":c*U+"%"}).attr("stop-color",function(a){return a}),ca.legendSVG.append("rect").attr("width",D).attr("height",E).style("fill","url(#gradient"+b.container+")").attr("transform",function(a,b){return N=L,O=M,
"translate("+N+","+O+")"}),Z=ca.legendSVG.append("text").style("font-size",b.legend.fontSize).style("fill",b.legend.fontColor).style("font-family",b.legend.fontFamily+", Arial, Helvetica, Ubuntu").style("font-style","bold"==b.legend.fontStyle?"normal":b.legend.fontStyle).style("font-weight","bold"==b.legend.fontStyle?"bold":"normal").style("text-anchor","start").text(b.formatNumber(a[0])).attr("transform",function(a,c){switch(b.legend.position){case"left":case"right":N=L+D+s,O=M+Q.height/2;break;default:N=L,O=M+E+Q.height}return"translate("+N+","+O+")"}),$=ca.legendSVG.append("text").style("font-size",b.legend.fontSize).style("fill",b.legend.fontColor).style("font-family",b.legend.fontFamily+", Arial, Helvetica, Ubuntu").style("font-style","bold"==b.legend.fontStyle?"normal":b.legend.fontStyle).style("font-weight","bold"==b.legend.fontStyle?"bold":"normal").style("text-anchor",function(){switch(b.legend.position){case"left":case"right":return"start";default:return"end"}}).text(b.formatNumber(a[1])).attr("transform",function(a,c){switch(b.legend.position){case"left":case"right":N=L+D+s,O=M+E;break;default:N=L+D,O=M+E+Q.height}return"translate("+N+","+O+")"})}function p(a){return P=b.svg.append("text").style("font-size",b.legend.fontSize).style("fill",b.legend.fontColor).style("font-family",b.legend.fontFamily+", Arial, Helvetica, Ubuntu").style("font-style","bold"==b.legend.fontStyle?"normal":b.legend.fontStyle).style("font-weight","bold"==b.legend.fontStyle?"bold":"normal").text(a),aa=P.node().getBoundingClientRect(),P.remove(),aa}var q=b.width/4,r=b.height/4,s=5,t=2*s,u=b.legend.fontSize+s,v=0,w=0,x=0,y=0,z=0,A=0,B=0,C=20,D=0,E=0,F=null,G=null,H=null,I=null,J=null,K=null,L=0,M=0,N=0,O=0,P=null,Q=null,R=null,S="",T=0,U=0,V=null,W=[],X=[],Y="",Z=null,$=null,_=[],aa=null,ba=0,ca=this;if(ca.legendSVG=null,V=a.clone(b.plot),b.legend.enabled)switch(b.legend.type){case"default":c();break;case"ranged":e();break;case"gradient":g();break;case"scaled":j()}ca.update=function(){if(b.legend.enabled)switch(b.legend.type){case"default":d();break;case"ranged":f();break;case"gradient":h();break;case"scaled":k()}}}a.base.createLegend=function(a){return new b(a)}}(eve),function(a){function b(a){function b(){c.style("background-color",a.tooltip.backColor).style("border-style",a.tooltip.borderStyle).style("border-color",a.tooltip.borderColor).style("border-radius",a.tooltip.borderRadius+"px").style("border-width",a.tooltip.borderSize+"px").style("color",a.tooltip.fontColor).style("font-family",a.tooltip.fontFamily).style("font-size",a.tooltip.fontSize+"px").style("padding-left",a.tooltip.padding+"px").style("padding-top",a.tooltip.padding+"px").style("padding-right",a.tooltip.padding+"px").style("padding-bottom",a.tooltip.padding+"px"),"bold"==a.tooltip.fontStyle?c.style("font-weight","bold").style("font-style","normal"):c.style("font-weight","normal").style("font-style",a.tooltip.fontStyle)}var c=d3.select("#eveTooltip");null===c.node()&&(c=d3.select("body").append("div").attr("id","eveTooltip").style("position","absolute").style("display","none").style("z-index",1e7).style("box-shadow","0 3px 6px rgba(0, 0, 0, .15)")),this.show=function(){var d=null,e=parseInt(d3.event.pageX+5);switch(y=parseInt(d3.event.pageY+5),arguments.length){case 0:return;case 1:d=arguments[0].toString().replaceAll("\n","<br>");break;case 2:d=arguments[0],e=arguments[1];break;case 3:d=arguments[0],e=arguments[1],y=arguments[2]}d=d.toString().replaceAll("\n","<br>"),a.tooltip.enabled&&""!==d&&null!==c&&(b(),c.html(d).style("left",e+"px").style("top",y+"px").style("display","block"))},this.hide=function(){c.html("").style("display","none")}}a.base.createTooltip=function(a){return new b(a)}}(eve),function(a){function b(b){function c(){q=Math.abs(k.yScale(0)-k.yScale(i.domains.y[0])),r=d3.area().x(function(a){return"string"===i.xFieldDataType?k.xScale(a.data[i.xField])+k.xScale.bandwidth()/2:k.xScale(a.data[i.xField])}).y0(function(a){return 1===i.series.length?k.yScale(i.domains.y[0]):k.yScale(a[0])-q}).y1(function(a){return 1===i.series.length?k.yScale(a[1]-a[0]):k.yScale(a[1])-q}),p.transition(i.animation.duration).ease(i.animation.easing.toEasing()).delay(function(a,b){return b*i.animation.delay}).attr("d",r),i.series.forEach(function(a,b){t.selectAll(".eve-area-bullet-"+b).transition(i.animation.duration).ease(i.animation.easing.toEasing()).delay(function(a,b){return b*i.animation.delay}).attr("transform",function(a){return e(a,!1)})})}function d(){q=Math.abs(k.yScale(0)-k.yScale(i.domains.y[0])),r=d3.area().x(function(a){return"string"===i.xFieldDataType?k.xScale(a[i.xField])+k.xScale.bandwidth()/2:k.xScale(a[i.xField])}).y0(function(a){return 1===i.series.length?k.yScale(i.domains.y[0]):i.plot.height}).y1(function(a){return 1===i.series.length?k.yScale(a[i.serieNames[a._serieIndex]]):k.yScale(a[i.serieNames[a._serieIndex]])-q}),o.selectAll("path").transition(i.animation.duration).ease(i.animation.easing.toEasing()).delay(function(a,b){return b*i.animation.delay}).attr("d",r),i.series.forEach(function(a,b){t.selectAll(".eve-area-bullet-"+b).transition(i.animation.duration).ease(i.animation.easing.toEasing()).delay(function(a,b){return b*i.animation.delay}).attr("transform",function(a){return f(a,!1)})})}function e(a,b){var c=0,d=0,e=i.series[a.serieIndex];return c="string"===i.xFieldDataType?k.xScale(a.data[i.xField])+k.xScale.bandwidth()/2:k.xScale(a.data[i.xField]),d=1===i.series.length?b?i.plot.height:k.yScale(a[1]-a[0]):b?i.plot.height:k.yScale(a[1]),e.bullet.indexOf("image:")>-1&&(c-=e.bulletSize/2,d-=e.bulletSize/2),i.series.length>1&&(d-=q),"translate("+c+","+d+")"}function f(a,b){var c=0,d=0,e=i.series[a._serieIndex];return c="string"===i.xFieldDataType?k.xScale(a[i.xField])+k.xScale.bandwidth()/2:k.xScale(a[i.xField]),d=b?i.plot.height:k.yScale(a[i.serieNames[a._serieIndex]]),e.bullet.indexOf("image:")>-1&&(c-=e.bulletSize/2,d-=e.bulletSize/2),i.series.length>1&&(d-=q),"translate("+c+","+d+")"}function g(){i.data.sort(function(a,b){return a[i.xField]<b[i.xField]?-1:a[i.xField]>b[i.xField]?1:0}),q=Math.abs(k.yScale(0)-k.yScale(i.domains.y[0])),m=null,l=j.keys(i.serieNames)(i.data),l.forEach(function(a){a.forEach(function(b){b.serieIndex=a.index})}),r=d3.area().x(function(a){return"string"===i.xFieldDataType?k.xScale(a.data[i.xField])+k.xScale.bandwidth()/2:k.xScale(a.data[i.xField])}).y0(function(a){return i.plot.height}).y1(function(a){return i.plot.height}),s=d3.symbol().type(function(a){return"none"===i.series[a.serieIndex].bullet?d3.symbolCircle:i.series[a.serieIndex].bullet.toSymbol()}).size(function(a){return Math.pow(i.series[a.serieIndex].bulletSize,2)}),o=t.selectAll(".eve-area-serie").data(l).enter().append("g").attr("class","eve-area-serie"),p=o.append("path").attr("d",r).attr("class","eve-area-path").attr("fill",function(a,b){return m=i.series[a.index],m.colorField&&""!==m.colorField?a.data[m.colorField]:m.color}).attr("stroke",function(a,b){return m=i.series[a.index],m.colorField&&""!==m.colorField?a.data[m.colorField]:m.sliceStrokeColor}).attr("fill-opacity",function(a,b){return i.series[a.index].alpha}).attr("stroke-opacity",function(a,b){return i.series[a.index].sliceStrokeAlpha}).attr("stroke-width",function(a,b){return i.series[a.index].sliceStrokeThickness}),i.series.forEach(function(a,b){n=l[b],a.bullet.indexOf("image:")===-1?t.selectAll(".eve-area-bullet-"+b).data(n).enter().append("path").attr("class","eve-area-bullets eve-area-bullet-"+b).attr("d",s).attr("fill-opacity",a.showBullets?a.bulletAlpha:0).attr("stroke-opacity",a.bulletStrokeAlpha).attr("stroke-width",a.bulletStrokeSize).attr("fill",function(b,c){return a.colorField&&""!==a.colorField?b.data[a.colorField]:a.bulletColor&&""!==a.bulletColor?b.data[a.bulletColor]:a.color}).attr("transform",function(a){return e(a,!0)}).on("click",function(a){i.sliceClick&&i.sliceClick(a.data)}).on("mousemove",function(b,c){d3.select(this).attr("fill-opacity",a.sliceHoverAlpha),i.showTooltip(i.getContent(b,a,i.tooltip.format))}).on("mouseout",function(b,c){d3.select(this).attr("fill-opacity",a.alpha),i.hideTooltip()}):t.selectAll(".eve-area-bullet-"+b).data(n).enter().append("svg:image").attr("class","eve-area-bullets eve-area-bullet-"+b).attr("xlink:href",a.bullet.replace("image:","")).attr("width",a.bulletSize).attr("height",a.bulletSize).attr("transform",function(a){return e(a,!0)}).on("mousemove",function(b,c){i.showTooltip(i.getContent(b,a,i.tooltip.format))}).on("mouseout",function(a,b){i.hideTooltip()})}),c(),i.update=function(a){i.data=a,i.data.sort(function(a,b){return a[i.xField]<b[i.xField]?-1:a[i.xField]>b[i.xField]?1:0}),k.updateAxis(),i.updateLegend(),m=null,l=j.keys(i.serieNames)(i.data),l.forEach(function(a){a.forEach(function(b){b.serieIndex=a.index})}),o.data(l).exit().remove(),p.data(l).exit().remove(),i.series.forEach(function(a,b){n=l[b],t.selectAll(".eve-area-bullet-"+b).data(n).exit().remove()}),c()}}function h(){i.data.sort(function(a,b){return a[i.xField]<b[i.xField]?-1:a[i.xField]>b[i.xField]?1:0}),n=[],i.serieNames.forEach(function(b,c){var d=[];i.data.forEach(function(e,f){for(var g in e)e._serieIndex=c,g===b&&d.push(a.clone(e))}),d.index=c,d.name=b,n.push(d)}),q=Math.abs(k.yScale(0)-k.yScale(i.domains.y[0])),m=null,r=d3.area().x(function(a){return"string"===i.xFieldDataType?k.xScale(a[i.xField])+k.xScale.bandwidth()/2:k.xScale(a[i.xField])}).y0(function(a){return i.plot.height}).y1(function(a){return i.plot.height}),s=d3.symbol().type(function(a){return"none"===i.series[a._serieIndex].bullet?d3.symbolCircle:i.series[a._serieIndex].bullet.toSymbol()}).size(function(a){return Math.pow(i.series[a._serieIndex].bulletSize,2)}),o=t.selectAll(".eve-area-serie").data(n).enter().append("g").attr("class","eve-area-serie"),p=o.append("path").attr("d",r).attr("class","eve-area-path").attr("fill",function(a,b){return m=i.series[a.index],m.colorField&&""!==m.colorField?a.data[m.colorField]:m.color}).attr("stroke",function(a,b){return m=i.series[a.index],m.colorField&&""!==m.colorField?a.data[m.colorField]:m.sliceStrokeColor}).attr("fill-opacity",function(a,b){return i.series[a.index].alpha}).attr("stroke-opacity",function(a,b){return i.series[a.index].sliceStrokeAlpha}).attr("stroke-width",function(a,b){return i.series[a.index].sliceStrokeThickness}),i.series.forEach(function(a,b){a.bullet.indexOf("image:")===-1?t.selectAll(".eve-area-bullet-"+b).data(n[b]).enter().append("path").attr("class","eve-area-bullets eve-area-bullet-"+b).attr("d",s).attr("fill-opacity",a.showBullets?a.bulletAlpha:0).attr("stroke-opacity",a.bulletStrokeAlpha).attr("stroke-width",a.bulletStrokeSize).attr("fill",function(b,c){return a.colorField&&""!==a.colorField?b.data[a.colorField]:a.bulletColor&&""!==a.bulletColor?b.data[a.bulletColor]:a.color}).attr("transform",function(a){return f(a,!0)}).on("click",function(a){i.sliceClick&&i.sliceClick(a.data)}).on("mousemove",function(b,c){d3.select(this).attr("fill-opacity",a.sliceHoverAlpha),i.showTooltip(i.getContent(b,a,i.tooltip.format))}).on("mouseout",function(b,c){d3.select(this).attr("fill-opacity",a.alpha),i.hideTooltip()}):t.selectAll(".eve-area-bullet-"+b).data(n[b]).enter().append("svg:image").attr("class","eve-area-bullets eve-area-bullet-"+b).attr("xlink:href",a.bullet.replace("image:","")).attr("width",a.bulletSize).attr("height",a.bulletSize).attr("transform",function(a){return f(a,!0)}).on("mousemove",function(b,c){i.showTooltip(i.getContent(b,a,i.tooltip.format))}).on("mouseout",function(a,b){i.hideTooltip()})}),d(),i.update=function(b){i.data=b,i.data.sort(function(a,b){return a[i.xField]<b[i.xField]?-1:a[i.xField]>b[i.xField]?1:0}),n=[],i.serieNames.forEach(function(b,c){var d=[];i.data.forEach(function(e,f){for(var g in e)e._serieIndex=c,g===b&&d.push(a.clone(e))}),d.index=c,d.name=b,n.push(d)}),q=Math.abs(k.yScale(0)-k.yScale(i.domains.y[0])),m=null,k.updateAxis(),i.updateLegend(),o.data(n).exit().remove(),p.data(n).exit().remove(),i.series.forEach(function(a,b){t.selectAll(".eve-area-bullet-"+b).data(n[b]).exit().remove()}),d()}}var i=eve.base.init(b),j=d3.stack(),k=eve.base.createAxis(i),l=null,m=null,n=null,o=null,p=null,q=(i.xField,0),r=null,s=null,t=i.svg.append("g").attr("transform","translate("+i.plot.left+","+i.plot.top+")");return i.yAxis.stacked?g():h(),i.toCanvas=function(){var a=document.getElementById(i.container);return new Promise(function(b){html2canvas(a).then(function(a){b(a)})})},i.toImage=function(){var a=document.getElementById(i.container);return new Promise(function(b){html2canvas(a).then(function(a){b(a.toDataURL("image/png"))})})},i}a.areaChart=function(a){return a.type="xy",new b(a)}}(eve),function(a){function b(a){function b(a){a?(o=Math.abs(g.xScale(0)-g.xScale(e.domains.y[0])),k.transition(e.animation.duration).ease(e.animation.easing.toEasing()).delay(function(a,b){return b*e.animation.delay}).attr("x",function(a){return e.domains.y[0]<0?a[1]>0?g.xScale(a[0]):g.xScale(a[1]):a[1]<0?g.xScale(a[0]):g.xScale(a[0])+o}).attr("y",function(a){return g.yScale(a.data[l])}).attr("width",function(a){return 1===e.series.length?Math.abs(g.xScale(a[0])-g.xScale(a[1]))-o:Math.abs(g.xScale(a[0])-g.xScale(a[1]))}).attr("height",g.yScale.bandwidth())):k.transition(e.animation.duration).ease(e.animation.easing.toEasing()).delay(function(a,b){return b*e.animation.delay}).attr("width",function(a,b){return g.xScale(a.data[a.name])}).attr("height",n).attr("x",function(a){return e.domains.y[0]<0?a.data[a.name]<0?g.xScale(0)-g.xScale(a.data[a.name]):g.xScale(0):g.xScale(e.domains.y[0])}).attr("y",function(a){return m(a.name)})}function c(){e.data.sort(function(a,b){return b.total-a.total}),i=null,h=f.keys(e.serieNames)(e.data),h.forEach(function(a){a.forEach(function(b){b.serieIndex=a.index})}),j=p.selectAll(".eve-bar-serie").data(h).enter().append("g").attr("class","eve-bar-serie").attr("fill",function(a,b){return i=e.series[b],i.colorField&&""!==i.colorField?a.data[i.colorField]:i.color}).attr("stroke",function(a,b){return i=e.series[b],i.colorField&&""!==i.colorField?a.data[i.colorField]:i.sliceStrokeColor}).attr("fill-opacity",function(a,b){return e.series[b].alpha}).attr("stroke-opacity",function(a,b){return e.series[b].sliceStrokeAlpha}).attr("stroke-width",function(a,b){return e.series[b].sliceStrokeThickness}),k=j.selectAll("rect").data(function(a,b){return a}).enter().append("rect").on("click",function(a){e.sliceClick&&e.sliceClick(a.data)}).on("mousemove",function(a,b){i=e.series[a.serieIndex],d3.select(this).attr("fill-opacity",i.sliceHoverAlpha),e.showTooltip(e.getContent(a,i,e.tooltip.format))}).on("mouseout",function(a,b){i=e.series[a.serieIndex],d3.select(this).attr("fill-opacity",i.alpha),e.hideTooltip()}),k.attr("x",0).attr("y",function(a){return g.yScale(a.data[l])}).attr("width",0).attr("height",g.yScale.bandwidth()),b(!0),e.update=function(a){e.data=a,g.updateAxis(),e.updateLegend(),e.data.sort(function(a,b){return b.total-a.total}),i=null,h=f.keys(e.serieNames)(e.data),h.forEach(function(a){a.forEach(function(b){b.serieIndex=a.index})}),j.data(h).exit().remove(),k.data(function(a){return a}).exit().remove(),k.attr("x",0).attr("y",function(a){return g.yScale(a.data[l])}).attr("height",g.yScale.bandwidth()).attr("width",0),b(!0)}}function d(){m=d3.scaleBand().domain(e.serieNames).range([0,g.yScale.bandwidth()]).round(!0).padding(.1),n=m.bandwidth(),j=p.selectAll(".eve-bar-serie").data(e.data).enter().append("g").attr("class","eve-bar-serie").attr("transform",function(a){return"translate(0, "+g.yScale(a[e.xField])+")"}),k=j.selectAll("rect").data(function(a){return e.serieNames.map(function(b){return{name:b,data:a}})}).enter().append("rect").attr("fill",function(a,b){return i=e.series[b],i.colorField&&""!==i.colorField?a.data[i.colorField]:i.color}).attr("stroke",function(a,b){return i=e.series[b],i.colorField&&""!==i.colorField?a.data[i.colorField]:i.sliceStrokeColor}).attr("fill-opacity",function(a,b){return e.series[b].alpha}).attr("stroke-opacity",function(a,b){return e.series[b].sliceStrokeAlpha}).attr("stroke-width",function(a,b){return e.series[b].sliceStrokeThickness}).attr("width",0).attr("height",n).attr("x",g.xScale(0)).attr("y",function(a){return m(a.name)}).on("click",function(a){e.sliceClick&&e.sliceClick(a.data)}).on("mousemove",function(a,b){i=e.series[b],d3.select(this).attr("fill-opacity",i.sliceHoverAlpha),e.showTooltip(e.getContent(a,i,e.tooltip.format))}).on("mouseout",function(a,b){i=e.series[b],d3.select(this).attr("fill-opacity",i.alpha),e.hideTooltip()}),b(),e.update=function(a){e.data=a,g.updateAxis(),e.updateLegend(),m=d3.scaleBand().domain(e.serieNames).range([0,g.yScale.bandwidth()]).round(!0).padding(.1),n=m.bandwidth(),j.data(e.data).exit().remove(),k.data(function(a){return e.serieNames.map(function(b){return{name:b,data:a}})}).exit().remove(),b()}}var e=eve.base.init(a),f=d3.stack(),g=eve.base.createAxis(e),h=null,i=null,j=null,k=null,l=e.xField,m=null,n=0,o=0,p=e.svg.append("g").attr("transform","translate("+e.plot.left+","+e.plot.top+")");return e.yAxis.stacked?c():d(),e.toCanvas=function(){var a=document.getElementById(e.container);return new Promise(function(b){html2canvas(a).then(function(a){b(a)})})},e.toImage=function(){var a=document.getElementById(e.container);return new Promise(function(b){html2canvas(a).then(function(a){b(a.toDataURL("image/png"))})})},e}a.barChart=function(a){return a.type="xy",a.reversedAxis=!0,new b(a)}}(eve),function(a){function b(b){function c(){j=Math.abs(g.yScale(0)-g.yScale(f.domains.y[0])),f.series.forEach(function(a,b){l.selectAll(".eve-bubble-bullet-"+b).transition(f.animation.duration).ease(f.animation.easing.toEasing()).delay(function(a,b){return b*f.animation.delay}).attr("transform",function(a){return d(a,!1)})})}function d(a,b){var c=0,d=0,e=f.series[a._serieIndex];return c="string"===f.xFieldDataType?g.xScale(a[f.xField])+g.xScale.bandwidth()/2:g.xScale(a[f.xField]),d=b?f.plot.height:g.yScale(a[f.serieNames[a._serieIndex]]),e.bullet.indexOf("image:")>-1&&(c-=e.bulletSize/2,d-=e.bulletSize/2),"translate("+c+","+d+")"}function e(){f.data.sort(function(a,b){return a[f.xField]<b[f.xField]?-1:a[f.xField]>b[f.xField]?1:0}),i=[],f.serieNames.forEach(function(b,c){var d=[];f.data.forEach(function(e,f){for(var g in e)e._serieIndex=c,g===b&&d.push(a.clone(e))}),d.index=c,d.name=b,d.minSize=d3.min(f.data,function(a){return a[f.series[c].sizeField]}),d.maxSize=d3.max(f.data,function(a){return a[f.series[c].sizeField]}),i.push(d)}),j=Math.abs(g.yScale(0)-g.yScale(f.domains.y[0])),h=null}b.yAxis?b.yAxis.stacked=!1:b.yAxis={stacked:!1};var f=eve.base.init(b),g=eve.base.createAxis(f),h=null,i=[],j=(f.xField,0),k=null,l=f.svg.append("g").attr("transform","translate("+f.plot.left+","+f.plot.top+")"),m=function(a,b){if(""!==a.sizeField){var c=i[b._serieIndex],d=c.maxSize-c.minSize,e=a.maxBulletSize-a.minBulletSize,f=a.maxBulletSize;return 0!==d&&(f=b[a.sizeField]/d*e-c.minSize/d*e+a.minBulletSize),a.bullet.indexOf("image:")===-1?Math.pow(f,2):f}return Math.pow(a.bulletSize,2)};return k=d3.symbol().type(function(a){return"none"===f.series[a._serieIndex].bullet?d3.symbolCircle:f.series[a._serieIndex].bullet.toSymbol()}).size(function(a){return m(f.series[a._serieIndex],a)}),e(),f.series.forEach(function(a,b){a.bullet.indexOf("image:")===-1?l.selectAll(".eve-bubble-bullet-"+b).data(i[b]).enter().append("path").attr("class","eve-bubble-bullets eve-bubble-bullet-"+b).attr("d",k).attr("fill-opacity",a.showBullets?a.bulletAlpha:0).attr("stroke-opacity",a.bulletStrokeAlpha).attr("stroke-width",a.bulletStrokeSize).attr("fill",function(b,c){return a.colorField&&""!==a.colorField?b.data[a.colorField]:a.bulletColor&&""!==a.bulletColor?b.data[a.bulletColor]:a.color}).attr("transform",function(a){return d(a,!0)}).on("click",function(a){f.sliceClick&&f.sliceClick(a.data)}).on("mousemove",function(b,c){d3.select(this).attr("fill-opacity",a.sliceHoverAlpha),f.showTooltip(f.getContent(b,a,f.tooltip.format))}).on("mouseout",function(b,c){d3.select(this).attr("fill-opacity",a.alpha),f.hideTooltip()}):l.selectAll(".eve-bubble-bullet-"+b).data(i[b]).enter().append("svg:image").attr("class","eve-bubble-bullets eve-bubble-bullet-"+b).attr("xlink:href",a.bullet.replace("image:","")).attr("width",function(b){return m(a,b)}).attr("height",function(b){return m(a,b)}).attr("transform",function(a){return d(a,!0)}).on("mousemove",function(b,c){f.showTooltip(f.getContent(b,a,f.tooltip.format))}).on("mouseout",function(a,b){f.hideTooltip()})}),c(),f.update=function(a){f.data=a,e(),g.updateAxis(),f.updateLegend(),f.series.forEach(function(a,b){l.selectAll(".eve-bubble-bullet-"+b).data(i[b]).exit().remove()}),c()},f.toCanvas=function(){var a=document.getElementById(f.container);return new Promise(function(b){html2canvas(a).then(function(a){b(a)})})},f.toImage=function(){var a=document.getElementById(f.container);return new Promise(function(b){html2canvas(a).then(function(a){b(a.toDataURL("image/png"))})})},f}a.bubbleChart=function(a){return a.type="xy",new b(a)}}(eve),function(a){function b(a){function b(a){a?(o=Math.abs(g.yScale(0)-g.yScale(e.domains.y[0])),k.transition(e.animation.duration).ease(e.animation.easing.toEasing()).delay(function(a,b){return b*e.animation.delay}).attr("x",function(a){return g.xScale(a.data[l])}).attr("y",function(a){return 1===e.series.length?a[1]<0?g.yScale(a[0]):g.yScale(a[1]):a[1]<0?g.yScale(a[0]):g.yScale(a[1])-o}).attr("height",function(a){return 1===e.series.length?Math.abs(g.yScale(a[0])-g.yScale(a[1]))-o:Math.abs(g.yScale(a[0])-g.yScale(a[1]))}).attr("width",g.xScale.bandwidth())):k.transition(e.animation.duration).ease(e.animation.easing.toEasing()).delay(function(a,b){return b*e.animation.delay}).attr("width",n).attr("height",function(a,b){return g.yScale(e.domains.y[0])-g.yScale(a.data[a.name])}).attr("x",function(a){return m(a.name)}).attr("y",function(a){return g.yScale(a.data[a.name])})}function c(){e.data.sort(function(a,b){return b.total-a.total}),i=null,h=f.keys(e.serieNames)(e.data),h.forEach(function(a){a.forEach(function(b){b.serieIndex=a.index})}),j=p.selectAll(".eve-column-serie").data(h).enter().append("g").attr("class","eve-column-serie").attr("fill",function(a,b){return i=e.series[b],i.colorField&&""!==i.colorField?a.data[i.colorField]:i.color}).attr("stroke",function(a,b){return i=e.series[b],i.colorField&&""!==i.colorField?a.data[i.colorField]:i.sliceStrokeColor}).attr("fill-opacity",function(a,b){return e.series[b].alpha}).attr("stroke-opacity",function(a,b){return e.series[b].sliceStrokeAlpha}).attr("stroke-width",function(a,b){return e.series[b].sliceStrokeThickness}),k=j.selectAll("rect").data(function(a,b){return a}).enter().append("rect").on("click",function(a){e.sliceClick&&e.sliceClick(a.data)}).on("mousemove",function(a,b){i=e.series[a.serieIndex],d3.select(this).attr("fill-opacity",i.sliceHoverAlpha),e.showTooltip(e.getContent(a,i,e.tooltip.format))}).on("mouseout",function(a,b){i=e.series[a.serieIndex],d3.select(this).attr("fill-opacity",i.alpha),e.hideTooltip()}),k.attr("x",function(a){return g.xScale(a.data[l])}).attr("y",e.plot.height).attr("width",g.xScale.bandwidth()).attr("height",0),b(!0),e.update=function(a){e.data=a,g.updateAxis(),e.updateLegend(),e.data.sort(function(a,b){return b.total-a.total}),i=null,h=f.keys(e.serieNames)(e.data),h.forEach(function(a){a.forEach(function(b){b.serieIndex=a.index})}),j.data(h).exit().remove(),k.data(function(a){return a}).exit().remove(),k.attr("x",function(a){return g.xScale(a.data[l])}).attr("y",e.plot.height).attr("width",g.xScale.bandwidth()).attr("height",0),b(!0)}}function d(){m=d3.scaleBand().domain(e.serieNames).range([0,g.xScale.bandwidth()]).round(!0).padding(.1),n=m.bandwidth(),j=p.selectAll(".eve-column-serie").data(e.data).enter().append("g").attr("class","eve-column-serie").attr("transform",function(a){return"translate("+g.xScale(a[e.xField])+")"}),k=j.selectAll("rect").data(function(a){return e.serieNames.map(function(b){return{name:b,data:a}})}).enter().append("rect").attr("fill",function(a,b){return i=e.series[b],i.colorField&&""!==i.colorField?a.data[i.colorField]:i.color}).attr("stroke",function(a,b){return i=e.series[b],i.colorField&&""!==i.colorField?a.data[i.colorField]:i.sliceStrokeColor}).attr("fill-opacity",function(a,b){return e.series[b].alpha}).attr("stroke-opacity",function(a,b){return e.series[b].sliceStrokeAlpha}).attr("stroke-width",function(a,b){return e.series[b].sliceStrokeThickness}).attr("width",n).attr("height",0).attr("x",function(a){return m(a.name)}).attr("y",g.yScale(0)).on("click",function(a){e.sliceClick&&e.sliceClick(a.data)}).on("mousemove",function(a,b){i=e.series[b],d3.select(this).attr("fill-opacity",i.sliceHoverAlpha),e.showTooltip(e.getContent(a,i,e.tooltip.format))}).on("mouseout",function(a,b){i=e.series[b],d3.select(this).attr("fill-opacity",i.alpha),e.hideTooltip()}),b(),e.update=function(a){e.data=a,g.updateAxis(),e.updateLegend(),m=d3.scaleBand().domain(e.serieNames).range([0,g.xScale.bandwidth()]).round(!0).padding(.1),n=m.bandwidth(),j.data(e.data).exit().remove(),k.data(function(a){return e.serieNames.map(function(b){return{name:b,data:a}})}).exit().remove(),b()}}var e=eve.base.init(a),f=d3.stack(),g=eve.base.createAxis(e),h=null,i=null,j=null,k=null,l=e.xField,m=null,n=0,o=0,p=e.svg.append("g").attr("transform","translate("+e.plot.left+","+e.plot.top+")");return e.yAxis.stacked?c():d(),e.toCanvas=function(){var a=document.getElementById(e.container);return new Promise(function(b){html2canvas(a).then(function(a){b(a)})})},e.toImage=function(){var a=document.getElementById(e.container);return new Promise(function(b){html2canvas(a).then(function(a){b(a.toDataURL("image/png"))})})},e}a.columnChart=function(a){return a.type="xy",new b(a)}}(eve),function(a){function b(b){function c(){m.data(o(d.data)).transition(d.animation.duration).ease(d.animation.easing.toEasing()).delay(function(a,b){return b*d.animation.delay}).attrTween("d",function(a){var b=d3.interpolate(this._current,a);return this._current=b(0),function(a){return l(b(a))}})}var d=eve.base.init(b),e=d.series[0],f=(d.xField,d.plot.width-d.plot.left-d.plot.right),g=d.plot.height-d.plot.bottom-d.plot.top,h=(d.width-d.plot.left-d.plot.right)/2,i=g/2,j=Math.min(f,g)/2,k=j/2,l=d3.arc().outerRadius(j).innerRadius(k),m=null,n=a.clone(d.data),o=d3.pie().sort(null).value(function(a){return""!==e.yField?+a[e.yField]:""!==e.sizeField?+a[e.sizeField]:+a[e.valueField]});d.data.sort(function(a,b){return a[d.xField]<b[d.xField]?-1:a[d.xField]>b[d.xField]?1:0}),d.data.forEach(function(b,c){b._sliceColor=c>a.colors.length?a.randColor():a.colors[c],n[c]._sliceColor=c>a.colors.length?a.randColor():a.colors[c],""!==e.colorField&&(b._sliceColor=b[e.colorField],n[c]._sliceColor=b[e.colorField]);for(var d in b)d===e.yField?n[c][d]=0:d===e.sizeField?n[c][d]=0:d===e.valueField&&(n[c][d]=0)});var p=d.svg.append("g").attr("transform","translate("+h+","+i+")");return m=p.selectAll("path").data(o(n)).enter().append("path").attr("d",l).attr("fill-opacity",function(a){return""!==e.alphaField?+a.data[e.alphaField]:e.alpha}).attr("fill",function(a){return a.data._sliceColor}).attr("stroke",""===e.sliceStrokeColor?"#ffffff":e.sliceStrokeColor).attr("stroke-opacity",e.sliceStrokeAlpha).attr("stroke-width",e.sliceStrokeThickness).on("click",function(a){d.sliceClick&&d.sliceClick(a.data)}).on("mousemove",function(a){d3.select(this).attr("fill-opacity",e.sliceHoverAlpha),d.showTooltip(d.getContent(a,e,d.tooltip.format))}).on("mouseout",function(a){d3.select(this).attr("fill-opacity",e.alpha),d.hideTooltip()}).each(function(a){this._current=a}),c(),d.update=function(a){d.data=a,d.data.sort(function(a,b){return a[d.xField]<b[d.xField]?-1:a[d.xField]>b[d.xField]?1:0}),d.updateLegend(),c()},d.toCanvas=function(){var a=document.getElementById(d.container);return new Promise(function(b){html2canvas(a).then(function(a){b(a)})})},d.toImage=function(){var a=document.getElementById(d.container);return new Promise(function(b){html2canvas(a).then(function(a){b(a.toDataURL("image/png"))})})},d}a.donutChart=function(a){return a.type="sliced",new b(a)}}(eve),function(b){function c(c){function d(){q=e(f.data),p.data(f.data).transition(f.animation.duration).ease(f.animation.easing.toEasing()).delay(function(a,b){return b*f.animation.delay}).attr("d",function(a,b){return r(q[b])})}function e(b){function c(f,i,j,k){k>=b.length||(v=b[k][h],a=v*n/o,pw=i-f,nw=Math.sqrt((m*pw*pw-4*a)/m),nl=(pw-nw)/2+f,nr=i-(pw-nw)/2,nh=m*(pw-nw)/2+j,e=[[nr,nh]],e.push([i,j]),e.push([f,j]),e.push([nl,nh]),e.push([nr,nh]),g.neckHeight>0&&k===b.length-1&&(e.push([nr,nh+g.neckHeight]),e.push([nl,nh+g.neckHeight]),e.push([nl,nh])),d.push(e),c(nl,nr,nh,k+1))}var d=[],e=[];return c(0,k,0,0),d}var f=eve.base.init(c),g=f.series[0],h=(f.xField,g.valueField||g.yField||g.sizeField),i=b.clone(f.data),j=f.height-f.plot.top-f.plot.bottom-g.neckHeight,k=f.width-f.plot.left-f.plot.right,l=.1,m=2*j/(k-l*k),n=(k+l*k)*j/2,o=d3.sum(f.data,function(a){return a[h]}),p=null,q=null,r=d3.line().x(function(a){return a[0]}).y(function(a){return a[1]});f.data.sort(function(a,b){return a[f.xField]<b[f.xField]?-1:a[f.xField]>b[f.xField]?1:0}),f.data.forEach(function(a,c){a._sliceColor=c>b.colors.length?b.randColor():b.colors[c],i[c]._sliceColor=c>b.colors.length?b.randColor():b.colors[c],""!==g.colorField&&(a._sliceColor=a[g.colorField],i[c]._sliceColor=a[g.colorField]);for(var d in a)d===h&&(i[c][d]=0)}),q=e(i);var s=f.svg.append("g").attr("transform","translate("+f.plot.left+","+f.plot.top+")");return p=s.selectAll("path.eve-funnel-slice").data(i).enter().insert("path").attr("class",function(a,b){return"eve-funnel-slice eve-funnel-slice-"+b}).attr("d",function(a,b){return r(q[b])}).attr("fill-opacity",function(a){return""!==g.alphaField?+a[g.alphaField]:g.alpha}).attr("fill",function(a){return a._sliceColor}).attr("stroke",""===g.sliceStrokeColor?"#ffffff":g.sliceStrokeColor).attr("stroke-opacity",g.sliceStrokeAlpha).attr("stroke-width",g.sliceStrokeThickness).on("click",function(a){f.sliceClick&&f.sliceClick(a)}).on("mousemove",function(a){d3.select(this).attr("fill-opacity",g.sliceHoverAlpha),f.showTooltip(f.getContent(a,g,f.tooltip.format))}).on("mouseout",function(a){d3.select(this).attr("fill-opacity",g.alpha),f.hideTooltip()}),d(),f.update=function(a){f.data=a,f.data.sort(function(a,b){return a[f.xField]<b[f.xField]?-1:a[f.xField]>b[f.xField]?1:0}),f.updateLegend(),o=d3.sum(f.data,function(a){return a[h]}),d()},f.toCanvas=function(){var a=document.getElementById(f.container);return new Promise(function(b){html2canvas(a).then(function(a){b(a)})})},f.toImage=function(){var a=document.getElementById(f.container);return new Promise(function(b){html2canvas(a).then(function(a){b(a.toDataURL("image/png"))})})},f}b.funnelChart=function(a){return a.type="sliced",new c(a)}}(eve),function(a){function b(b){function c(){o=Math.abs(g.yScale(0)-g.yScale(f.domains.y[0])),p=d3.line().x(function(a){return"string"===f.xFieldDataType?g.xScale(a[f.xField])+g.xScale.bandwidth()/2:g.xScale(a[f.xField])}).y(function(a){return g.yScale(a[f.serieNames[a._serieIndex]])}),j.selectAll("path").transition(f.animation.duration).ease(f.animation.easing.toEasing()).delay(function(a,b){return b*f.animation.delay}).attr("d",p),f.series.forEach(function(a,b){r.selectAll(".eve-line-bullet-"+b).transition(f.animation.duration).ease(f.animation.easing.toEasing()).delay(function(a,b){return b*f.animation.delay}).attr("transform",function(a){return d(a,!1)})})}function d(a,b){var c=0,d=0,e=f.series[a._serieIndex];return c="string"===f.xFieldDataType?g.xScale(a[f.xField])+g.xScale.bandwidth()/2:g.xScale(a[f.xField]),d=b?f.plot.height:g.yScale(a[f.serieNames[a._serieIndex]]),e.bullet.indexOf("image:")>-1&&(c-=e.bulletSize/2,d-=e.bulletSize/2),"translate("+c+","+d+")"}function e(){f.data.sort(function(a,b){return a[f.xField]<b[f.xField]?-1:a[f.xField]>b[f.xField]?1:0}),i=[],f.serieNames.forEach(function(b,c){var d=[];f.data.forEach(function(e,f){for(var g in e)e._serieIndex=c,
g===b&&d.push(a.clone(e))}),d.index=c,d.name=b,i.push(d)}),o=Math.abs(g.yScale(0)-g.yScale(f.domains.y[0])),h=null}b.yAxis?b.yAxis.stacked=!1:b.yAxis={stacked:!1};var f=eve.base.init(b),g=eve.base.createAxis(f),h=null,i=null,j=null,k=null,l=f.xField,m="",n="",o=0,p=null,q=null,r=f.svg.append("g").attr("transform","translate("+f.plot.left+","+f.plot.top+")");return q=d3.symbol().type(function(a){return"none"===f.series[a._serieIndex].bullet?d3.symbolCircle:f.series[a._serieIndex].bullet.toSymbol()}).size(function(a){return Math.pow(f.series[a._serieIndex].bulletSize,2)}),p=d3.line().x(function(a){return"string"===f.xFieldDataType?g.xScale(a[f.xField])+g.xScale.bandwidth()/2:g.xScale(a[f.xField])}).y(function(a){return f.plot.height}),e(),j=r.selectAll(".eve-line-serie").data(i).enter().append("g").attr("class","eve-line-serie"),k=j.append("path").attr("d",p).attr("fill","none").attr("stroke",function(a,b){return h=f.series[a.index],h.colorField&&""!==h.colorField?a.data[h.colorField]:h.sliceStrokeColor}).attr("stroke-opacity",1).style("stroke-dasharray",function(a,b){return h=f.series[a.index],"dotted"===h.drawingStyle?"2, 2":"dashed"===h.drawingStyle?"5, 2":"0"}).attr("stroke-width",function(a,b){return f.series[a.index].sliceStrokeThickness<1?1:f.series[a.index].sliceStrokeThickness}),f.series.forEach(function(a,b){a.bullet.indexOf("image:")===-1?r.selectAll(".eve-line-bullet-"+b).data(i[b]).enter().append("path").attr("class","eve-line-bullets eve-line-bullet-"+b).attr("d",q).attr("fill-opacity",a.showBullets?a.bulletAlpha:0).attr("stroke-opacity",a.bulletStrokeAlpha).attr("stroke-width",a.bulletStrokeSize).attr("fill",function(b,c){return a.colorField&&""!==a.colorField?b.data[a.colorField]:a.bulletColor&&""!==a.bulletColor?b.data[a.bulletColor]:a.color}).attr("transform",function(a){return d(a,!0)}).on("click",function(a){f.sliceClick&&f.sliceClick(a.data)}).on("mousemove",function(b,c){d3.select(this).attr("fill-opacity",a.sliceHoverAlpha),f.showTooltip(f.getContent(b,a,f.tooltip.format))}).on("mouseout",function(b,c){d3.select(this).attr("fill-opacity",a.alpha),f.hideTooltip()}):r.selectAll(".eve-line-bullet-"+b).data(i[b]).enter().append("svg:image").attr("class","eve-line-bullets eve-line-bullet-"+b).attr("xlink:href",a.bullet.replace("image:","")).attr("width",a.bulletSize).attr("height",a.bulletSize).attr("transform",function(a){return d(a,!0)}).on("mousemove",function(b,c){m=""===a.title?a.yField:a.title,n=f.tooltip.format.replaceAll("{x}",b[l]).replaceAll("{y}",b[a.yField]).replaceAll("{group}",m),f.showTooltip(n)}).on("mouseout",function(a,b){f.hideTooltip()})}),c(!0),f.update=function(a){f.data=a,e(),g.updateAxis(),f.updateLegend(),j.data(i).exit().remove(),k.data(i).exit().remove(),f.series.forEach(function(a,b){r.selectAll(".eve-line-bullet-"+b).data(i[b]).exit().remove()}),c(!1)},f.toCanvas=function(){var a=document.getElementById(f.container);return new Promise(function(b){html2canvas(a).then(function(a){b(a)})})},f.toImage=function(){var a=document.getElementById(f.container);return new Promise(function(b){html2canvas(a).then(function(a){b(a.toDataURL("image/png"))})})},f}a.lineChart=function(a){return a.type="xy",new b(a)}}(eve),function(a){function b(b){function c(){m.data(o(d.data)).transition(d.animation.duration).ease(d.animation.easing.toEasing()).delay(function(a,b){return b*d.animation.delay}).attrTween("d",function(a){var b=d3.interpolate(this._current,a);return this._current=b(0),function(a){return l(b(a))}})}var d=eve.base.init(b),e=d.series[0],f=(d.xField,d.plot.width-d.plot.left-d.plot.right),g=d.plot.height-d.plot.top-d.plot.bottom,h=(d.width-d.plot.left-d.plot.right)/2,i=g/2,j=Math.min(f,g)/2,k=0,l=d3.arc().outerRadius(j).innerRadius(k),m=null,n=a.clone(d.data),o=d3.pie().sort(null).value(function(a){return""!==e.yField?+a[e.yField]:""!==e.sizeField?+a[e.sizeField]:+a[e.valueField]});d.data.sort(function(a,b){return a[d.xField]<b[d.xField]?-1:a[d.xField]>b[d.xField]?1:0}),d.data.forEach(function(b,c){b._sliceColor=c>a.colors.length?a.randColor():a.colors[c],n[c]._sliceColor=c>a.colors.length?a.randColor():a.colors[c],""!==e.colorField&&(b._sliceColor=b[e.colorField],n[c]._sliceColor=b[e.colorField]);for(var d in b)d===e.yField?n[c][d]=0:d===e.sizeField?n[c][d]=0:d===e.valueField&&(n[c][d]=0)});var p=d.svg.append("g").attr("transform","translate("+h+","+i+")");return m=p.selectAll("path").data(o(n)).enter().append("path").attr("d",l).attr("fill-opacity",function(a){return""!==e.alphaField?+a.data[e.alphaField]:e.alpha}).attr("fill",function(a){return a.data._sliceColor}).attr("stroke",""===e.sliceStrokeColor?"#ffffff":e.sliceStrokeColor).attr("stroke-opacity",e.sliceStrokeAlpha).attr("stroke-width",e.sliceStrokeThickness).on("click",function(a){d.sliceClick&&d.sliceClick(a.data)}).on("mousemove",function(a){d3.select(this).attr("fill-opacity",e.sliceHoverAlpha),d.showTooltip(d.getContent(a,e,d.tooltip.format))}).on("mouseout",function(a){d3.select(this).attr("fill-opacity",e.alpha),d.hideTooltip()}).each(function(a){this._current=a}),c(),d.update=function(a){d.data=a,d.data.sort(function(a,b){return a[d.xField]<b[d.xField]?-1:a[d.xField]>b[d.xField]?1:0}),d.updateLegend(),c()},d.toCanvas=function(){var a=document.getElementById(d.container);return new Promise(function(b){html2canvas(a).then(function(a){b(a)})})},d.toImage=function(){var a=document.getElementById(d.container);return new Promise(function(b){html2canvas(a).then(function(a){b(a.toDataURL("image/png"))})})},d}a.pieChart=function(a){return a.type="sliced",new b(a)}}(eve),function(b){function c(c){function d(){q=e(f.data),p.data(f.data).transition(f.animation.duration).ease(f.animation.easing.toEasing()).delay(function(a,b){return b*f.animation.delay}).attr("d",function(a,b){return r(q[b])})}function e(b){function c(f,g,i,j){j>=b.length||(v=b[j][h],a=v*n/o,pw=g-f,nw=Math.sqrt((m*pw*pw-4*a)/m),nl=(pw-nw)/2+f,nr=g-(pw-nw)/2,nh=m*(pw-nw)/2+i,e=[[nr,nh]],e.push([g,i]),e.push([f,i]),e.push([nl,nh]),e.push([nr,nh]),d.push(e),c(nl,nr,nh,j+1))}var d=[],e=[];return c(0,k,0,0),d}var f=eve.base.init(c),g=f.series[0],h=(f.xField,g.valueField||g.yField||g.sizeField),i=b.clone(f.data),j=f.height-f.plot.top-f.plot.bottom,k=f.width-f.plot.left-f.plot.right,l=.005,m=2*j/(k-l*k),n=(k+l*k)*j/2,o=d3.sum(f.data,function(a){return a[h]}),p=null,q=null,r=d3.line().x(function(a){return a[0]}).y(function(a){return a[1]});f.data.sort(function(a,b){return a[f.xField]<b[f.xField]?-1:a[f.xField]>b[f.xField]?1:0}),f.data.forEach(function(a,c){a._sliceColor=c>b.colors.length?b.randColor():b.colors[c],i[c]._sliceColor=c>b.colors.length?b.randColor():b.colors[c],""!==g.colorField&&(a._sliceColor=a[g.colorField],i[c]._sliceColor=a[g.colorField]);for(var d in a)d===h&&(i[c][d]=0)}),q=e(i);var s=f.svg.append("g").attr("transform","translate("+f.plot.left+","+f.plot.top+")");return p=s.selectAll("path.eve-pyramid-slice").data(i).enter().insert("path").attr("class",function(a,b){return"eve-pyramid-slice eve-pyramid-slice-"+b}).attr("d",function(a,b){return r(q[b])}).attr("fill-opacity",function(a){return""!==g.alphaField?+a[g.alphaField]:g.alpha}).attr("fill",function(a){return a._sliceColor}).attr("stroke",""===g.sliceStrokeColor?"#ffffff":g.sliceStrokeColor).attr("stroke-opacity",g.sliceStrokeAlpha).attr("transform","translate("+k+","+j+")rotate(180)").attr("stroke-width",g.sliceStrokeThickness).on("click",function(a){f.sliceClick&&f.sliceClick(a)}).on("mousemove",function(a){d3.select(this).attr("fill-opacity",g.sliceHoverAlpha),f.showTooltip(f.getContent(a,g,f.tooltip.format))}).on("mouseout",function(a){d3.select(this).attr("fill-opacity",g.alpha),f.hideTooltip()}),d(),f.update=function(a){f.data=a,f.data.sort(function(a,b){return a[f.xField]<b[f.xField]?-1:a[f.xField]>b[f.xField]?1:0}),f.updateLegend(),o=d3.sum(f.data,function(a){return a[h]}),d()},f.toCanvas=function(){var a=document.getElementById(f.container);return new Promise(function(b){html2canvas(a).then(function(a){b(a)})})},f.toImage=function(){var a=document.getElementById(f.container);return new Promise(function(b){html2canvas(a).then(function(a){b(a.toDataURL("image/png"))})})},f}b.pyramidChart=function(a){return a.type="sliced",new c(a)}}(eve),function(a){function b(b){function c(){j=Math.abs(g.yScale(0)-g.yScale(f.domains.y[0])),f.series.forEach(function(a,b){l.selectAll(".eve-scatter-bullet-"+b).transition(f.animation.duration).ease(f.animation.easing.toEasing()).delay(function(a,b){return b*f.animation.delay}).attr("transform",function(a){return d(a,!1)})})}function d(a,b){var c=0,d=0,e=f.series[a._serieIndex];return c="string"===f.xFieldDataType?g.xScale(a[f.xField])+g.xScale.bandwidth()/2:g.xScale(a[f.xField]),d=b?f.plot.height:g.yScale(a[f.serieNames[a._serieIndex]]),e.bullet.indexOf("image:")>-1&&(c-=e.bulletSize/2,d-=e.bulletSize/2),"translate("+c+","+d+")"}function e(){f.data.sort(function(a,b){return a[f.xField]<b[f.xField]?-1:a[f.xField]>b[f.xField]?1:0}),i=[],f.serieNames.forEach(function(b,c){var d=[];f.data.forEach(function(e,f){for(var g in e)e._serieIndex=c,g===b&&d.push(a.clone(e))}),d.index=c,d.name=b,i.push(d)}),j=Math.abs(g.yScale(0)-g.yScale(f.domains.y[0])),h=null}b.yAxis?b.yAxis.stacked=!1:b.yAxis={stacked:!1};var f=eve.base.init(b),g=eve.base.createAxis(f),h=null,i=[],j=(f.xField,0),k=null,l=f.svg.append("g").attr("transform","translate("+f.plot.left+","+f.plot.top+")");return k=d3.symbol().type(function(a){return"none"===f.series[a._serieIndex].bullet?d3.symbolCircle:f.series[a._serieIndex].bullet.toSymbol()}).size(function(a){return Math.pow(f.series[a._serieIndex].bulletSize,2)}),e(),f.series.forEach(function(a,b){a.bullet.indexOf("image:")===-1?l.selectAll(".eve-scatter-bullet-"+b).data(i[b]).enter().append("path").attr("class","eve-scatter-bullets eve-scatter-bullet-"+b).attr("d",k).attr("fill-opacity",a.showBullets?a.bulletAlpha:0).attr("stroke-opacity",a.bulletStrokeAlpha).attr("stroke-width",a.bulletStrokeSize).attr("fill",function(b,c){return a.colorField&&""!==a.colorField?b.data[a.colorField]:a.bulletColor&&""!==a.bulletColor?b.data[a.bulletColor]:a.color}).attr("transform",function(a){return d(a,!0)}).on("click",function(a){f.sliceClick&&f.sliceClick(a.data)}).on("mousemove",function(b,c){d3.select(this).attr("fill-opacity",a.sliceHoverAlpha),f.showTooltip(f.getContent(b,a,f.tooltip.format))}).on("mouseout",function(b,c){d3.select(this).attr("fill-opacity",a.alpha),f.hideTooltip()}):l.selectAll(".eve-scatter-bullet-"+b).data(i[b]).enter().append("svg:image").attr("class","eve-scatter-bullets eve-scatter-bullet-"+b).attr("xlink:href",a.bullet.replace("image:","")).attr("width",a.bulletSize).attr("height",a.bulletSize).attr("transform",function(a){return d(a,!0)}).on("mousemove",function(b,c){f.showTooltip(f.getContent(b,a,f.tooltip.format))}).on("mouseout",function(a,b){f.hideTooltip()})}),c(),f.update=function(a){f.data=a,e(),g.updateAxis(),f.updateLegend(),f.series.forEach(function(a,b){l.selectAll(".eve-scatter-bullet-"+b).data(i[b]).exit().remove()}),c()},f.toCanvas=function(){var a=document.getElementById(f.container);return new Promise(function(b){html2canvas(a).then(function(a){b(a)})})},f.toImage=function(){var a=document.getElementById(f.container);return new Promise(function(b){html2canvas(a).then(function(a){b(a.toDataURL("image/png"))})})},f}a.scatterChart=function(a){return a.type="xy",new b(a)}}(eve),function(a){function b(a){function b(){r=Math.floor(o/(2*k.yAxis.labelFontSize)),t=q.ticks(r),s=k.data.map(function(a){return a[k.xField]}),v=k.domains.y[0],w=k.domains.y[1],u=k.serieNames.map(function(a,b){var c=k.data.map(function(c){var d=c[k.xField],e=k.series[b],f={};return f.name=a,f.index=b,f.serieType=e.type,f.xValue=d,e.yField&&(f.yValue=parseFloat(c[a])),f}),d={name:a,serieType:k.series[b].type,values:c,totalArea:d3.sum(c,function(a){return a.yValue})};return d})}function c(){l=k.series[0];for(var a=0;a<t.length;a++){x=o*((a+1)/t.length);var b=z.selectAll(".eve-radar-segment-line-"+a).data(s).enter().append("line").attr("class","eve-radar-segment-line-"+a).style("stroke",l.segmentLineColor).style("stroke-opacity",l.segmentLineAlpha/2).style("stroke-width",l.segmentLineThickness).attr("x1",d).attr("y1",e).attr("x2",f).attr("y2",g).attr("transform","translate("+(m/2-x)+", "+(n/2-x)+")");b.exit().remove()}}function d(a,b){return x*(1-Math.sin(b*p/s.length))}function e(a,b){return x*(1-Math.cos(b*p/s.length))}function f(a,b){return x*(1-Math.sin((b+1)*p/s.length))}function g(a,b){return x*(1-Math.cos((b+1)*p/s.length))}function h(){for(var a=0;a<t.length-1;a++){var b=o*((a+1)/t.length),c=z.selectAll(".eve-radar-segment-text-"+a).data([0]).enter().append("text").attr("class","eve-radar-segment-text-"+a).text(t[a]).style("fill",k.yAxis.labelFontColor).style("font-size",k.yAxis.labelFontSize).style("text-anchor","start").attr("x",b*(1-Math.sin(0))).attr("y",b*(1-Math.cos(0))).attr("transform","translate("+(m/2-b)+", "+(n/2-b)+")");c.exit().remove()}}function i(){l=k.series[0],y=z.selectAll(".eve-radar-axis").data(s).enter().append("g").attr("class","eve-radar-axis"),y.append("line").attr("x1",m/2).attr("y1",n/2).attr("x2",function(a,b){var c=m/2*(1-Math.sin(b*p/s.length)),d=o*(1-Math.sin(b*p/s.length)),e=m/2-o;return b>0&&(c=d+e),c}).attr("y2",function(a,b){var c=n/2*(1-Math.cos(b*p/s.length));return c}).style("stroke",l.segmentLineColor).style("stroke-opacity",l.segmentLineAlpha).style("stroke-width",l.segmentLineThickness),y.append("text").style("fill",k.xAxis.labelFontColor).style("font-size",k.xAxis.labelFontSize+"px").style("font-family",k.xAxis.labelFontFamily).style("font-style","bold"===k.xAxis.labelFontStyle?"normal":k.xAxis.labelFontStyle).style("font-weight","bold"===k.xAxis.labelFontStyle?"bold":"normal").attr("text-anchor",function(a,b){var c=m/2*(1-Math.sin(b*p/s.length));return 0===b?"middle":c>o?"start":"end"}).text(function(a){return a}).attr("x",function(a,b){var c=m/2*(1-Math.sin(b*p/s.length)),d=o*(1-Math.sin(b*p/s.length)),e=m/2-o,f=c;return b>0&&(f=d+e),c>o?f+=10:f-=10,f}).attr("y",function(a,b){var c=n/2*(1-Math.cos(b*p/s.length)),d=c;return c>o?d+=5:d-=5,d}),y.exit().remove()}function j(){u.sort(function(a,b){return b.totalArea-a.totalArea}),u.forEach(function(a,b){var c=[];z.selectAll(".eve-radar-nodes").data(a.values,function(a,b){var d=m/2*(1-a.yValue/w*Math.sin(b*p/s.length)),e=o*(1-a.yValue/w*Math.sin(b*p/s.length)),f=m/2-o,g=n/2*(1-a.yValue/w*Math.cos(b*p/s.length));b>0&&(d=e+f),c.push([d,g])}),c.push(c[0]),z.selectAll(".eve-radar-serie-"+b).data([c]).enter().append("path").attr("class","eve-radar-serie-"+b).style("stroke-width",k.series[b].lineThickness).style("stroke",k.series[b].color).style("fill",k.series[b].color).style("fill-opacity",k.series[b].alpha).attr("d",function(a,b){for(var c=[],d=0;d<a.length;d++)c.push([m/2,n/2]);return"M"+c.join("L")+"Z"}).transition(k.animation.duration).ease(k.animation.easing.toEasing()).delay(function(a,b){return b*k.animation.delay}).attr("d",function(a,b){for(var c=[],d=0;d<a.length;d++)c.push([a[d][0],a[d][1]]);return"M"+c.join("L")+"Z"}),z.selectAll(".eve-radar-bullets-"+b).data(a.values).enter().append("circle").attr("class","eve-radar-bullets-"+b).style("stroke-width",1).style("stroke",k.series[b].color).style("fill",k.series[b].color).style("fill-opacity",.9).attr("r",k.series[b].bulletSize).attr("transform","translate("+m/2+","+n/2+")").on("mousemove",function(a,c){d3.select(this).attr("fill-opacity",k.series[b].sliceHoverAlpha),k.showTooltip(k.getContent(a,k.series[b],k.tooltip.format))}).on("mouseout",function(a,c){d3.select(this).attr("fill-opacity",k.series[b].alpha),k.hideTooltip()}).transition(k.animation.duration).ease(k.animation.easing.toEasing()).delay(function(a,b){return b*k.animation.delay}).attr("transform",function(a,b){var c=m/2*(1-a.yValue/w*Math.sin(b*p/s.length)),d=o*(1-a.yValue/w*Math.sin(b*p/s.length)),e=m/2-o,f=n/2*(1-a.yValue/w*Math.cos(b*p/s.length));return b>0&&(c=d+e),"translate("+c+","+f+")"})})}a.yAxis?a.yAxis.stacked=!1:a.yAxis={stacked:!1};var k=eve.base.init(a),l=null,m=k.width-k.plot.left-k.plot.right,n=k.height-k.plot.top-k.plot.top-2*k.xAxis.labelFontSize,o=Math.min(m/2,n/2),p=2*Math.PI,q=d3.scaleLinear().domain(k.domains.y).range([0,o]),r=0,s=[],t=0,u=[],v=0,w=0,x=0,y=null;b();var z=k.svg.append("g").attr("width",m).attr("height",n).attr("transform","translate("+k.plot.left+","+(k.plot.top+k.xAxis.labelFontSize)+")");return c(),h(),i(),j(),k.update=function(a){k.data=a,k.updateXYDomain(),k.updateLegend(),b(),c(),h(),i(),u.sort(function(a,b){return b.totalArea-a.totalArea}),u.forEach(function(a,b){var c=[];z.selectAll(".eve-radar-nodes").data(a.values,function(a,b){var d=m/2*(1-a.yValue/w*Math.sin(b*p/s.length)),e=o*(1-a.yValue/w*Math.sin(b*p/s.length)),f=m/2-o,g=n/2*(1-a.yValue/w*Math.cos(b*p/s.length));b>0&&(d=e+f),c.push([d,g])}).exit().remove(),c.push(c[0]),z.selectAll(".eve-radar-serie-"+b).data([c]).exit().remove(),z.selectAll(".eve-radar-bullets-"+b).data(a.values).exit().remove(),z.selectAll(".eve-radar-serie-"+b).transition(k.animation.duration).ease(k.animation.easing.toEasing()).delay(function(a,b){return b*k.animation.delay}).attr("d",function(a,b){for(var c=[],d=0;d<a.length;d++)c.push([a[d][0],a[d][1]]);return"M"+c.join("L")+"Z"}),z.selectAll(".eve-radar-bullets-"+b).transition(k.animation.duration).ease(k.animation.easing.toEasing()).delay(function(a,b){return b*k.animation.delay}).attr("transform",function(a,b){var c=m/2*(1-a.yValue/w*Math.sin(b*p/s.length)),d=o*(1-a.yValue/w*Math.sin(b*p/s.length)),e=m/2-o,f=n/2*(1-a.yValue/w*Math.cos(b*p/s.length));return b>0&&(c=d+e),"translate("+c+","+f+")"})})},k.toCanvas=function(){var a=document.getElementById(k.container);return new Promise(function(b){html2canvas(a).then(function(a){b(a)})})},k.toImage=function(){var a=document.getElementById(k.container);return new Promise(function(b){html2canvas(a).then(function(a){b(a.toDataURL("image/png"))})})},k}a.radarChart=function(a){return a.type="xy",new b(a)}}(eve),function(a){function b(b){function c(){g=[],e.serieNames.forEach(function(b,c){var d=[];e.data.forEach(function(e,f){for(var g in e)e._serieIndex=c,g===b&&d.push(a.clone(e))}),d.index=c,d.name=b,g.push(d)}),n=null}function d(a){j=[],d3.keys(a).map(function(b){if(b!==i&&"_serieIndex"!==b&&"total"!==b){var c=a[b];c&&j.push({name:b,value:c})}}),j&&j.length>0&&j.sort(function(a,b){return a.value-b.value})}b.xAxis?b.xAxis.gridLineThickness||(b.xAxis.gridLineThickness=0):b.xAxis={gridLineThickness:0},b.yAxis?b.yAxis.stacked=!1:b.yAxis={stacked:!1};var e=eve.base.init(b),f=eve.base.createAxis(e),g=[],h=null,i=e.xField,j=null,k=0,l=0,m=0,n=null,o=-1,p=e.series[0].bulletSize<16?16:e.series[0].bulletSize,q=p/3,r=e.svg.append("g").attr("transform","translate("+e.plot.left+","+e.plot.top+")");h=d3.symbol().type(function(a){return"none"===e.series[a._serieIndex].bullet?d3.symbolCircle:e.series[a._serieIndex].bullet.toSymbol()}).size(function(a){return Math.pow(p,2)});var s=function(a,b){var c=0,d=0,g=e.series[a._serieIndex];return d="string"===e.xFieldDataType?f.yScale(a[e.xField])+f.yScale.bandwidth()/2:f.yScale(a[e.xField]),c=b?0:f.xScale(a[g.yField]),"translate("+c+","+d+")"},t=function(){e.series.forEach(function(a,b){e.data.forEach(function(a,c){d(a),k=f.yScale(a[i])+f.yScale.bandwidth()/2,r.selectAll(".eve-abacus-line-"+b+"-"+c).data(j).enter().append("line").attr("class","eve-abacus-lines eve-abacus-line-"+b+"-"+c).style("stroke",function(a,b){return l=a,m=j[b+1],o=-1,m?(o=parseFloat(l.value)<parseFloat(m.value)?e.getSerieIndexByName(m.name):e.getSerieIndexByName(l.name),o>-1?e.series[o].color:"none"):"none"}).style("stroke-width",q).attr("y1",k).attr("y2",k).attr("x1",function(a,b){return l=a,m=j[b+1],m?f.xScale(parseFloat(l.value))+p/2:0}).transition(e.animation.duration).ease(e.animation.easing.toEasing()).delay(function(a,b){return b*e.animation.delay}).attr("x2",function(a,b){return l=a,m=j[b+1],m?f.xScale(parseFloat(m.value))-p/2:0})}),r.selectAll(".eve-abacus-bullet-"+b).transition(e.animation.duration).ease(e.animation.easing.toEasing()).delay(function(a,b){return b*e.animation.delay}).attr("fill-opacity",function(b){return b[a.yField]?1:0}).attr("fill",function(b,c){if(a.bullet.indexOf("image:")===-1)return a.colorField&&""!==a.colorField?b.data[a.colorField]:a.bulletColor&&""!==a.bulletColor?b.data[a.bulletColor]:a.color}).attr("transform",function(a){return s(a,!1)})})};return c(),e.series.forEach(function(a,b){a.bullet.indexOf("image:")===-1?r.selectAll(".eve-abacus-bullet-"+b).data(g[b]).enter().append("path").attr("class","eve-abacus-bullets eve-abacus-bullet-"+b).attr("d",h).attr("stroke-opacity",a.bulletStrokeAlpha).attr("stroke-width",a.bulletStrokeSize).attr("fill-opacity",function(b){return b[a.yField]?1:0}).attr("fill",function(b,c){return a.colorField&&""!==a.colorField?b.data[a.colorField]:a.bulletColor&&""!==a.bulletColor?b.data[a.bulletColor]:a.color}).attr("transform",function(a){return s(a,!0)}).on("click",function(a){e.sliceClick&&e.sliceClick(a.data)}).on("mousemove",function(b,c){d3.select(this).attr("fill-opacity",a.sliceHoverAlpha),e.showTooltip(e.getContent(b,a,e.tooltip.format))}).on("mouseout",function(a,b){e.hideTooltip()}):r.selectAll(".eve-abacus-bullet-"+b).data(g[b]).enter().append("svg:image").attr("class","eve-abacus-bullets eve-abacus-bullet-"+b).attr("xlink:href",a.bullet.replace("image:","")).attr("fill-opacity",function(b){return b[a.yField]?1:0}).attr("width",a.bulletSize).attr("height",a.bulletSize).attr("transform",function(a){return s(a,!0)}).on("mousemove",function(b,c){e.showTooltip(e.getContent(b,a,e.tooltip.format))}).on("mouseout",function(a,b){e.hideTooltip()})}),t(),e.update=function(a){e.data=a,c(),f.updateAxis(),e.updateLegend(),e.series.forEach(function(a,b){r.selectAll(".eve-abacus-lines").remove(),r.selectAll(".eve-abacus-bullet-"+b).data(g[b]).exit().remove()}),t()},e.toCanvas=function(){var a=document.getElementById(e.container);return new Promise(function(b){html2canvas(a).then(function(a){b(a)})})},e.toImage=function(){var a=document.getElementById(e.container);return new Promise(function(b){html2canvas(a).then(function(a){b(a.toDataURL("image/png"))})})},e}a.abacus=function(a){return a.type="xy",a.reversedAxis=!0,new b(a)}}(eve),function(a){function b(b){function c(){h.data.forEach(function(a,b){i.rangeField.length>0&&(E=f(a),F.selectAll(".eve-bullet-range-"+b).transition(h.animation.duration).ease(h.animation.easing.toEasing()).delay(function(a,b){return b*h.animation.delay}).style("fill-opacity",function(a,b){return(b+1)/E.ranges.length}).attr("width",function(a){return a/E.max*q}).attr("transform",function(a,c){return p=0===c?0:E.ranges[c-1]/E.max*q,z=(n+l)*b,y=t+p,"translate("+y+","+z+")"}))}),F.selectAll(".eve-bullet-label").transition(h.animation.duration).ease(h.animation.easing.toEasing()).delay(function(a,b){return b*h.animation.delay}).text(function(a){return a[i.groupField]}).attr("transform",function(a,b){return z=(n+l)*b+n/2+this.getBBox().height/2,y=0,"translate("+y+","+z+")"}),F.selectAll(".eve-bullet-bar").transition(h.animation.duration).ease(h.animation.easing.toEasing()).delay(function(a,b){return b*h.animation.delay}).attr("height",o).attr("width",function(a){return E=f(a),E.measure/E.max*q}).attr("transform",function(a,b){return z=(n+l)*b+j/2,y=t,"translate("+y+","+z+")"}),F.selectAll(".eve-bullet-marker").transition(h.animation.duration).ease(h.animation.easing.toEasing()).delay(function(a,b){return b*h.animation.delay}).attr("height",n).attr("transform",function(a,b){return E=f(a),z=(n+l)*b,y=t+E.marker/E.max*q,"translate("+y+","+z+")"})}function d(){s=0,h.data.forEach(function(a){v=a[i.groupField],v&&v.toString().length>s&&(r=v,s=v.toString().length)}),u=F.append("text").style("font-size",h.xAxis.labelFontSize).style("color",h.xAxis.labelFontColor).style("font-family",h.xAxis.labelFontFamily+", Arial, Helvetica, Ubuntu").style("font-style","bold"==h.xAxis.labelFontStyle?"normal":h.xAxis.labelFontStyle).style("font-weight","bold"==h.xAxis.labelFontStyle?"bold":"normal").text(r),t=u.node().getBoundingClientRect().width+w,q=h.plot.width-t,n=m/h.data.length-l,o=n-j,u.remove()}function e(a){var b=[];return i.rangeField.forEach(function(c){null!==a[c]&&b.push(parseFloat(a[c]))}),0===b.length?[0]:b.sort(d3.descending)}function f(a){var b={ranges:[],marker:0,measure:0,max:0};return h.xAxis.locked?(x=[],h.data.forEach(function(a,b){x.push(d3.sum(e(a))),x.push(a[i.measureField]?+a[i.measureField]:0),x.push(a[i.markerField]?+a[i.markerField]:0)}),b.max=d3.max(x),b.ranges=e(a),b.marker=a[i.markerField]?+a[i.markerField]:0,b.measure=a[i.measureField]?+a[i.measureField]:0):(b.ranges=e(a),b.marker=a[i.markerField]?+a[i.markerField]:0,b.measure=a[i.measureField]?+a[i.measureField]:0,b.max=Math.max(d3.sum(b.ranges),b.marker,b.measure)),b}function g(a){return!(h.xAxis.locked&&a<h.data.length-1)&&(C=F.append("g").style("fill","none").style("shape-rendering","crispEdges").attr("transform","translate("+t+","+((n+l)*a+n)+")").attr("class","eve-x-axis").call(B),C.selectAll("path").style("stroke-opacity",h.xAxis.alpha).style("stroke-width",h.xAxis.thickness+"px").style("stroke",h.xAxis.color),C.selectAll("line").style("fill","none").style("stroke-width",h.xAxis.thickness+"px").style("shape-rendering","crispEdges").style("stroke-opacity",h.xAxis.alpha).style("stroke",h.xAxis.color),void C.selectAll("text").style("fill",h.xAxis.labelFontColor).style("font-size",h.xAxis.labelFontSize+"px").style("font-family",h.xAxis.labelFontFamily+", Arial, Helvetica, Ubuntu").style("font-style","bold"===h.xAxis.labelFontStyle?"normal":h.xAxis.labelFontStyle).style("font-weight","bold"===h.xAxis.labelFontStyle?"bold":"normal").style("text-anchor","middle").transition(h.animation.duration).ease(h.animation.easing.toEasing()).text(function(a){return D=this.getBoundingClientRect(),D.right>h.plot.width?"":a}))}b.legend?b.legend.enabled=!1:b.legend={enabled:!1};var h=eve.base.init(b),i=h.series[0],j=10,k=10,l=k+h.xAxis.labelFontSize,m=h.plot.height-h.plot.top-h.plot.bottom,n=m/h.data.length-l,o=n-j,p=0,q=0,r="",s=0,t=0,u=null,v="",w=10,x=[],y=0,z=0,A=null,B=null,C=null,D=null,E=null,F=h.svg.append("g").attr("transform","translate("+h.plot.left+","+h.plot.top+")");return d(),h.data.forEach(function(a,b){i.rangeField.length>0&&(E=f(a),A=d3.scaleLinear().domain([0,E.max]).range([0,q]),B=d3.axisBottom().scale(A).tickFormat(h.xAxis.labelFormat),F.selectAll(".eve-bullet-range-"+b).data(E.ranges).enter().append("rect").attr("class","eve-bullet-range-"+b).attr("height",n).style("fill",i.rangeColor).style("fill-opacity",0).attr("width",0).attr("transform",function(a,c){return z=(n+l)*b,y=0,"translate("+y+","+z+")"}),g(b))}),F.selectAll(".eve-bullet-label").data(h.data).enter().append("text").attr("class","eve-bullet-label").style("font-size",h.xAxis.labelFontSize).style("fill",h.xAxis.labelFontColor).style("font-family",h.xAxis.labelFontFamily+", Arial, Helvetica, Ubuntu").style("font-style","bold"==h.xAxis.labelFontStyle?"normal":h.xAxis.labelFontStyle).style("font-weight","bold"==h.xAxis.labelFontStyle?"bold":"normal").text(function(a){return a[i.groupField]}).attr("transform","translate(0,0)"),F.selectAll(".eve-bullet-bar").data(h.data).enter().append("rect").attr("class","eve-bullet-bar").style("fill",i.color?i.color:a.colors[0]).style("fill-opacity",i.alpha).attr("height",o).attr("width",0).attr("transform",function(a,b){return z=(n+l)*b+j/2,y=t,"translate("+y+","+z+")"}).on("click",function(a){h.onClick&&h.onClick(a)}).on("mousemove",function(a){d3.select(this).style("fill-opacity",i.sliceHoverAlpha),h.showTooltip(h.getContent(a,i,h.tooltip.format))}).on("mouseout",function(a){d3.select(this).style("fill-opacity",i.alpha),h.hideTooltip()}),F.selectAll(".eve-bullet-marker").data(h.data).enter().append("rect").attr("class","eve-bullet-marker").style("fill",i.markerColor).attr("width",i.markerWidth).attr("height",n).attr("transform",function(a,b){return z=(n+l)*b,y=t,"translate("+y+","+z+")"}).on("click",function(a){h.onClick&&h.onClick(a)}).on("mousemove",function(a){d3.select(this).style("fill-opacity",i.sliceHoverAlpha),h.showTooltip(h.getContent(a,i,h.tooltip.format))}).on("mouseout",function(a){d3.select(this).style("fill-opacity",i.alpha),h.hideTooltip()}),c(),h.update=function(a){h.data=a,d(),h.data.forEach(function(a,b){i.rangeField.length>0&&(E=f(a),F.selectAll(".eve-bullet-range-"+b).data(E.ranges).exit().remove())}),F.selectAll(".eve-bullet-label").data(h.data).exit().remove(),F.selectAll(".eve-bullet-bar").data(h.data).exit().remove(),F.selectAll(".eve-bullet-marker").data(h.data).exit().remove(),c()},h.toCanvas=function(){var a=document.getElementById(h.container);return new Promise(function(b){html2canvas(a).then(function(a){b(a)})})},h.toImage=function(){var a=document.getElementById(h.container);return new Promise(function(b){html2canvas(a).then(function(a){b(a.toDataURL("image/png"))})})},h}a.bullet=function(a){return a.type="sliced",new b(a)}}(eve),function(a){function b(b){function c(){k=[],l=a.getUniqueValues(i.data,j.sourceField),d3.keys(i.data[0]).map(function(a,b){a!==j.sourceField&&"total"!==a&&k.push("numeric"===j.dataType?+a:new Date(a))}),l.forEach(function(b,c){G[b]=c>=a.colors.length?a.randColor():a.colors[c]}),n=d3.min(k),o=d3.max(k),z=d3.max(l,function(a){return a.toString().length}),m=[],i.data.forEach(function(a){k.forEach(function(b){m.push(+a[b])}),r=d3.min(m),Q=d3.max(m)}),y.right=i.yAxis.labelFontSize/2*(z+1)+i.yAxis.labelFontSize+5,y.left=i.yAxis.labelFontSize/2*(i.formatNumber(Q,i.yAxis.numberFormat).toString().length+1)+i.yAxis.labelFontSize+5,x=i.plot.width-y.right-y.left,w=i.plot.height-y.bottom-y.top,t=d3.scaleLinear().domain([r,Q]).range([0,w]),u=d3.scaleLinear().domain([r,Q]).range([0,w]),s="numeric"===j.dataType?d3.scaleLinear():d3.scaleUtc(),s.domain([n,o]).range([0,x]).clamp(!0),H=f(),N=[],H.forEach(function(a){a.values.forEach(function(b){b.xValue===o&&N.push({source:a.name,value:b.yValue})})}),N.sort(function(a,b){return a.value-b.value}),O=[],N.forEach(function(a){O.push(a.source)}),A=d3.axisBottom().scale(s),B=d3.axisLeft().scale(u).ticks(Q),C=d3.axisRight().scale(t).ticks(Q)}function d(){D.selectAll("path").style("stroke-opacity",i.xAxis.alpha).style("stroke-width",i.xAxis.thickness+"px").style("stroke",i.xAxis.color),D.selectAll("line").style("fill","none").style("stroke-width",i.xAxis.thickness+"px").style("shape-rendering","crispEdges").style("stroke-opacity",i.xAxis.alpha).style("stroke",i.xAxis.color),D.selectAll("text").style("fill",i.xAxis.labelFontColor).style("font-size",i.xAxis.labelFontSize+"px").style("font-family",i.xAxis.labelFontFamily+", Arial, Helvetica, Ubuntu").style("font-style","bold"===i.xAxis.labelFontStyle?"normal":i.xAxis.labelFontStyle).style("font-weight","bold"===i.xAxis.labelFontStyle?"bold":"normal").style("text-anchor","middle").transition(i.animation.duration).ease(i.animation.easing.toEasing()).text(function(a){return a}),E.selectAll("path").style("stroke-opacity",i.yAxis.alpha).style("stroke-width",i.yAxis.thickness+"px").style("stroke",i.yAxis.color),E.selectAll("line").style("fill","none").style("stroke-width",i.yAxis.thickness+"px").style("shape-rendering","crispEdges").style("stroke-opacity",i.yAxis.alpha).style("stroke",i.yAxis.color),E.selectAll("text").style("fill",i.yAxis.labelFontColor).style("font-size",i.yAxis.labelFontSize+"px").style("font-family",i.yAxis.labelFontFamily+", Arial, Helvetica, Ubuntu").style("font-style","bold"===i.yAxis.labelFontStyle?"normal":i.yAxis.labelFontStyle).style("font-weight","bold"===i.yAxis.labelFontStyle?"bold":"normal").transition(i.animation.duration).ease(i.animation.easing.toEasing()).text(function(a){return a}),F.selectAll("path").style("stroke-opacity",i.yAxis.alpha).style("stroke-width",i.yAxis.thickness+"px").style("stroke",i.yAxis.color),F.selectAll("line").style("fill","none").style("stroke-width",i.yAxis.thickness+"px").style("shape-rendering","crispEdges").style("stroke-opacity",i.yAxis.alpha).style("stroke",i.yAxis.color),
F.selectAll("text").style("fill",function(a,b){return P=O[b],P?G[P]:"#fff"}).style("font-size",i.yAxis.labelFontSize+"px").style("font-family",i.yAxis.labelFontFamily+", Arial, Helvetica, Ubuntu").style("font-style","bold"===i.yAxis.labelFontStyle?"normal":i.yAxis.labelFontStyle).style("font-weight","bold"===i.yAxis.labelFontStyle?"bold":"normal").style("cursor","pointer").on("click",function(a,b){if(P=O[b],!P)return!1;var c=l.indexOf(P),d=N[c];d.clicked?d.clicked=!d.clicked:d.clicked=!0,d.clicked?(d3.selectAll(".eve-bump-serie").style("stroke-opacity",.1),d3.selectAll(".eve-bump-point").style("stroke-opacity",.1),d3.selectAll(".eve-bump-point").style("fill-opacity",.1),d3.selectAll(".eve-bump-label").style("fill-opacity",.1),d3.selectAll(".eve-bump-serieLabel").style("fill-opacity",.1),d3.selectAll(".eve-bump-serie-"+c).style("stroke-opacity",.9),d3.selectAll(".eve-bump-point-"+c).style("stroke-opacity",1),d3.selectAll(".eve-bump-point-"+c).style("fill-opacity",1),d3.selectAll(".eve-bump-label-"+c).style("fill-opacity",1),d3.selectAll(".eve-bump-serieLabel-"+c).style("fill-opacity",1)):(d3.selectAll(".eve-bump-serie").style("stroke-opacity",.9),d3.selectAll(".eve-bump-point").style("stroke-opacity",1),d3.selectAll(".eve-bump-point").style("fill-opacity",1),d3.selectAll(".eve-bump-label").style("fill-opacity",1),d3.selectAll(".eve-bump-serieLabel").style("fill-opacity",1))}).transition(i.animation.duration).ease(i.animation.easing.toEasing()).text(function(a,b){return P=O[b],P?P:""})}function e(){D=R.append("g").style("fill","none").style("shape-rendering","crispEdges").attr("transform","translate("+y.left+","+w+")").attr("class","eve-x-axis").call(A),E=R.append("g").style("fill","none").style("shape-rendering","crispEdges").attr("transform","translate("+y.left+")").attr("class","eve-y-axis").call(B),F=R.append("g").style("fill","none").style("shape-rendering","crispEdges").attr("transform","translate("+(x+y.left)+")").attr("class","eve-y-axis").call(C),d()}function f(){function a(a){var b=[];i.data.forEach(function(c){var d=c[j.sourceField];d===a&&b.push(c)});var c=[];return k.forEach(function(d){var e=l.indexOf(a),f=G[a],g="numeric"===j.dataType?+d:new Date(d),h=d3.max(b,function(a){return parseFloat(a[d.toString()])});h>0&&c.push({name:a,xValue:g,yValue:h,index:e,color:f})}),c}var b=l.map(function(b,c){var d={name:b,values:a(b),index:c,color:G[b]};return d});return b}function g(){I=d3.line().curve(d3.curveLinear).x(function(a){return s(a.xValue)+y.left}).y(function(a){return u(a.yValue)}),L.transition(i.animation.duration).ease(i.animation.easing.toEasing()).delay(function(a,b){return b*i.animation.delay}).attr("d",function(a){return I(a.values)}),M.transition(i.animation.duration).ease(i.animation.easing.toEasing()).delay(function(a,b){return b*i.animation.delay}).attr("transform",function(a){return p=s(a.xValue)+y.left,q=u(a.yValue),"translate("+p+","+q+")"})}function h(){I=d3.line().curve(d3.curveLinear).x(function(a){return s(a.xValue)+y.left}).y(function(a){return w}),J=d3.symbol().type(function(a){return"none"===j.bullet?d3.symbolCircle:j.bullet.toSymbol()}).size(function(a){return Math.pow(j.bulletSize,2)}),K=R.selectAll(".eve-bump-series").data(H).enter().append("g").attr("class","eve-bump-series"),L=K.append("path").attr("class",function(a,b){return"eve-bump-serie eve-bump-serie-"+b}).attr("d",function(a){return I(a.values)}).style("fill","none").style("stroke-opacity",1).style("stroke-width",j.bulletSize/2).style("stroke",function(a,b){return a.color}).on("click",function(a){a.clicked?a.clicked=!a.clicked:a.clicked=!0,a.clicked?(d3.selectAll(".eve-bump-serie").style("stroke-opacity",.1),d3.selectAll(".eve-bump-point").style("stroke-opacity",.1),d3.selectAll(".eve-bump-point").style("fill-opacity",.1),d3.selectAll(".eve-bump-label").style("fill-opacity",.1),d3.selectAll(".eve-bump-serieLabel").style("fill-opacity",.1),d3.selectAll(".eve-bump-serie-"+a.index).style("stroke-opacity",.9),d3.selectAll(".eve-bump-point-"+a.index).style("stroke-opacity",1),d3.selectAll(".eve-bump-point-"+a.index).style("fill-opacity",1),d3.selectAll(".eve-bump-label-"+a.index).style("fill-opacity",1),d3.selectAll(".eve-bump-serieLabel-"+a.index).style("fill-opacity",1)):(d3.selectAll(".eve-bump-serie").style("stroke-opacity",.9),d3.selectAll(".eve-bump-point").style("stroke-opacity",1),d3.selectAll(".eve-bump-point").style("fill-opacity",1),d3.selectAll(".eve-bump-label").style("fill-opacity",1),d3.selectAll(".eve-bump-serieLabel").style("fill-opacity",1))}),M=K.selectAll(".eve-bump-point").data(function(a){return a.values}).enter().append("path").attr("class",function(a,b){return"eve-bump-point eve-bump-point-"+a.index}).attr("d",function(a){return J(a)}).style("cursor","pointer").style("stroke-opacity",1).style("stroke",function(a,b){return a.color}).style("fill-opacity",1).style("fill",function(a,b){return a.color}).attr("transform",function(a){return p=s(a.xValue)+y.left,q=w,"translate("+p+","+q+")"}).on("click",function(a){a.clicked?a.clicked=!a.clicked:a.clicked=!0,a.clicked?(d3.selectAll(".eve-bump-serie").style("stroke-opacity",.1),d3.selectAll(".eve-bump-point").style("stroke-opacity",.1),d3.selectAll(".eve-bump-point").style("fill-opacity",.1),d3.selectAll(".eve-bump-label").style("fill-opacity",.1),d3.selectAll(".eve-bump-serieLabel").style("fill-opacity",.1),d3.selectAll(".eve-bump-serie-"+a.index).style("stroke-opacity",.9),d3.selectAll(".eve-bump-point-"+a.index).style("stroke-opacity",1),d3.selectAll(".eve-bump-point-"+a.index).style("fill-opacity",1),d3.selectAll(".eve-bump-label-"+a.index).style("fill-opacity",1),d3.selectAll(".eve-bump-serieLabel-"+a.index).style("fill-opacity",1)):(d3.selectAll(".eve-bump-serie").style("stroke-opacity",.9),d3.selectAll(".eve-bump-point").style("stroke-opacity",1),d3.selectAll(".eve-bump-point").style("fill-opacity",1),d3.selectAll(".eve-bump-label").style("fill-opacity",1),d3.selectAll(".eve-bump-serieLabel").style("fill-opacity",1))}).on("mousemove",function(a,b){i.showTooltip(i.getContent(a,j,i.tooltip.format))}).on("mouseout",function(a,b){i.hideTooltip()}),g()}b.legend?b.legend.enabled=!1:b.legend={enabled:!1},b.yAxis?b.yAxis.stacked=!1:b.yAxis={stacked:!1};var i=eve.base.init(b),j=i.series[0],k=[],l=[],m=[],n=0,o=0,p=0,q=0,r=0,s=null,t=null,u=null,v=10,w=0,x=0,y={left:5,top:5,right:5,bottom:2*i.xAxis.labelFontSize+v},z=0,A=null,B=null,C=null,D=null,E=null,F=null,G={},H=null,I=null,J=null,K=null,L=null,M=null,N=[],O=[],P=null,Q=0;c();var R=i.svg.append("g").attr("transform","translate("+i.plot.left+","+i.plot.top+")");return e(),h(),i.update=function(a){i.data=a,c(),D.style("fill","none").style("shape-rendering","crispEdges").transition(i.animation.duration).ease(i.animation.easing.toEasing()).call(A),E.style("fill","none").style("shape-rendering","crispEdges").transition(i.animation.duration).ease(i.animation.easing.toEasing()).call(B),F.style("fill","none").style("shape-rendering","crispEdges").transition(i.animation.duration).ease(i.animation.easing.toEasing()).call(C),d(),K.data(H).exit().remove(),L.data(H).exit().remove(),M.data(function(a){return a.values}).exit().remove(),g()},i.toCanvas=function(){var a=document.getElementById(i.container);return new Promise(function(b){html2canvas(a).then(function(a){b(a)})})},i.toImage=function(){var a=document.getElementById(i.container);return new Promise(function(b){html2canvas(a).then(function(a){b(a.toDataURL("image/png"))})})},i}a.bump=function(a){return new b(a)}}(eve),function(a){function b(b){function c(){j=[];for(var a=k.getFullYear();a<=l.getFullYear();a++)j.push(a);w=h.plot.width-t,v=(h.plot.height-u)/j.length,R=(w-p)/q-1,S=v/r-o,x=(w-p-R*q)/2,y=v-S*r-o,Q=(m+n)/h.legend.gradientColors.length,H=d3.nest().key(function(a){return J=new Date(a[i.dateField]),K=J.getFullYear(),L=J.getMonth(),M=J.getDate(),new Date(K,L,M,0,0,0)}).map(h.data),P=d3.scaleLinear().range(h.legend.gradientColors).domain([m,n])}function d(a){var b=new Date(a.getFullYear(),a.getMonth()+1,0),c=+A(a),d=+B(a),e=+A(b),f=+B(b),g=(d+1)*R+p,h=d*R+p,i=f*R+p,j=(f+1)*R+p,k=c*S+o,l=7*S+o,m=(e+1)*S+o;return"M"+g+","+k+"H"+h+"V"+l+"H"+i+"V"+m+"H"+j+"V5H"+g+"Z"}function e(){C.attr("transform",function(a,b){return x=(w-p-R*q)/2,y=b*v+o+h.xAxis.titleFontSize,"translate("+x+","+y+")"}),D.transition(h.animation.duration).ease(h.animation.easing.toEasing()).delay(function(a,b){return b*h.animation.delay}).text(function(a){return a}).attr("transform",function(a,b){return z=this.getBBox(),x=-1*z.height,y=S*(r/2),"translate("+x+","+y+")rotate(-90)"}),E.transition(h.animation.duration).ease(h.animation.easing.toEasing()).delay(function(a,b){return b*h.animation.delay}).attr("y",function(a,b){return b*S+S/2+this.getBBox().height/2+o/2}),F.transition(h.animation.duration).ease(h.animation.easing.toEasing()).delay(function(a,b){return b*h.animation.delay}).attr("x",function(a,b){return q*R/s*(b+1)-R*r/4+r}).attr("y",0),G.transition(h.animation.duration).ease(h.animation.easing.toEasing()).delay(function(a,b){return b*h.animation.delay}).attr("d",d)}function f(){C=h.svg.selectAll(".eve-calendarmap-g").data(j).enter().append("g").attr("class","eve-calendarmap-g").attr("transform",function(a,b){return y=b*v+o+h.xAxis.titleFontSize,"translate("+x+","+y+")"}),D=C.append("text").attr("class","eve-calendarmap-years").style("text-anchor","middle").style("fill",h.xAxis.labelFontColor).style("fill-opacity",1).style("font-size",h.xAxis.titleFontSize+"px").style("font-family",h.xAxis.titleFontFamily).style("font-style","bold"===h.xAxis.titleFontStyle?"normal":h.xAxis.titleFontStyle).style("font-weight","bold"===h.xAxis.titleFontStyle?"bold":"normal").text(function(a){return a}).attr("transform",function(a,b){return z=this.getBBox(),x=-1*z.height,"translate("+x+",0)rotate(-90)"}),O=C.selectAll(".eve-calendarmap-days").data(function(a){return d3.timeDays(new Date(a,0,1),new Date(a+1,0,1))}).enter().append("rect").attr("class","eve-calendarmap-days").style("fill","#ffffff").style("fill-opacity",1).style("stroke","#efefef").style("stroke-opacity",1).attr("width",R).attr("height",S).attr("x",function(a){return B(a)*R+p}).attr("y",function(a){return A(a)*S+o}),E=C.selectAll(".eve-calendarmap-daynames").data(a.daysMin).enter().append("text").attr("class","eve-calendarmap-daynames").style("fill",h.xAxis.labelFontColor).style("fill-opacity",1).style("font-size",h.xAxis.labelFontSize+"px").style("font-family",h.xAxis.labelFontFamily).style("font-style","bold"===h.xAxis.labelFontStyle?"normal":h.xAxis.labelFontStyle).style("font-weight","bold"===h.xAxis.labelFontStyle?"bold":"normal").text(function(a){return a}).attr("x",r/2*-1).attr("y",0),F=C.selectAll(".eve-calendarmap-monthnames").data(a.monthsMin).enter().append("text").attr("class","eve-calendarmap-monthnames").style("fill",h.xAxis.labelFontColor).style("fill-opacity",1).style("font-size",h.xAxis.labelFontSize+"px").style("font-family",h.xAxis.labelFontFamily).style("font-style","bold"===h.xAxis.labelFontStyle?"normal":h.xAxis.labelFontStyle).style("font-weight","bold"===h.xAxis.labelFontStyle?"bold":"normal").text(function(a){return a}).attr("x",function(a,b){return q*R/s*(b+1)-R*r/4+r}).attr("y",0),G=C.selectAll(".eve-calendarmap-month").data(function(a){return d3.timeMonths(new Date(a,0,1),new Date(a+1,0,1))}).enter().append("path").attr("class","eve-calendarmap-month").style("fill","none").style("fill-opacity",0).style("stroke","#d7d7d7").style("stroke-opacity",1).style("stroke-width",1).attr("d",d)}function g(){O.filter(function(a){return"$"+a.toString()in H}).attr("class","eve-calendarmap-days eve-calendarmap-data").on("mousemove",function(a){I=H["$"+a.toString()][0],d3.select(this).style("fill-opacity",i.sliceHoverAlpha),h.showTooltip(h.getContent(I,i,h.tooltip.format))}).on("mouseout",function(a){d3.select(this).style("fill-opacity",i.alpha),h.hideTooltip()}).style("fill-opacity",i.alpha).transition(h.animation.duration).ease(h.animation.easing.toEasing()).delay(function(a,b){return b*h.animation.delay}).style("fill",function(a){return I=H["$"+a.toString()][0],N=I[i.measureField]?+I[i.measureField]:0,P(N)})}var h=eve.base.init(b),i=h.series[0],j=[],k=d3.min(h.data,function(a){return new Date(a[i.dateField])}),l=d3.max(h.data,function(a){return new Date(a[i.dateField])}),m=d3.min(h.data,function(a){return+a[i.measureField]}),n=d3.max(h.data,function(a){return+a[i.measureField]}),o=5,p=h.xAxis.labelFontSize+h.xAxis.titleFontSize,q=53,r=7,s=12,t=h.plot.left+h.plot.right+h.margin.left+h.margin.right,u=h.plot.top+h.plot.bottom+h.margin.bottom+h.margin.top,v=0,w=0,x=0,y=0,z=null,A=d3.timeFormat("%w"),B=d3.timeFormat("%U"),C=null,D=null,E=null,F=null,G=null,H=null,I=null,J=null,K="",L="",M="",N=0,O=null,P=null,Q=0,R=0,S=0;return c(),f(),g(),e(),h.update=function(a){h.data=a,h.updateLegend(),c(),C.data(j).exit().remove(),D.data(j).exit().remove(),O.data(function(a){return d3.timeDays(new Date(a,0,1),new Date(a+1,0,1))}).exit().remove(),G.data(function(a){return d3.timeMonths(new Date(a,0,1),new Date(a+1,0,1))}).exit().remove(),O.style("fill","#ffffff"),g(),e()},h.toCanvas=function(){var a=document.getElementById(h.container);return new Promise(function(b){html2canvas(a).then(function(a){b(a)})})},h.toImage=function(){var a=document.getElementById(h.container);return new Promise(function(b){html2canvas(a).then(function(a){b(a.toDataURL("image/png"))})})},h}a.calendarmap=function(a){return a.type="standard",new b(a)}}(eve),function(a){function b(b){function c(a,b){var c=0,d=0,e=0,f=0,g=0;switch(n.data.forEach(function(d){if(d[o.sourceField]==a&&d[o.targetField]==b||d[o.sourceField]==b&&d[o.targetField]==a){var g=parseFloat(d[o.measureField]);isNaN(g)&&(g=0),c+=g,g>e&&(e=g),f++}}),d=e,n.data.forEach(function(c){if(c[o.sourceField]==a&&c[o.targetField]==b||c[o.sourceField]==b&&c[o.targetField]==a){var e=parseFloat(c[o.measureField]);isNaN(e)&&(e=0),e<d&&(d=e)}}),o.expression){case"avg":g=c/f;break;case"count":g=f;break;case"max":g=e;break;case"min":g=d;break;default:g=c}return isNaN(g)?0:g}function d(){t.forEach(function(a){var b=[];t.forEach(function(d){b.push(c(a,d))}),p.push(b)})}function e(a,b){var d=0;return b.forEach(function(b){var e=c(a,b.toString());isNaN(e)||(d+=e)}),isNaN(d)?0:d}function f(a){for(var b=0,c="",d=0;d<=n.data.length-1;d++){var e=n.data[d],f=e[o.sourceField];if(f==a){c=e[o.groupField];break}}return b=q.indexOf(c),b==-1?0:b}function g(){if(p=[],R=a.colors,r=a.getUniqueValues(n.data,o.sourceField),s=a.getUniqueValues(n.data,o.targetField),o.groupField&&(q=a.getUniqueValues(n.data,o.groupField)),r.sort(),s.sort(),t=r.concat(s),y=d3.max(t,function(a){return a.toString().length}),d(),t.forEach(function(a){v=e(a,t),v>u&&(u=v)}),o.groupField){if(q.length>R.length){x=q.length-R.length;for(var b=0;b<=x;b++)R.push(a.randColor())}}else if(t.length>R.length){x=t.length-R.length;for(var b=0;b<=x;b++)R.push(a.randColor())}p.forEach(function(a){z=d3.max(a),z>w&&(w=z)}),K=d3.chord().sortSubgroups(d3.descending).padAngle(.05),L=K(p),A=n.formatNumber(w,n.xAxis.numberFormat),A.length>y&&(y=A.length+1),B=n.yAxis.labelFormat?y*(n.yAxis.labelFontSize/2):n.xAxis.labelFormat?(A.length+1)*(n.xAxis.labelFontSize/2):P,C=n.plot.width-B,D=n.plot.height-B,E=Math.min(C,D)/2,F=E-B,G=F+Q,I=d3.scaleOrdinal().domain(d3.range(t.length)).range(R),H=d3.arc().innerRadius(F).outerRadius(0),J=d3.ribbon().radius(E)}function h(a,b){return o.groupField?(M=f(t[a.index]),I(M)):I(a.index)}function i(a,b){return o.groupField?(M=f(t[a.target.index]),I(M)):I(a.target.index)}function j(){return function(a,b){T.selectAll(".chord path").transition().style("fill-opacity",function(b,c){return a.target.index==b.target.index&&a.source.index==b.source.index?(toolTipContent=n.tooltip.format,M=f(t[b.source.index]),toolTipContent=toolTipContent.replaceAll("{source}",t[b.source.index]),toolTipContent=toolTipContent.replaceAll("{target}",t[a.target.index]),toolTipContent=toolTipContent.replaceAll("{measure}",n.formatNumber(a.source.value)),toolTipContent=toolTipContent.replaceAll("{group}",q[M]),n.showTooltip(toolTipContent),1):.1})}}function k(a){return function(b,c){T.selectAll(".chord path").filter(function(a){return a.source.index!=c&&a.target.index!=c}).transition().style("fill-opacity",a)}}function l(){H=d3.arc().innerRadius(F).outerRadius(G),J=d3.ribbon().radius(F),N.style("fill",h).style("stroke",h).transition(n.animation.duration).ease(n.animation.easing.toEasing()).delay(function(a,b){return b*n.animation.delay}).attr("d",H),O.style("fill",i).style("fill-opacity",1).transition(n.animation.duration).ease(n.animation.easing.toEasing()).delay(function(a,b){return b*n.animation.delay}).attr("d",J)}function m(){N=T.append("g").selectAll("path").data(function(a){return a.groups}).enter().append("path").style("fill",h).style("stroke",h).on("mouseover",k(.1)).on("mouseout",k(1)).attr("d",H),O=T.append("g").attr("class","chord").selectAll("path").data(function(a){return a}).enter().append("path").style("fill",i).style("fill-opacity",1).on("mouseover",j()).on("mouseout",function(a){n.hideTooltip(),T.selectAll(".chord path").transition().style("fill-opacity",1)}).attr("d",J)}b.legend?b.legend.enabled=!1:b.legend={enabled:!1};var n=eve.base.init(b),o=n.series[0],p=[],q=[],r=[],s=[],t=[],u=0,v=0,w=0,x=0,y=0,z=0,A="",B=0,C=0,D=0,E=0,F=0,G=0,H=null,I=null,J=null,K=null,L=null,M=0,N=null,O=null,P=15,Q=15,R=[];g();var S=n.svg.append("foreignObject").attr("width",n.plot.width).attr("height",n.plot.height).attr("x",0).attr("y",0).append("xhtml:div").append("svg").attr("width",n.plot.width).attr("height",n.plot.height),T=S.append("g").attr("transform","translate("+n.plot.width/2+","+n.plot.height/2+")").datum(K(p));return m(),l(),n.update=function(a){n.data=a,g(),T.attr("transform","translate("+n.plot.width/2+","+n.plot.height/2+")").datum(K(p)),N.remove(),O.remove(),m(),l()},n.toCanvas=function(){var a=document.getElementById(n.container);return new Promise(function(b){html2canvas(a).then(function(a){b(a)})})},n.toImage=function(){var a=document.getElementById(n.container);return new Promise(function(b){html2canvas(a).then(function(a){b(a.toDataURL("image/png"))})})},n}a.chord=function(a){return new b(a)}}(eve),function(a){function b(b){function c(){t=a.getUniqueValues(k.data,l.sourceField),Q=[],u=[],G=[],t.forEach(function(b,c){Q.push({source:b,color:c>=a.colors.length?a.randColor():a.colors[c]})}),d3.keys(k.data[0]).map(function(a,b){a!==l.sourceField&&"total"!==a&&u.push(a)}),z=d3.max(u,function(a){return a.toString().length}),y=d3.max(t,function(a){return a.toString().length}),v.left=5+(k.yAxis.labelFontSize/2*(y+1)+k.yAxis.labelFontSize),v.right=5+(k.yAxis.labelFontSize/2*(z+1)+k.yAxis.labelFontSize),v.bottom=5+k.xAxis.labelFontSize,w=k.plot.width-v.left-v.right,x=k.plot.height-v.top-v.top,u.forEach(function(a){C=d3.min(k.data,function(b){return+b[a]}),D=d3.max(k.data,function(b){return+b[a]}),A.push(parseFloat(C)),B.push(parseFloat(D))}),E=d3.min(A),F=d3.max(B),m=d3.scaleLinear().domain([E,F]).range([0,w]),n=d3.scaleBand().domain(t).range([x-v.bottom-v.top,0]).padding(.1),o=d(),p=d3.axisLeft().scale(n).tickSize(5),k.data.forEach(function(a){H=a[l.sourceField],I=t.indexOf(H),J=Q[I].color;for(var b in a)b!==l.sourceField&&(K=a[b]?+a[b]:0,K>0&&G.push({radius:M,color:J,cx:m(K),cy:n(H)+n.bandwidth()/2,measure:K,source:H,group:b}))})}function d(){var a=k.formatNumber(F,k.xAxis.numberFormat).toString().length,b=a+Math.ceil(a/3),c=k.xAxis.labelFontSize/2*(b+4)+k.xAxis.labelFontSize,d=Math.ceil(w/c);return d3.axisBottom().scale(m).tickSize(5).tickPadding(8).ticks(d)}function e(){s.selectAll(".domain").style("stroke","none").style("stroke-width","0px"),s.selectAll("line").style("stroke-opacity",1).style("stroke-width",1).style("stroke","#eeeeee"),q.selectAll("path").style("stroke-opacity",k.xAxis.alpha).style("stroke-width",k.xAxis.thickness+"px").style("stroke",k.xAxis.color),q.selectAll("line").style("fill","none").style("stroke-width",k.xAxis.thickness+"px").style("shape-rendering","crispEdges").style("stroke-opacity",k.xAxis.alpha).style("stroke",k.xAxis.color),q.selectAll("text").style("fill",k.xAxis.labelFontColor).style("font-size",k.xAxis.labelFontSize+"px").style("font-family",k.xAxis.labelFontFamily+", Arial, Helvetica, Ubuntu").style("font-style","bold"===k.xAxis.labelFontStyle?"normal":k.xAxis.labelFontStyle).style("font-weight","bold"===k.xAxis.labelFontStyle?"bold":"normal").style("text-anchor","middle").transition(k.animation.duration).ease(k.animation.easing.toEasing()).text(function(a){return a}),r.selectAll("path").style("stroke-opacity",k.yAxis.alpha).style("stroke-width",k.yAxis.thickness+"px").style("stroke",k.yAxis.color),r.selectAll("line").style("fill","none").style("stroke-width",k.yAxis.thickness+"px").style("shape-rendering","crispEdges").style("stroke-opacity",k.yAxis.alpha).style("stroke",k.yAxis.color),r.selectAll("text").style("fill",k.yAxis.labelFontColor).style("font-size",k.yAxis.labelFontSize+"px").style("font-family",k.yAxis.labelFontFamily+", Arial, Helvetica, Ubuntu").style("font-style","bold"===k.yAxis.labelFontStyle?"normal":k.yAxis.labelFontStyle).style("font-weight","bold"===k.yAxis.labelFontStyle?"bold":"normal").transition(k.animation.duration).ease(k.animation.easing.toEasing()).text(function(a){return a})}function f(){s=R.append("g").attr("class","eve-x-grid").attr("transform",function(){return"translate("+v.left+", "+(x-v.bottom-v.top)+")"}).call(d().tickSize(-w,0,0).tickFormat("")),q=R.append("g").style("fill","none").style("shape-rendering","crispEdges").attr("transform","translate("+v.left+","+(x-v.bottom-v.top)+")").attr("class","eve-x-axis").call(o),r=R.append("g").style("fill","none").style("shape-rendering","crispEdges").attr("transform","translate("+v.left+")").attr("class","eve-y-axis").call(p),e()}function g(){O=d3.forceSimulation(G).velocityDecay(.2).force("x",d3.forceX().strength(5e-4)).force("y",d3.forceY().strength(5e-4)).force("charge",d3.forceManyBody()).on("tick",h),O.nodes(G),P=R.selectAll("circle").data(G).enter().append("circle").attr("r",function(a){return a.radius}).style("fill",function(a){return a.color}).on("mousemove",function(a,b){k.showTooltip(k.getContent(a,l,k.tooltip.format))}).on("mouseout",function(a,b){k.hideTooltip()})}function h(){P.each(i(1*N)).each(j(.5)).style("fill",function(a){return a.color}).attr("cy",function(a){return a.y}).transition(k.animation.duration).ease(k.animation.easing.toEasing()).delay(function(a,b){return b*k.animation.delay}).attr("cx",function(a,b){return v.left+a.x})}function i(a){return function(b){b.y+=(b.cy-b.y)*a,b.x+=(b.cx-b.x)*a}}function j(a){var b=d3.quadtree().x(function(a){return a.x}).y(function(a){return a.y}).addAll(G);return function(c){var d=c.radius+M+L,e=c.x-d,f=c.x+d,g=c.y-d,h=c.y+d;b.visit(function(b,d,i,j,k){if(b.data&&b.data!==c){var l=c.x-b.data.x,m=c.y-b.data.y,n=Math.sqrt(l*l+m*m),o=c.radius+b.data.radius+(c.color!==b.data.color)*L;n<o&&(n=(n-o)/n*a,c.x-=l*=n,c.y-=m*=n,b.data.x+=l,b.data.y+=m)}return d>f||j<e||i>h||k<g})}}b.legend?b.legend.enabled=!1:b.legend={enabled:!1};var k=eve.base.init(b),l=k.series[0],m=null,n=null,o=null,p=null,q=null,r=null,s=null,t=[],u=[],v={left:0,top:5,bottom:5,right:0},w=0,x=0,y=0,z=0,A=[],B=[],C=0,D=0,E=0,F=0,G=null,H="",I=-1,J="",K=0,L=3,M=4,N=.8,O=null,P=null,Q=[];c();var R=k.svg.append("g").attr("transform","translate("+k.plot.left+","+k.plot.top+")");return f(),g(),k.update=function(a){k.data=a,c(),q.style("fill","none").style("shape-rendering","crispEdges").transition(k.animation.duration).ease(k.animation.easing.toEasing()).call(o),r.style("fill","none").style("shape-rendering","crispEdges").transition(k.animation.duration).ease(k.animation.easing.toEasing()).call(p),e(),O.stop(),O.nodes(G),P.data(G).exit().remove(),O.restart()},k.toCanvas=function(){var a=document.getElementById(k.container);return new Promise(function(b){html2canvas(a).then(function(a){b(a)})})},k.toImage=function(){var a=document.getElementById(k.container);return new Promise(function(b){html2canvas(a).then(function(a){b(a.toDataURL("image/png"))})})},k}a.circleClusters=function(a){return new b(a)}}(eve),function(a){function b(a){function b(){i=f.plot.width-f.plot.left-f.plot.right,j=f.plot.height-f.plot.top-f.plot.bottom,k=Math.min(i,j),l=d3.pack().padding(2).size([k-h,k-h]),m=d3.hierarchy(f.data).each(function(a){/^other[0-9]+$/.test(a.data[g.labelField])&&(a.data[g.labelField]=null)}).sum(function(a){return+a[g.sizeField]}).sort(function(a,b){return b.value-a.value}),t=d3.scaleLinear().range(f.legend.gradientColors).domain([-1,5]),n=m,p=l(m),p.each(function(a){a.depth>o&&(o=a.depth)})}function c(){r=v.selectAll("circle").data(m.descendants()).enter().append("circle").attr("class",function(a){return a.parent?a.children?"eve-cp-node":"eve-cp-node node--leaf":"eve-cp-node node--root"}).style("cursor","pointer").style("fill",function(a){return a.children?t(0===a.depth?o:a.depth):null}).on("click",function(a){n!==a&&(d(a.depth==o?a.parent:a),d3.event.stopPropagation()),f.sliceClick&&f.sliceClick(a.data)}).on("mousemove",function(a){f.showTooltip(f.getContent(a,g,f.tooltip.format))}).on("mouseout",function(a){f.hideTooltip()}),s=v.selectAll("circle"),e([m.x,m.y,2*m.r+h])}function d(a){n=a;d3.transition().duration(d3.event.altKey?7500:750).tween("zoom",function(a){var b=d3.interpolateZoom(q,[n.x,n.y,2*n.r+h]);return function(a){e(b(a))}})}function e(a){var b=k/a[2];q=a,s.attr("transform",function(c){return"translate("+(c.x-a[0])*b+","+(c.y-a[1])*b+")"}),r.transition(f.animation.duration).ease(f.animation.easing.toEasing()).delay(function(a,b){return b*f.animation.delay}).attr("r",function(a){return a.r*b})}var f=eve.base.init(a),g=f.series[0],h=(f.margin.left+f.margin.right+f.margin.bottom+f.margin.top)/4,i=f.plot.width-f.plot.left-f.plot.right,j=f.plot.height-f.plot.top-f.plot.bottom,k=Math.min(i,j),l=null,m=null,n=null,o=0,p=null,q=null,r=null,s=null,t=null;b();var u=f.svg.append("foreignObject").attr("width",i).attr("height",j).attr("x",0).attr("y",0).append("xhtml:div").append("svg").attr("width",i).attr("height",j),v=u.append("g").attr("transform","translate("+i/2+","+j/2+")");return c(),f.update=function(a){f.data=a,b(),f.updateTreeDomain(),f.updateLegend(),r.data(m.descendants()).exit().remove(),s=v.selectAll("circle"),e([m.x,m.y,2*m.r+h])},f.toCanvas=function(){var a=document.getElementById(f.container);return new Promise(function(b){html2canvas(a).then(function(a){b(a)})})},f.toImage=function(){var a=document.getElementById(f.container);return new Promise(function(b){html2canvas(a).then(function(a){b(a.toDataURL("image/png"))})})},f}a.circlePacking=function(a){return a.type="tree",new b(a)}}(eve),function(a){function b(a){function b(a){this.source=0,this.target=0,this.measure=0,this.value=0;for(var b in a)this.hasOwnProperty(b)&&(this[b]=a[b])}function c(a){this.count=0,this.totalMeasure=0;for(var b in a)this.hasOwnProperty(b)&&(this[b]=a[b])}function d(a,b,d){for(var e=new c,f=null,g=0;g<=d.length-1;g++)f=d[g],f.source==a&&f.target==b&&(e.count=e.count+1,e.totalMeasure=e.totalMeasure+f.measure);return e}function e(a,b,c){for(var d=-1,e=0;e<=c.length-1;e++){var f=c[e];f.source==a&&f.target==b&&(d=e)}return d}function f(){v.data.forEach(function(a){var b=a[w.sourceField],c=a[w.targetField],d={},e=w.groupField?a[w.groupField]:"";y.indexOf(b)===-1&&(d={name:b},w.groupField&&(d.group=e),y.push(b),B.push(d)),y.indexOf(c)==-1&&(d={name:c},w.groupField&&(d.group=e),y.push(c),B.push(d)),b&&b.length>z&&(z=b.length),c&&c.length>z&&(z=c.length)}),v.data.forEach(function(a){var c=a[w.sourceField],d=a[w.targetField],e=isNaN(+a[w.measureField])?0:a[w.measureField],f=y.indexOf(c),g=y.indexOf(d),h=new b({source:f,target:g,value:1,measure:e});x.push(h)}),x.forEach(function(a){var c=d(a.source,a.target,x),f=e(a.source,a.target,A);if(f==-1){var g=new b({source:a.source,target:a.target,value:c.count,measure:c.totalMeasure});A.push(g)}}),K.links=A,K.nodes=B}function g(){f(),K.nodes.forEach(function(a){a.name.length>=z&&(C=a.name,z=a.name.length)}),E=z*(v.yAxis.labelFontSize/2)+1,D.left=v.margin.left+E,D.top=v.margin.top+E,H=v.plot.width-v.plot.left-v.plot.right,I=v.plot.height-v.plot.top-v.plot.bottom,F=Math.min(H,I),k=d3.scaleBand().range([0,F-D.left]),l=d3.scaleLinear().domain([0,4]).clamp(!0),m=d3.scaleOrdinal(d3.schemeCategory10).domain(d3.range(10)),J=d3.scaleLinear().range(v.legend.gradientColors).domain(v.domains.y),n=[],o=K.nodes,p=o.length,G=F-E,o.forEach(function(a,b){a.index=b,a.count=0,n[b]=d3.range(p).map(function(a){return{x:a,y:b,z:0}})}),K.links.forEach(function(a){n[a.source][a.target].z+=a.value,n[a.target][a.source].z+=a.value,n[a.source][a.source].z+=a.value,n[a.target][a.target].z+=a.value,n[a.target][a.target].m+=a.measure,o[a.source].count+=a.value,o[a.target].count+=a.value}),q={name:d3.range(p).sort(function(a,b){return d3.ascending(o[a].name,o[b].name)}),count:d3.range(p).sort(function(a,b){return o[b].count-o[a].count}),group:d3.range(p).sort(function(a,b){return o[b].group-o[a].group})},"name"==w.orderMode?k.domain(q.name):"frequency"==w.orderMode?k.domain(q.count):"custom"==w.orderMode&&k.domain(q.group)}function h(){s=L.selectAll(".row").data(n).enter().append("g").attr("class","row").attr("transform",function(a,b){return"translate(0,"+k(b)+")"}).each(j),s.append("line").style("stroke","#fff").attr("x2",G),s.append("text").attr("x",-8).attr("y",k.bandwidth()/2).attr("dy",".32em").attr("text-anchor","end").style("fill",v.yAxis.labelFontColor).style("font-size",v.yAxis.labelFontSize+"px").style("font-family",v.yAxis.labelFontFamily).style("font-style","bold"===v.yAxis.labelFontStyle?"normal":v.yAxis.labelFontStyle).style("font-weight","bold"===v.yAxis.labelFontStyle?"bold":"normal").text(function(a,b){return o[b].name}),t=L.selectAll(".column").data(n).enter().append("g").attr("class","column").attr("transform",function(a,b){return"translate("+k(b)+")rotate(-90)"}),t.append("line").style("stroke","#fff").attr("x1",-G),t.append("text").attr("x",6).attr("y",k.bandwidth()/2).attr("dy",".32em").attr("text-anchor","start").style("fill",v.xAxis.labelFontColor).style("font-size",v.xAxis.labelFontSize+"px").style("font-family",v.xAxis.labelFontFamily).style("font-style","bold"===v.xAxis.labelFontStyle?"normal":v.xAxis.labelFontStyle).style("font-weight","bold"===v.xAxis.labelFontStyle?"bold":"normal").text(function(a,b){return o[b].name})}function i(a,b){var c={source:-1,target:-1,value:0,measure:0};return K.links.forEach(function(d){d.source==a&&d.target==b&&(c=d)}),c}function j(a){u=d3.select(this).selectAll(".cell").data(a.filter(function(a){return a.z})).enter().append("rect").attr("class","cell").attr("x",function(a){return k(a.x)}).attr("width",k.bandwidth()).attr("height",k.bandwidth()).on("mousemove",function(a,b){var c=a.y,d=a.x,e=i(c,d);v.showTooltip(v.getContent(e,w,v.tooltip.format))}).on("mouseout",function(a,b){v.hideTooltip()}).transition(v.animation.duration).ease(v.animation.easing.toEasing()).delay(function(a,b){return b*v.animation.delay}).style("fill",function(a){var b=a.y,c=a.x,d=i(b,c);return J(d.measure)})}var k,l,m,n,o,p,q,r,s,t,u,v=eve.base.init(a),w=v.series[0],x=[],y=[],z=0,A=[],B=[],C="",D={left:0,top:0,bottom:v.margin.bottom,right:v.margin.right},E=0,F=0,G=0,H=0,I=0,J=null,K={};g();var L=v.svg.append("g").attr("transform","translate("+(H/2-F/2+D.left/2)+","+D.top+")");return r=L.append("rect").attr("class","eve-cooc-back").style("fill","#eeeeee").style("fill-opacity",1).attr("width",F-D.left).attr("height",F-D.top),h(),v.update=function(a){v.data=a,v.updateXYDomain(),v.updateLegend(),g(),L.attr("transform","translate("+(H/2-F/2+D.left/2)+","+D.top+")"),r.attr("width",F-D.left).attr("height",F-D.top),s.remove(),t.remove(),h()},v.toCanvas=function(){var a=document.getElementById(v.container);return new Promise(function(b){html2canvas(a).then(function(a){b(a)})})},v.toImage=function(){var a=document.getElementById(v.container);return new Promise(function(b){html2canvas(a).then(function(a){b(a.toDataURL("image/png"));
})})},v}a.cooccurenceMatrix=function(a){return new b(a)}}(eve),function(a){function b(b){function c(){w=d3.hierarchy(l.data).each(function(a){/^other[0-9]+$/.test(a.data[m.labelField])&&(a.data[m.labelField]=null)}).sum(function(a){return+a[m.sizeField]}).sort(function(a,b){return b.value-a.value}),n=d3.max(w.descendants(),function(a){return a.data[m.labelField].toString().length}),o=m.labelFormat?l.xAxis.labelFontSize*n+1:10,o=l.xAxis.labelFontSize*n+1,p.left=l.margin.left+o,p.right=l.margin.right+o,p.top=l.margin.top,p.bottom=l.margin.bottom,q=l.plot.width-p.left-p.right,r=l.plot.height-p.top-p.bottom,s=Math.min(l.plot.width-o,l.plot.height-o)/2,t=l.data}function d(){x.attr("transform","translate("+p.left+","+p.top+")"),j(w)}function e(){x.attr("transform","translate("+(l.plot.width/2-s/2)+","+r/2+")"),i(w)}function f(a){return"M"+a.y+","+a.x+"C"+(a.parent.y+100)+","+a.x+" "+(a.parent.y+100)+","+a.parent.x+" "+a.parent.y+","+a.parent.x}function g(a){a.children?(a._children=a.children,a.children=null):(a.children=a._children,a._children=null),"linear"===m.direction?j(a):i(a)}function h(a,b){var c=(a-90)/180*Math.PI,d=b;return[d*Math.cos(c),d*Math.sin(c)]}function i(b){(u=d3.tree().size([s,s]))(w);var c=w.descendants(),d=c.slice(1);x.selectAll(".radialDendLink").remove(),x.selectAll(".radialDendNode").remove(),x.selectAll(".radialDendText").remove();var e=x.selectAll("path.radialDendLink").data(d,function(a){return a.id}),f=e.enter().append("g").attr("class","radialDendLink").insert("path").style("stroke",function(b){return a.colors[b.depth]}).style("stroke-width",function(a){var b=Math.round(Math.log(Math.abs(a.size)))/2;return b<1&&(b=1),k.lineMeasures?b:2}).style("stroke-opacity",.5).style("fill","none").style("fill-opacity",0);f.transition(l.animation.duration).ease(l.animation.easing.toEasing()).delay(function(a,b){return b*l.animation.delay}).attr("d",function(a){return"M"+h(a.x,a.y)+"C"+h(a.x,(a.y+a.parent.y)/2)+" "+h(a.parent.x,(a.y+a.parent.y)/2)+" "+h(a.parent.x,a.parent.y)});var i=x.selectAll("g.radialDendNode").data(c,function(a){return a.id||(a.id=++v)}).attr("fill","none"),j=i.enter().append("g").attr("class","radialDendNode").attr("transform",function(a){return"translate("+h(b.x,b.y)+")"}).on("click",g);j.append("circle").attr("r",function(a){try{var b=a.data.size;if(!b)if(b=0,a.children)for(var c=0;c<=a.children.length-1;c++)b+=a.children[c].data.size;else if(a._children)for(var c=0;c<=a._children.length-1;c++)b+=a._children[c].data.size;var d=Math.round(Math.log(Math.abs(b)))/2;return d<1&&(d=1),d}catch(a){return 5.5}}).style("stroke",function(b){return a.colors[b.depth]}).style("fill",function(b){return a.colors[b.depth]}).on("mousemove",function(a,b){l.showTooltip(l.getContent(a,m,l.tooltip.format))}).on("mouseout",function(a,b){l.hideTooltip()}),j.append("text").attr("x",function(a){return a.children||a._children?-10:10}).attr("dy",3).attr("class","radialDendText").attr("text-anchor",function(a){return a.children||a._children?"end":"start"}).text(function(a){return a.data.name}).style("fill",l.xAxis.labelFontColor).style("font-size",l.xAxis.labelFontSize+"px").style("font-family",l.xAxis.labelFontFamily).style("font-style","bold"===l.xAxis.labelFontStyle?"normal":l.xAxis.labelFontStyle).style("font-weight","bold"===l.xAxis.labelFontStyle?"bold":"normal").style("pointer-events","none").style("text-shadow","0 1px 0 #fff, 1px 0 0 #fff, 0 -1px 0 #fff, -1px 0 0 #fff").style("fill-opacity",1),j.transition(l.animation.duration).ease(l.animation.easing.toEasing()).delay(function(a,b){return b*l.animation.delay}).attr("transform",function(a){return"translate("+h(a.x,a.y)+")"}),c.forEach(function(a){a.x0=a.x,a.y0=a.y})}function j(b){(u=d3.tree().size([r,q]))(w);var c=w.descendants(),d=c.slice(1);x.selectAll(".dendLink").remove(),x.selectAll(".dendNode").remove(),x.selectAll(".dendText").remove();var e=x.selectAll("path.dendLink").data(d,function(a){return a.id}),h=e.enter().append("g").attr("class","dendLink").insert("path").style("stroke",function(b){return a.colors[b.depth]}).style("stroke-width",function(a){var b=Math.round(Math.log(Math.abs(a.size)))/2;return b<1&&(b=1),m.lineMeasures?b:2}).style("stroke-opacity",.5).style("fill","none").style("fill-opacity",0);h.transition(l.animation.duration).ease(l.animation.easing.toEasing()).delay(function(a,b){return b*l.animation.delay}).attr("d",f),h.exit().transition(l.animation.duration).ease(l.animation.easing.toEasing()).delay(function(a,b){return b*l.animation.delay}).attr("d",f).remove();var i=x.selectAll("g.dendNode").data(c,function(a){return a.id||(a.id=++v)}).attr("fill","none"),j=i.enter().append("g").attr("class","dendNode").attr("transform",function(a){return"translate("+a.y+","+a.x+")"}).on("click",g);j.append("circle").attr("r",0).style("stroke",function(b){return a.colors[b.depth]}).style("fill",function(b){return a.colors[b.depth]}).on("mousemove",function(a,b){l.showTooltip(l.getContent(a,m,l.tooltip.format))}).on("mouseout",function(a,b){l.hideTooltip()}),j.append("text").attr("x",function(a){return a.children||a._children?-10:10}).attr("dy",3).attr("class","dendText").attr("text-anchor",function(a){return a.children||a._children?"end":"start"}).text(function(a){return a.data.name}).style("fill",l.xAxis.labelFontColor).style("font-size",l.xAxis.labelFontSize+"px").style("font-family",l.xAxis.labelFontFamily).style("font-style","bold"===l.xAxis.labelFontStyle?"normal":l.xAxis.labelFontStyle).style("font-weight","bold"===l.xAxis.labelFontStyle?"bold":"normal").style("pointer-events","none").style("text-shadow","0 1px 0 #fff, 1px 0 0 #fff, 0 -1px 0 #fff, -1px 0 0 #fff").style("fill-opacity",0);var k=j.transition(l.animation.duration).ease(l.animation.easing.toEasing()).delay(function(a,b){return b*l.animation.delay}).attr("transform",function(a){return"translate("+a.y+","+a.x+")"});k.select("circle").style("stroke",function(b){return a.colors[b.depth]}).style("fill",function(b){return a.colors[b.depth]}).transition(l.animation.duration).ease(l.animation.easing.toEasing()).delay(function(a,b){return b*l.animation.delay}).attr("r",function(a){try{var b=a.data.size;if(!b)if(b=0,a.children)for(var c=0;c<=a.children.length-1;c++)b+=a.children[c].data.size;else if(a._children)for(var c=0;c<=a._children.length-1;c++)b+=a._children[c].data.size;var d=Math.round(Math.log(Math.abs(b)))/2;return d<1&&(d=1),d}catch(a){return 5.5}}),k.select("text").style("fill-opacity",1).transition(l.animation.duration).ease(l.animation.easing.toEasing()).delay(function(a,b){return b*l.animation.delay}).attr("x",function(a){return a.children||a._children?-10:10});var n=j.exit().transition(l.animation.duration).ease(l.animation.easing.toEasing()).delay(function(a,b){return b*l.animation.delay}).attr("transform",function(a){return"translate("+b.y+","+b.x+")"}).remove();n.select("circle").attr("r",0),n.select("text").style("fill-opacity",0).transition(l.animation.duration).ease(l.animation.easing.toEasing()).delay(function(a,b){return b*l.animation.delay}).attr("x",function(a){return 0})}b.legend?b.legend.enabled=!1:b.legend={enabled:!1};var k=this,l=eve.base.init(b),m=l.series[0],n=0,o=0,p={left:0,top:0,bottom:0,right:0},q=0,r=0,s=0,t=null,u=null,v=0,w=null;c();var x=l.svg.append("g");return"linear"===m.direction?d():e(),l.update=function(a){l.data=a,c(),"linear"===m.direction?d():e()},l.toCanvas=function(){var a=document.getElementById(l.container);return new Promise(function(b){html2canvas(a).then(function(a){b(a)})})},l.toImage=function(){var a=document.getElementById(l.container);return new Promise(function(b){html2canvas(a).then(function(a){b(a.toDataURL("image/png"))})})},l}a.dendrogram=function(a){return a.type="tree",new b(a)}}(eve),function(a){function b(b){function c(){u=s.plot.width-s.plot.left-s.plot.right,v=s.plot.height-s.plot.top-s.plot.bottom,x=Math.min(u,v)/2/4,w=d3.hierarchy(s.data),z=s.domains.y[0],A=s.domains.y[1],t.maxBulletSize||(t.maxBulletSize=Math.sqrt(u*v/s.data.length/Math.PI)-5),t.minBulletSize||(t.minBulletSize=t.maxBulletSize*z/A),C=d3.scalePow().exponent(.5).domain([z,A]).range([t.minBulletSize,t.maxBulletSize]),q=g(w),r=w.links()}function d(){p=d3.forceSimulation().force("link",d3.forceLink().id(function(a){return a.id})).force("charge",d3.forceManyBody()).force("center",d3.forceCenter(u/2,v/2)).velocityDecay(w.links().length>100?.9:.2).force("x",d3.forceX().strength(5e-4)).force("y",d3.forceY().strength(5e-4)).on("tick",h),e()}function e(){o=D.selectAll(".eve-force-tree-link").data(r,function(a){return a.target.id}),o.exit().remove();var a=o.enter().append("line").attr("class",function(a){return"eve-force-tree-link eve-force-tree-link-"+a.source.id}).style("stroke-width","1px").style("stroke","#cccccc");o=a.merge(o),n=D.selectAll(".eve-force-tree-node").data(q,function(a){return a.id}),n.exit().remove();var b=n.enter().append("g").attr("class",function(a){return"eve-force-tree-node eve-force-tree-node-"+a.id}).on("click",i).on("dblclick",j).call(d3.drag().on("start",k).on("drag",l).on("end",m));b.append("circle").attr("r",function(a){var b=0;return b=void 0===a.data[t.sizeField]?2*t.minBulletSize:C(a.data[t.sizeField]),a.cRadius=b,b}).style("fill",f).style("fill-opacity",.9).style("stroke",f).style("stroke-opacity",1).style("stroke-width","0px").on("mousemove",function(a,b){s.showTooltip(s.getContent(a,t,s.tooltip.format))}).on("mouseout",function(a,b){s.hideTooltip()}),t.labelFormat&&b.append("text").attr("class",function(a){return"eve-force-tree-text eve-force-tree-text-"+a.id}).attr("dy",3).attr("x",function(a){return a.children?-8:8}).style("text-anchor",function(a){return a.children?"end":"start"}).style("fill",t.labelFontColor).style("font-size",t.labelFontSize+"px").style("font-family",t.labelFontFamily).style("font-style","bold"===t.labelFontStyle?"normal":t.labelFontStyle).style("font-weight","bold"===t.labelFontStyle?"bold":"normal").text(function(a){return t.labelFormat.replaceAll("{source}",a.data[t.labelField]).replaceAll("{measure}",s.formatNumbers(a.data[t.sizeField],t.numberFormat))}),n=b.merge(n),p.nodes(q),p.force("link").links(r)}function f(b){return y=b.children?b.depth:b.depth+1,y>=a.colors.length?a.randColor():a.colors[y]}function g(a){function b(a){a.children&&a.children.forEach(b),a.id?++B:a.id=++B,c.push(a)}var c=[];return b(a),c}function h(){o.attr("x1",u/2).attr("y1",v/2).attr("x2",u/2).attr("y2",v/2).transition(s.animation.duration).ease(s.animation.easing.toEasing()).delay(function(a,b){return b*s.animation.delay}).attr("x1",function(a){return a.source.x}).attr("y1",function(a){return a.source.y}).attr("x2",function(a){return a.target.x}).attr("y2",function(a){return a.target.y}),n.attr("transform","translate("+u/2+","+v/2+")").transition(s.animation.duration).ease(s.animation.easing.toEasing()).delay(function(a,b){return b*s.animation.delay}).attr("transform",function(a){return"translate("+a.x+","+a.y+")"})}function i(a){if(!d3.event.defaultPrevented){var b=D.selectAll(".eve-force-tree-link-"+a.id),c=D.selectAll(".eve-force-tree-node-"+a.id),d=null;t.labelFormat&&(d=D.selectAll(".eve-force-tree-text-"+a.id)),a.selected=!a.selected,o.style("stroke-width","1px").style("stroke","#cccccc"),n.style("fill-opacity",.9).style("stroke-opacity",1),a.selected&&(n.style("fill-opacity",.2).style("stroke-opacity",.2),c.style("fill-opacity",.9).style("stroke-opacity",1),a.children&&a.children.length>0&&a.children.forEach(function(a){D.selectAll(".eve-force-tree-node-"+a.id).style("fill-opacity",.9).style("stroke-opacity",1),t.labelFormat&&D.selectAll(".eve-force-tree-text-"+a.id).style("fill-opacity",1)}),b.style("stroke","#0066cc").style("stroke-width","2px"),t.labelFormat&&d.style("fill-opacity",1))}}function j(a){a.children?(a._children=a.children,a.children=null,e(),p.restart()):(a.children=a._children,a._children=null,e(),p.restart())}function k(a){d3.event.active||p.alphaTarget(.3).restart(),a.fx=a.x,a.fy=a.y}function l(a){a.fx=d3.event.x,a.fy=d3.event.y}function m(a){a.fixed=!0,d3.select(this).classed("fixed",!0)}b.legend?b.legend.enabled=!1:b.legend={enabled:!1};var n,o,p,q,r,s=eve.base.init(b),t=s.series[0],u=0,v=0,w=null,x=0,y=0,z=0,A=0,B=0,C=null;c();var D=s.svg.append("g").attr("width",u).attr("height",v);return d(),s.update=function(a){s.data=a,c(),o.remove(),n.remove(),d()},s.toCanvas=function(){var a=document.getElementById(s.container);return new Promise(function(b){html2canvas(a).then(function(a){b(a)})})},s.toImage=function(){var a=document.getElementById(s.container);return new Promise(function(b){html2canvas(a).then(function(a){b(a.toDataURL("image/png"))})})},s}a.force=function(a){return a.type="tree",new b(a)}}(eve),function(a){function b(b){function c(){o=l.plot.width-l.plot.left-l.plot.right,p=l.plot.height-l.plot.top-l.plot.bottom,s=l.domains.y[0],t=l.domains.y[1],m.maxBulletSize||(m.maxBulletSize=Math.sqrt(o*p/l.data.length/Math.PI)-5),m.minBulletSize||(m.minBulletSize=m.maxBulletSize*s/t),u=d3.scalePow().exponent(.5).domain([s,t]).range([m.minBulletSize,m.maxBulletSize]),y=a.getUniqueValues(l.data,m.groupField),z=new Array(y.length),v=d3.scaleLinear().range(l.legend.gradientColors).domain([s,t]),w=d3.range(l.data.length).map(function(a){var b=l.data[a],c=u(+b[m.measureField]);c<0&&(c=.1);var d={source:b[m.sourceField],cluster:y.indexOf(b[m.groupField]),clusterName:b[m.groupField],measure:+b[m.measureField],r:c};return(!z[b.cluster]||d.measure>z[b.cluster].measure)&&(z[b.cluster]=d),d})}function d(){x=A.append("g").datum(w).selectAll(".circle").data(function(a){return a}).enter().append("circle").attr("r",function(a){return a.r}).style("fill",function(b){return l.legend.enabled?v(b.measure):b.cluster>=a.colors.length?a.randColor():a.colors[b.cluster]}).style("fill-opacity",.9).on("mousemove",function(a,b){l.showTooltip(l.getContent(a,m,l.tooltip.format))}).on("mouseout",function(a,b){l.hideTooltip()}).call(d3.drag().on("start",f).on("drag",g).on("end",h)),m.labelFormat&&(k=A.selectAll("text").data(w).enter().append("text").attr("class","eve-force-tree-text").style("fill",m.labelFontColor).style("font-size",m.labelFontSize+"px").style("font-family",m.labelFontFamily).style("font-style","bold"===m.labelFontStyle?"normal":m.labelFontStyle).style("font-weight","bold"===m.labelFontStyle?"bold":"normal").style("text-anchor","middle").text(function(a){return m.labelFormat.replaceAll("{source}",a.source).replaceAll("{measure}",l.formatNumber(a.measure,m.numberFormat))})),n=d3.forceSimulation(w).velocityDecay(.2).force("x",d3.forceX().strength(5e-4)).force("y",d3.forceY().strength(5e-4)).force("collide",j).force("cluster",i).on("tick",e),n.nodes(w)}function e(){x.attr("cx",0).attr("cy",0).transition(l.animation.duration).ease(l.animation.easing.toEasing()).delay(function(a,b){return b*l.animation.delay}).attr("cx",function(a){return a.x}).attr("cy",function(a){return a.y}),m.labelFormat&&k.attr("x",0).attr("y",0).transition(l.animation.duration).ease(l.animation.easing.toEasing()).delay(function(a,b){return b*l.animation.delay}).attr("x",function(a){return a.x}).attr("y",function(a){return a.y+m.labelFontSize/2})}function f(a){d3.event.active||n.alphaTarget(.3).restart(),a.fx=a.x,a.fy=a.y}function g(a){a.fx=d3.event.x,a.fy=d3.event.y}function h(a){a.fixed=!0,d3.select(this).classed("fixed",!0)}function i(a){w.forEach(function(b){var c=z[b.cluster];if(c!==b){var d=b.x-c.x,e=b.y-c.y,f=Math.sqrt(d*d+e*e),g=b.r+c.r;f!==g&&(f=(f-g)/f*a,b.x-=d*=f,b.y-=e*=f,c.x+=d,c.y+=e)}})}function j(a){var b=d3.quadtree().x(function(a){return a.x}).y(function(a){return a.y}).addAll(w);w.forEach(function(c){var d=c.r+m.maxBulletSize+Math.max(q,r),e=c.x-d,f=c.x+d,g=c.y-d,h=c.y+d;b.visit(function(b,d,i,j,k){if(b.data&&b.data!==c){var l=c.x-b.data.x,m=c.y-b.data.y,n=Math.sqrt(l*l+m*m),o=c.r+b.data.r+(c.cluster===b.data.cluster?q:r);n<o&&(n=(n-o)/n*a,c.x-=l*=n,c.y-=m*=n,b.data.x+=l,b.data.y+=m)}return d>f||j<e||i>h||k<g})})}var k,l=eve.base.init(b),m=l.series[0],n=null,o=0,p=0,q=1.5,r=10,s=0,t=0,u=null,v=null,w=null,x=null,y=[],z=[];c();var A=l.svg.append("g").attr("width",o).attr("height",p).attr("transform","translate("+o/2+","+p/2+")");return d(),l.update=function(a){l.data=a,c(),l.updateXYDomain(),l.updateLegend(),x.remove(),k&&k.remove(),d()},l.toCanvas=function(){var a=document.getElementById(l.container);return new Promise(function(b){html2canvas(a).then(function(a){b(a)})})},l.toImage=function(){var a=document.getElementById(l.container);return new Promise(function(b){html2canvas(a).then(function(a){b(a.toDataURL("image/png"))})})},l}a.bubbleForce=function(a){return new b(a)}}(eve),function(a){function b(b){function c(){t=[],u=[],D=m.plot.width-m.plot.left-m.plot.right,E=m.plot.height-m.plot.top-m.plot.bottom,p=m.domains.y[0],q=m.domains.y[1],n.maxBulletSize||(n.maxBulletSize=Math.sqrt(D*E/m.data.length/Math.PI)-5),n.minBulletSize||(n.minBulletSize=n.maxBulletSize*p/q),r=d3.scalePow().exponent(.5).domain([p,q]).range([n.minBulletSize,n.maxBulletSize]),s=d3.scaleLinear().range(m.legend.gradientColors).domain([p,q]),v=a.getUniqueValues(m.data,n.sourceField),w=a.getUniqueValues(m.data,n.targetField),x=a.getUniqueValues(m.data,n.groupField),u=m.data.map(function(b){if(z=b[n.sourceField],A=b[n.targetField],B=b[n.groupField],C=+b[n.measureField],d(z)===-1&&(y={id:z,group:x.indexOf(B),color:s(C)},m.legend.enabled||(y.color=y.group>=a.colors.length?a.randColor():a.colors[y.group]),t.push(y)),d(A)===-1&&(y={id:A,group:x.indexOf(B),color:s(C)},m.legend.enabled||(y.color=y.group>=a.colors.length?a.randColor():a.colors[y.group]),t.push(y)),!isNaN(C)&&C>0)return{source:z,target:A,group:B,measure:C}})}function d(a){var b=-1;return t.forEach(function(c,d){c.id===a&&(b=d)}),b}function e(){o=d3.forceSimulation().force("link",d3.forceLink().id(function(a){return a.id})).force("charge",d3.forceManyBody()).velocityDecay(.2).force("x",d3.forceX()).force("y",d3.forceY()).force("center",d3.forceCenter(D/2,E/2)),j=F.append("g").attr("class","links").selectAll("line").data(u).enter().append("line").attr("stroke-width",function(a){return r(a.measure)}).style("stroke","#cccccc"),k=F.append("g").attr("class","nodes").selectAll("circle").data(t).enter().append("circle").style("fill",function(a){return a.color}).style("stroke","none").attr("r",n.maxBulletSize/2).on("mousemove",function(a,b){m.showTooltip(m.getContent(a,n,m.tooltip.format))}).on("mouseout",function(a,b){m.hideTooltip()}).call(d3.drag().on("start",g).on("drag",h).on("end",i)),n.labelFormat&&(l=F.append("g").selectAll("text").data(t).enter().append("text").attr("class","pagos-force-texts").style("fill",n.labelFontColor).style("font-size",n.labelFontSize+"px").style("font-family",n.labelFontFamily).style("font-style","bold"===n.labelFontStyle?"normal":n.labelFontStyle).style("font-weight","bold"===n.labelFontStyle?"bold":"normal").style("text-anchor","start").text(function(a){return n.labelFormat.replaceAll("{label}",a.id)})),o.nodes(t).on("tick",f),o.force("link").links(u)}function f(){j.attr("x1",D/2).attr("y1",E/2).attr("x2",D/2).attr("y2",E/2).transition(m.animation.duration).ease(m.animation.easing.toEasing()).delay(function(a,b){return b*m.animation.delay}).attr("x1",function(a){return a.source.x}).attr("y1",function(a){return a.source.y}).attr("x2",function(a){return a.target.x}).attr("y2",function(a){return a.target.y}),k.attr("cx",D/2).attr("cy",E/2).transition(m.animation.duration).ease(m.animation.easing.toEasing()).delay(function(a,b){return b*m.animation.delay}).attr("cx",function(a){return a.x}).attr("cy",function(a){return a.y}),n.labelFormat&&l.attr("x",D/2).attr("y",E/2).transition(m.animation.duration).ease(m.animation.easing.toEasing()).delay(function(a,b){return b*m.animation.delay}).attr("x",function(a){return a.x+n.maxBulletSize/2+5}).attr("y",function(a){return a.y+n.labelFontSize/2})}function g(a){d3.event.active||o.alphaTarget(.3).restart(),a.fx=a.x,a.fy=a.y}function h(a){a.fx=d3.event.x,a.fy=d3.event.y}function i(a){a.fixed=!0,d3.select(this).classed("fixed",!0)}var j,k,l,m=eve.base.init(b),n=m.series[0],o=null,p=0,q=0,r=null,s=null,t=[],u=[],v=[],w=[],x=[],y={},z="",A="",B="",C=0,D=0,E=0;c();var F=m.svg.append("g").attr("width",D).attr("height",E);return e(),m.update=function(a){m.data=a,c(),m.updateXYDomain(),m.updateLegend(),k.remove(),j.remove(),l&&l.remove(),e()},m.toCanvas=function(){var a=document.getElementById(m.container);return new Promise(function(b){html2canvas(a).then(function(a){b(a)})})},m.toImage=function(){var a=document.getElementById(m.container);return new Promise(function(b){html2canvas(a).then(function(a){b(a.toDataURL("image/png"))})})},m}a.networkForce=function(a){return new b(a)}}(eve),function(a){function b(b){function c(){j=d3.max(h.data,function(a){return a[i.sourceField].toString().length}),k=d3.min(h.data,function(a){return new Date(a[i.startField])}),l=d3.max(h.data,function(a){return new Date(a[i.startField])}),r=l.diff(k),z=a.getUniqueValues(h.data,i.sourceField),A=a.getUniqueValues(h.data,i.groupField),o=r>365?d3.utcFormat("%e-%b-%Y"):r<1?d3.utcFormat("%X"):d3.utcFormat("%b-%e"),m=h.yAxis.labelFontSize/2*(j+1)+h.yAxis.labelFontSize,n.left=h.margin.left+m,n.right=h.margin.right,n.top=h.margin.top,n.bottom=h.margin.bottom,p=h.plot.width-h.plot.left-h.plot.right-n.left-n.right,q=h.plot.height-h.plot.top-h.plot.bottom-n.top-n.bottom,s=o(l).length,t=h.xAxis.labelFontSize/2*s+h.xAxis.labelFontSize,u=Math.floor(p/t),v=d3.scaleUtc().domain([k,l]).range([0,p]).clamp(!0),w=d3.scaleBand().domain(z).range([q-n.top-n.bottom,0]).padding(.1),x=d3.axisBottom().scale(v).ticks(u/2).tickFormat(o),y=d3.axisLeft().scale(w).tickSize(0)}function d(){B.selectAll("path").style("stroke-opacity",h.xAxis.alpha).style("stroke-width",h.xAxis.thickness+"px").style("stroke",h.xAxis.color),B.selectAll("line").style("fill","none").style("stroke-width",h.xAxis.thickness+"px").style("shape-rendering","crispEdges").style("stroke-opacity",h.xAxis.alpha).style("stroke",h.xAxis.color),B.selectAll("text").style("fill",h.xAxis.labelFontColor).style("font-size",h.xAxis.labelFontSize+"px").style("font-family",h.xAxis.labelFontFamily+", Arial, Helvetica, Ubuntu").style("font-style","bold"===h.xAxis.labelFontStyle?"normal":h.xAxis.labelFontStyle).style("font-weight","bold"===h.xAxis.labelFontStyle?"bold":"normal").style("text-anchor","middle").transition(h.animation.duration).ease(h.animation.easing.toEasing()).text(function(a){return o(new Date(a))}),E.selectAll("path").style("stroke-opacity",h.yAxis.alpha).style("stroke-width",h.yAxis.thickness+"px").style("stroke",h.yAxis.color),E.selectAll("line").style("fill","none").style("stroke-width",h.yAxis.thickness+"px").style("shape-rendering","crispEdges").style("stroke-opacity",h.yAxis.alpha).style("stroke",h.yAxis.color),E.selectAll("text").style("fill",h.yAxis.labelFontColor).style("font-size",h.yAxis.labelFontSize+"px").style("font-family",h.yAxis.labelFontFamily+", Arial, Helvetica, Ubuntu").style("font-style","bold"===h.yAxis.labelFontStyle?"normal":h.yAxis.labelFontStyle).style("font-weight","bold"===h.yAxis.labelFontStyle?"bold":"normal").transition(h.animation.duration).ease(h.animation.easing.toEasing()).text(function(a){return a})}function e(){B=I.append("g").style("fill","none").style("shape-rendering","crispEdges").attr("transform","translate(0,"+(q-n.bottom-n.top)+")").attr("class","eve-x-axis").call(x),E=I.append("g").style("fill","none").style("shape-rendering","crispEdges").attr("transform","translate(0)").attr("class","eve-y-axis").call(y),d()}function f(){C.transition(h.animation.duration).ease(h.animation.easing.toEasing()).delay(function(a,b){return b*h.animation.delay}).style("fill",H).attr("transform",function(a){return G(a,!1)}).attr("rx",2).attr("ry",2).attr("y",0).attr("height",function(a){return w.bandwidth()}).attr("width",function(a){return D=v(new Date(a[i.endField]))-v(new Date(a[i.startField])),D<0?0:D})}function g(){C=I.selectAll(".eve-gannt-chart").data(h.data,F).enter().append("rect").attr("class","eve-gannt-chart").style("fill",H).attr("rx",2).attr("ry",2).attr("y",0).attr("height",function(a){return w.bandwidth()}).attr("width",0).attr("transform",function(a){return G(a,!0)}).style("cursor","pointer").on("mousemove",function(a,b){h.showTooltip(h.getContent(a,i,h.tooltip.format))}).on("mouseout",function(a,b){h.hideTooltip()})}var h=eve.base.init(b),i=h.series[0],j=0,k=null,l=null,m=0,n={left:0,top:0,right:0,bottom:0},o=d3.utcFormat("%x"),p=0,q=0,r=0,s=0,t=0,u=0,v=null,w=null,x=null,y=null,z=[],A=[],B=null,C=null,D=0,E=null,F=function(a){return a[i.startField]+a[i.sourceField]+a[i.endField]},G=function(a,b){return"translate("+(b?0:v(new Date(a[i.startField])))+","+w(a[i.sourceField])+")"},H=function(b){var c=a.colors[0];return h.legendValues.forEach(function(a){a.value===b[i.groupField]&&(c=a.color)}),c};c();var I=h.svg.append("g").attr("transform","translate("+n.left+","+h.plot.top+")");return e(),g(),f(),h.update=function(a){h.data=a,c(),I=h.svg.attr("transform","translate("+n.left+","+h.plot.top+")"),B.style("fill","none").style("shape-rendering","crispEdges").transition(h.animation.duration).ease(h.animation.easing.toEasing()).call(x),E.style("fill","none").style("shape-rendering","crispEdges").transition(h.animation.duration).ease(h.animation.easing.toEasing()).call(y),d(),C.data(h.data).exit().remove(),C.style("fill",H).attr("rx",2).attr("ry",2).attr("y",0).attr("height",function(a){return w.bandwidth()}).attr("width",0).attr("transform",function(a){return G(a,!0)}).style("cursor","pointer"),f()},h.toCanvas=function(){var a=document.getElementById(h.container);return new Promise(function(b){html2canvas(a).then(function(a){b(a)})})},h.toImage=function(){var a=document.getElementById(h.container);return new Promise(function(b){html2canvas(a).then(function(a){b(a.toDataURL("image/png"))})})},h}a.gantt=function(a){return a.type="grouped",new b(a)}}(eve),function(a){function b(b,c){function d(a){return r=q.maxRange-q.minRange,Math.abs(a)/r*100-q.minRange/r*100}function e(a){return a/r*270-(q.minRange/r*270+45)}function f(a){return e(a)*Math.PI/180}function g(a,b){return{x:w-u*b*Math.cos(f(a)),y:x-u*b*Math.sin(f(a))}}function h(a){var b=r/13,c=g(a,.85),d=g(a-b,.12),e=g(a+b,.12),f=a-r*(1/.75)/2,h=g(f,.28),i=g(f-b,.12),j=g(f+b,.12);return[c,d,j,h,i,e,c]}function i(a,b){var c=d3.interpolate(b?b:0,a);return function(a){return I(c(a))}}function j(){y=10,t=p.trends.length>0?y:0,u=(Math.min(z,A)-t)/2,v=u/2+y,D=u/4,E=.5*D,F=.4*D,G=.9*D,w=(z-t)/2,x=A/2+v,H=d3.arc().outerRadius(u).innerRadius(v).startAngle(0).endAngle(Math.PI),I=d3.arc().outerRadius(u).innerRadius(v).startAngle(0).endAngle(function(a){return a/100*Math.PI}),O=X.append("path").attr("transform","translate("+w+","+x+")rotate(270)").style("fill",q.backColor).style("stroke",q.borderColor).attr("d",H),P=X.append("path").attr("transform","translate("+w+","+x+")rotate(270)").attr("class","eve-handle").style("fill",W).transition(p.animation.duration).ease(p.animation.easing.toEasing()).delay(function(a,b){return b*p.animation.delay}).attrTween("d",function(){return i(B)}),X.selectAll(".eve-gauge-trends").data(p.trends).enter().append("path").attr("transform","translate("+w+","+x+")rotate(270)").style("fill",function(a){return a.color}).transition(p.animation.duration).ease(p.animation.easing.toEasing()).delay(function(a,b){return b*p.animation.delay}).attrTween("d",function(a){var b=a.start/q.maxRange*Math.PI,c=a.end/q.maxRange*Math.PI,d=d3.arc().outerRadius(u+y).innerRadius(u).startAngle(b).endAngle(c);return d}),q.isSparkline||(""!==q.title&&(J=X.append("text").text(q.title).style("fill",q.titleColor).style("font-size",D+"px").style("text-anchor","middle").attr("x",w).attr("y",x-u-D/2)),K=X.append("text").text(p.formatNumber(q.minRange)).style("fill",q.handleColor).style("font-size",E+"px").style("text-anchor","start").attr("x",function(a){return w-u}).attr("y",x+E),L=X.append("text").text(p.formatNumber(q.maxRange)).style("fill",q.handleColor).style("font-size",E+"px").style("text-anchor","end").attr("x",function(a){return w+u}).attr("y",x+E),N=X.append("text").text(p.formatNumber(s,q.numberFormat)).style("fill",q.titleColor).style("font-size",G+"px").style("text-anchor","middle").attr("x",w).attr("y",x),M=X.append("text").text(q.labelFormat).style("fill",q.handleColor).style("font-size",F+"px").style("text-anchor","middle").attr("x",w).attr("y",x+G/2))}function k(){Q=Math.min(z,A),u=Q/2,w=z/2,x=A/2,r=q.maxRange-q.minRange,D=Q/12,E=Q/20,G=Q/11,S=h(p.data),T=d3.line().x(function(a){return a.x}).y(function(a){return a.y}).curve(d3.curveBasis),X.append("circle").attr("cx",w).attr("cy",x).attr("r",u).style("fill",q.backColor).style("stroke",q.borderColor).style("stroke-width","0.5px"),X.append("circle").attr("cx",w).attr("cy",x).attr("r",.9*u).style("fill",q.fillColor?q.fillColor:"#ffffff").style("stroke",d3.color(q.borderColor).darker(.2)).style("stroke-width","1px"),""!==q.title&&(J=X.append("text").text(q.title).style("fill",q.titleColor).style("font-size",D+"px").style("text-anchor","middle").attr("x",w).attr("y",x-.8*u+D).attr("dy",D/2)),X.selectAll(".eve-gauge-trend").data(p.trends).enter().append("path").attr("class","eve-gauge-trend").style("fill",function(a){return a.color}).attr("transform","translate("+w+","+x+")rotate(270)").transition(p.animation.duration).ease(p.animation.easing.toEasing()).delay(function(a,b){return b*p.animation.delay}).attrTween("d",function(a){return d3.arc().outerRadius(.88*u).innerRadius(.8*u).startAngle(f(a.start)).endAngle(f(a.end))});for(var a=r/(q.majorTicks-1),b=q.minRange;b<=q.maxRange;b+=a){for(var c=a/q.minorTicks,d=b+c;d<Math.min(b+a,q.maxRange);d+=c)n=g(d,.75),o=g(d,.85),X.append("line").attr("x1",n.x).attr("y1",n.y).attr("x2",o.x).attr("y2",o.y).style("stroke",d3.color(q.borderColor).darker(.3)).style("stroke-width","1px");if(n=g(b,.7),o=g(b,.85),X.append("line").attr("x1",n.x).attr("y1",n.y).attr("x2",o.x).attr("y2",o.y).style("stroke",d3.color(q.borderColor).darker(.5)).style("stroke-width","2px"),b==q.minRange||b==q.maxRange){var e=g(b,.63);X.append("text").attr("x",e.x).attr("y",e.y).attr("dy",E/3).attr("text-anchor",b==q.minRange?"start":"end").text(b).style("font-size",E+"px").style("fill",q.handleColor)}}N=X.append("g").attr("class","eve-gauge-handle"),N.selectAll("path").data([h(q.minRange)]).enter().append("path").attr("d",T).style("fill",W).style("stroke",d3.color(W).darker(.5)).style("fill-opacity",.7),S=h(p.data),N.selectAll("path").data([S]).transition(p.animation.duration).ease(p.animation.easing.toEasing()).delay(function(a,b){return b*p.animation.delay}).attr("d",T),X.append("circle").attr("cx",w).attr("cy",x).attr("r",.12*u).style("fill",q.backColor).style("stroke",q.borderColor).style("opacity",1),M=X.append("text").text(s).style("fill",q.titleColor).style("font-size",G+"px").style("text-anchor","middle").attr("x",z/2).attr("y",x+u-G-G/2),X.append("text").text(q.labelFormat).style("fill",q.handleColor).style("font-size",G/2+"px").style("text-anchor","middle").attr("x",z/2).attr("y",x+u-G)}function l(){D=V/1.5,G=(A-V)/2,x=V/2+D/2-R,w=z/2,X.append("rect").attr("width",z).attr("height",A).style("fill",q.backColor).style("stroke",q.borderColor).style("stroke-width","0.5px"),U&&(X.append("rect").attr("width",z).attr("height",V).style("fill",d3.color(q.backColor).darker(.2)).style("stroke",q.borderColor),X.append("text").text(q.title).style("fill",q.titleColor).style("font-size",D+"px").style("text-anchor","middle").attr("x",w).attr("y",x)),M=X.append("text").text("0").style("fill",W).style("font-size",G+"px").style("text-anchor","middle").attr("x",w).attr("y",A/2+G/(q.labelFormat?4:2)),M.transition(p.animation.duration).ease(p.animation.easing.toEasing()).delay(function(a,b){return b*p.animation.delay}).tween("text",function(){var a=this,b=d3.interpolateNumber(d3.select(a).text(),p.data);return function(c){d3.select(a).text(b(c).toFixed(2))}}),X.append("text").text(q.labelFormat).style("fill",q.handleColor).style("font-size",G/2+"px").style("text-anchor","middle").attr("x",z/2).attr("y",A/2+G);
}function m(){}b.legend?b.legend.enabled=!1:b.legend={enabled:!1};var n,o,p=eve.base.init(b),q=p.series[0],r=0,s=+p.data,t=0,u=0,v=0,w=0,x=0,y=0,z=p.plot.width,A=p.plot.height,B=d(s),C=0,D=0,E=0,F=0,G=0,H=null,I=null,J=null,K=null,L=null,M=null,N=null,O=null,P=null,Q=0,R=5,S=null,T=null,U=""!==q.title,V=A/R,W=q.color?q.color:a.colors[0],X=p.svg.append("g").attr("width",z).attr("height",A);switch(c){case"standard":j();break;case"dial":k();break;case"digital":l();break;case"bullet":m()}return p.update=function(a){switch(C=B,p.data=a,s=a,B=d(s),c){case"standard":N.transition(p.animation.duration).ease(p.animation.easing.toEasing()).delay(function(a,b){return b*p.animation.delay}).text(p.formatNumber(s,q.numberFormat)),X.selectAll(".eve-handle").transition(p.animation.duration).ease(p.animation.easing.toEasing()).delay(function(a,b){return b*p.animation.delay}).attrTween("d",function(){return i(B,C)});break;case"dial":M.transition(p.animation.duration).ease(p.animation.easing.toEasing()).delay(function(a,b){return b*p.animation.delay}).text(p.formatNumber(s,q.numberFormat)),S=h(p.data),N.selectAll("path").data([S]).transition(p.animation.duration).ease(p.animation.easing.toEasing()).delay(function(a,b){return b*p.animation.delay}).attr("d",T);break;case"digital":M.transition(p.animation.duration).ease(p.animation.easing.toEasing()).delay(function(a,b){return b*p.animation.delay}).tween("text",function(){var a=this,b=d3.interpolateNumber(d3.select(a).text(),p.data);return function(c){d3.select(a).text(b(c).toFixed(2))}})}},p.toCanvas=function(){var a=document.getElementById(p.container);return new Promise(function(b){html2canvas(a).then(function(a){b(a)})})},p.toImage=function(){var a=document.getElementById(p.container);return new Promise(function(b){html2canvas(a).then(function(a){b(a.toDataURL("image/png"))})})},p}a.standardGauge=function(a){return a.type="",new b(a,"standard")},a.dialGauge=function(a){return a.type="",new b(a,"dial")},a.digitalGauge=function(a){return a.type="",new b(a,"digital")},a.linearBullet=function(a){return a.type="",new b(a,"bullet")}}(eve),function(a){function b(b){function c(){h=a.getUniqueValues(f.data,g.sourceField),i=a.getUniqueValues(f.data,g.targetField),h.sort(),i.sort(),m=d3.max(h,function(a){return a.toString().length}),n=d3.max(i,function(a){return a.toString().length}),o=f.yAxis.labelFontSize/2*(m+1)+f.yAxis.labelFontSize,p=f.xAxis.labelFontSize/2*(n+1)+f.xAxis.labelFontSize,j.left=f.margin.left+o,j.top=f.margin.top+p,k=f.plot.width-f.plot.left-f.plot.right-j.left-j.right,l=f.plot.height-f.plot.top-f.plot.bottom-j.top-j.bottom,q=k/i.length,r=l/h.length,s=d3.scaleLinear().range(f.legend.gradientColors).domain(f.domains.y)}function d(){t.transition(f.animation.duration).ease(f.animation.easing.toEasing()).delay(function(a,b){return b*f.animation.delay}).attr("x",function(a){return i.indexOf(a[g.targetField])*q}).attr("y",function(a){return h.indexOf(a[g.sourceField])*r}).attr("width",q).attr("height",r).style("fill",function(a){return s(+a[g.measureField])}),u.transition(f.animation.duration).ease(f.animation.easing.toEasing()).delay(function(a,b){return b*f.animation.delay}).attr("x",0).attr("y",function(a,b){return b*r}).attr("transform",function(a,b){var c=this.getBBox(),d=c.height/2+r/2-4;return"translate(-6,"+d+")"}),v.transition(f.animation.duration).ease(f.animation.easing.toEasing()).delay(function(a,b){return b*f.animation.delay}).attr("x",0).attr("y",function(a,b){return b*q}).attr("transform","translate("+q/2+", -6)rotate(-90)")}function e(){t=w.selectAll(".eve-heatmap-data").data(f.data).enter().append("rect").attr("class","eve-heatmap-data eve-heatmap-cell").attr("x",0).attr("y",function(a){return h.indexOf(a[g.sourceField])*r}).attr("width",0).attr("height",r).style("fill",function(a){return s(+a[g.measureField])}).on("mousemove",function(a,b){f.showTooltip(f.getContent(a,g,f.tooltip.format))}).on("mouseout",function(a,b){f.hideTooltip()}),u=w.selectAll(".eve-heatmap-rows").data(h).enter().append("text").attr("x",0).attr("y",function(a,b){return b*r}).style("text-anchor","end").attr("class","eve-heatmap-rows").style("fill",f.yAxis.labelFontColor).style("font-size",f.yAxis.labelFontSize+"px").style("font-family",f.yAxis.labelFontFamily+", Arial, Helvetica, Ubuntu").style("font-style","bold"===f.yAxis.labelFontStyle?"normal":f.yAxis.labelFontStyle).style("font-weight","bold"===f.yAxis.labelFontStyle?"bold":"normal").text(function(a){return a}).attr("transform","translate(-6,0)"),v=w.selectAll(".eve-heatmap-cols").data(i).enter().append("text").attr("x",0).attr("y",function(a,b){return b*q}).attr("class","eve-heatmap-cols").style("fill",f.yAxis.labelFontColor).style("font-size",f.yAxis.labelFontSize+"px").style("font-family",f.yAxis.labelFontFamily+", Arial, Helvetica, Ubuntu").style("font-style","bold"===f.yAxis.labelFontStyle?"normal":f.yAxis.labelFontStyle).style("font-weight","bold"===f.yAxis.labelFontStyle?"bold":"normal").text(function(a){return a}).attr("transform","translate(0, -6)rotate(-90)")}var f=eve.base.init(b),g=f.series[0],h=[],i=[],j={left:0,right:f.margin.right,top:0,bottom:f.margin.bottom},k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=null,t=null,u=null,v=null;c();var w=f.svg.append("g").attr("transform","translate("+j.left+","+j.top+")");return e(),d(),f.update=function(a){f.data=a,f.updateXYDomain(),f.updateLegend(),c(),t.data(f.data).exit().remove(),u.data(h).exit().remove(),v.data(i).exit().remove(),d()},f.toCanvas=function(){var a=document.getElementById(f.container);return new Promise(function(b){html2canvas(a).then(function(a){b(a)})})},f.toImage=function(){var a=document.getElementById(f.container);return new Promise(function(b){html2canvas(a).then(function(a){b(a.toDataURL("image/png"))})})},f}a.heatmap=function(a){return new b(a)}}(eve),function(a){function b(b){function c(){j.data.forEach(function(a){a.values.length&&a.values.length>0&&l++}),m=a.isPrime(l)?l+1:l,p=d3.max(a.getPrimeFactors(m)),2===p&&(p=m/2),2===l?n<o?(r=Math.floor(o/2),q=Math.floor(n-5)):(r=Math.floor(o),q=Math.floor(n/2)):n<o?(r=Math.floor(o/p-1),q=Math.floor((n-5)/(m/p)-1)):(r=Math.floor(o/(m/p)-1),q=Math.floor(n/p)),s=d3.min(j.data,function(a){return d3.min(a.values,function(a){return parseFloat(a[y])})}),t=d3.max(j.data,function(a){return d3.max(a.values,function(a){return parseFloat(a[y])})}),u=d3.min(j.data,function(a){return d3.min(a.values,function(a){return parseFloat(a[E])})}),v=d3.max(j.data,function(a){return d3.max(a.values,function(a){return parseFloat(a[E])})}),""!==k.groupField&&(t=Number.MIN_VALUE,j.data.forEach(function(a){a.values&&a.values.length>0&&a.values.forEach(function(a){for(var b in a)b!==E&&(w=parseFloat(a[b]),!isNaN(w)&&w>t&&(t=w))})}),s=t,j.data.forEach(function(a){a.values&&a.values.length>0&&a.values.forEach(function(a){for(var b in a)b!==E&&(w=parseFloat(a[b]),!isNaN(w)&&w<s&&(s=w))})}))}function d(){switch(k.type){case"area":case"bar":case"bubble":case"column":case"donut":case"funnel":case"line":case"pie":case"pyramid":case"scatter":return"chart";case"map":return"map";case"gauge":return"gauge";default:return"diagram"}}function e(a,b,c){}function f(a,b,c){}function g(a,b,c){}function h(a,b,c){var d=k.type+"Chart",e=b[k.multipleField],f={container:a,data:b.values,backColor:j.backColor,title:{content:e,position:j.title.position},tooltip:j.tooltip,legend:{enabled:!1},animation:j.animation,zoomable:j.zoomable,xField:E,series:[k],width:q,height:r};eve[d](f)}function i(){j.svg.selectAll("*").remove(),j.data.forEach(function(a,b){if(a.values&&a.values.length>0)switch(C=j.container+"_"+b,z=b%p*q,b>=p&&b%p===0&&B++,A=B*r,x=j.svg.append("foreignObject").attr("width",q).attr("height",r).attr("x",z).attr("y",A),x.append("xhtml:div").attr("id",C).style("width",q).style("height",r),D){case"chart":h(C,a,b);break;case"diagram":e(C,a,b);break;case"map":f(C,a,b);break;case"gauge":g(C,a,b)}})}var j=eve.base.init(b),k=j.series[0],l=0,m=0,n=j.plot.width,o=j.plot.height,p=0,q=0,r=0,s=0,t=0,u=0,v=0,w=0,x=null,y=k.yField||k.measureField,z=0,A=0,B=0,C="",D=d(),E=k.xField||k.labelField;return c(),i(),j.update=function(a){l=0,B=0,j.data=a,c(),i()},j.toCanvas=function(){var a=document.getElementById(j.container);return new Promise(function(b){html2canvas(a).then(function(a){b(a)})})},j.toImage=function(){var a=document.getElementById(j.container);return new Promise(function(b){html2canvas(a).then(function(a){b(a.toDataURL("image/png"))})})},j}a.multiples=function(a){return new b(a)}}(eve),function(a){function b(b){b.frozenYAxis="string",b.legend={enabled:!1};var c=eve.base.init(b),d=eve.base.createAxis(c),e=c.series[0],f=null,g=null,h=10,i=0,j=0,k=0,l=0,m=e.minBulletSize,n=e.maxBulletSize,o=0,p=0,q={},r=0;e.bullet.indexOf(!1)&&(e.bullet="none");var s=c.svg.append("g").attr("transform","translate("+c.plot.left+","+c.plot.top+")"),t=function(a,b){return b?1:0===o?n:+a[e.measureField]/o*r-i/o*r+m},u=function(a,b){var f=0,g=0;return f="string"===c.xFieldDataType?d.xScale(a[c.xField])+d.xScale.bandwidth()/2:d.xScale(a[c.xField]),g=b?c.plot.height:d.yScale(a[e.yField])+d.yScale.bandwidth()/2,"translate("+f+","+g+")"},v=function(){i=d3.min(c.data,function(a){return+a[e.measureField]}),j=d3.max(c.data,function(a){return+a[e.measureField]}),k="string"===c.xFieldDataType?d.xScale.bandwidth()-h:c.plot.width/h-h,l=d.yScale.bandwidth(),m=1,n=Math.pow(Math.min(k,l),2),o=j-i,r=n-m,d.yScale.domain().map(function(b,c){q[b]=c>=a.colors.length?a.randColor():a.colors[c]})},w=function(){f=d3.symbol().type(function(a){return"none"===e.bullet?d3.symbolCircle:e.bullet.toSymbol()}).size(function(a){return t(a,!1)}),s.selectAll(".eve-network-bullet").transition(c.animation.duration).ease(c.animation.easing.toEasing()).delay(function(a,b){return b*c.animation.delay}).attr("d",f).attr("transform",function(a){return u(a,!1)})};return f=d3.symbol().type(function(a){return"none"===e.bullet?d3.symbolCircle:e.bullet.toSymbol()}).size(function(a){return t(a,!0)}),v(),g=s.selectAll(".eve-network-bullet").data(c.data).enter().append("path").attr("class","eve-network-bullet").attr("d",f).attr("fill-opacity",e.showBullets?e.bulletAlpha:0).attr("stroke-opacity",e.bulletStrokeAlpha).attr("stroke-width",e.bulletStrokeSize).attr("fill",function(a){return q[a[e.yField]]}).attr("fill-opacity",function(a){return p=+a[e.measureField],isNaN(p)||0===p?0:1}).attr("transform",function(a){return u(a,!0)}).on("click",function(a){c.sliceClick&&c.sliceClick(a)}).on("mousemove",function(a,b){d3.select(this).attr("fill-opacity",e.sliceHoverAlpha),c.showTooltip(c.getContent(a,e,c.tooltip.format))}).on("mouseout",function(a,b){d3.select(this).attr("fill-opacity",e.alpha),c.hideTooltip()}),w(),c.update=function(a){c.data=a,d.updateAxis(),c.updateLegend(),v(),s.selectAll(".eve-network-bullet").data(c.data).exit().remove(),w()},c.toCanvas=function(){var a=document.getElementById(c.container);return new Promise(function(b){html2canvas(a).then(function(a){b(a)})})},c.toImage=function(){var a=document.getElementById(c.container);return new Promise(function(b){html2canvas(a).then(function(a){b(a.toDataURL("image/png"))})})},c}a.networkMatrix=function(a){return a.type="xy",new b(a)}}(eve),function(a){function b(b){function c(){u=p.measureField.split(","),w=p.groupField?a.getUniqueValues(o.data,p.groupField):a.getUniqueValues(o.data,p.sourceField),w.forEach(function(b,c){y.push(c>=a.colors.length?a.randColor():a.colors[c])}),u.forEach(function(a){x=d3.max(o.data,function(b){return+b[a]}),x>t&&(t=x)}),v=o.formatNumber(t,o.yAxis.numberFormat),s=2*o.xAxis.labelFontSize,q=o.plot.width-o.margin.left-o.margin.right,r=o.plot.height-o.margin.top-o.margin.bottom-2*o.xAxis.labelFontSize,z=d3.scalePoint().range([0,q]).padding(1),C=d3.line(),D=d3.axisLeft(),A={},k=d3.keys(o.data[0]).filter(function(a){return a!=p.sourceField&&a!=p.groupField&&(A[a]=d3.scaleLinear().domain(d3.extent(o.data,function(b){return+b[a]})).range([r,0]))}),z.domain(k)}function d(){n.transition(o.animation.duration).ease(o.animation.easing.toEasing()).delay(function(a,b){return b*o.animation.delay}).attr("d",i)}function e(){m=E.append("g").attr("class","eve-parallel-lines-background").style("fill","none").style("stroke","#dddddd").style("shape-rendering","crispEdges").style("fill-opacity",0).selectAll("path").data(o.data).enter().append("path").attr("d",h),n=E.append("g").selectAll("path").data(o.data).enter().append("path").attr("class",function(a,b){return"eve-parallel-lines-foreground eve-parallel-line-"+b}).style("fill","none").style("fill-opacity",0).style("stroke",function(a){var b=p.groupField?a[p.groupField]:a[p.sourceField],c=w.indexOf(b),d=y[c];return d}).style("stroke-width",2.5).style("stroke-opacity",.8).on("click",function(a,b){a.selected?a.selected=!1:a.selected=!0;var c="eve-parallel-line-"+b;a.selected?(E.selectAll(".eve-parallel-lines-foreground").style("stroke-opacity",.1),E.selectAll("."+c).style("stroke-opacity",1).style("stroke-width",5)):E.selectAll(".eve-parallel-lines-foreground").style("stroke-opacity",1).style("stroke-width",2.5)}).on("mousemove",function(a){o.showTooltip(o.getContent(a,p,o.tooltip.format))}).on("mouseout",function(a){o.hideTooltip()}).attr("d",h),l=E.selectAll(".dimension").data(k).enter().append("g").attr("class","dimension").attr("transform",function(a){return"translate("+z(a)+")"}).call(d3.drag().subject(function(a){return{x:z(a)}}).on("start",function(a){B[a]=z(a),m.attr("visibility","hidden")}).on("drag",function(a){B[a]=Math.min(q,Math.max(0,d3.event.x)),n.attr("d",h),k.sort(function(a,b){return f(a)-f(b)}),z.domain(k),l.attr("transform",function(a){return"translate("+f(a)+")"})}).on("end",function(a,b){if(delete B[a],g(d3.select(this)).attr("transform","translate("+z(a)+")"),g(n).attr("d",h),m.attr("d",h).transition().delay(500).duration(0).attr("visibility",null),o.yAxis.labelFormat){var c=n[0][b].getBBox(),d=d3.select(n[0][b]).attr("d"),e=c.x+10,f=parseFloat(d.split(",")[1])-2;return f<=0&&(f=o.yAxis.labelFontSize),"translate("+e+","+f+")"}})),l.append("g").attr("class","eve-parallel-lines-axis").each(function(a){d3.select(this).call(D.scale(A[a]))}).append("text").style("text-anchor","middle").style("fill",o.xAxis.labelFontColor).style("font-size",o.xAxis.labelFontSize+"px").style("font-family",o.xAxis.labelFontFamily).style("font-style","bold"===o.xAxis.labelFontStyle?"normal":o.xAxis.labelFontStyle).style("font-weight","bold"===o.xAxis.labelFontStyle?"bold":"normal").attr("y",-9).text(function(a){return a}),l.append("g").attr("class","eve-y-brush").each(function(a){d3.select(this).call(A[a].brush=d3.brushY(A[a]).extent([[-8,0],[10,r]]).on("brush end",j))}).selectAll("rect"),E.selectAll(".eve-parallel-lines-axis").selectAll("path").style("fill","none").style("stroke","#333333"),E.selectAll(".eve-parallel-lines-axis text").style("fill",o.yAxis.labelFontColor).style("font-size",o.yAxis.labelFontSize+"px").style("font-family",o.yAxis.labelFontFamily).style("font-style","bold"===o.yAxis.labelFontStyle?"normal":o.yAxis.labelFontStyle).style("font-weight","bold"===o.yAxis.labelFontStyle?"bold":"normal").text(function(a){return"string"==typeof a?a:o.formatNumber(a,o.yAxis.numberFormat)})}function f(a){var b=B[a];return null==b?z(a):b}function g(a){return a.transition().duration(o.animation.duration)}function h(a){return C(k.map(function(a){return[f(a),A[a](0)]}))}function i(a){return C(k.map(function(b){return[f(b),A[b](+a[b])]}))}function j(){if(d3.event.selection){var a=k.filter(function(a){return d3.event.selection.map(A[a].invert)}),b=a.map(function(a){return d3.event.selection.map(A[a].invert)}),c=[];n.style("stroke-opacity",.1),o.data.forEach(function(d,e){a.forEach(function(a,f){b[f][1]<=+d[a]&&b[f][0]>=+d[a]&&c.indexOf(".eve-parallel-line-"+e)===-1&&c.push(".eve-parallel-line-"+e)})}),c.forEach(function(a){E.selectAll(a).style("stroke-opacity",1)})}}b.legend?b.legend.enabled=!1:b.legend={enabled:!1};var k,l,m,n,o=eve.base.init(b),p=o.series[0],q=0,r=0,s=0,t=Number.MIN_VALUE,u=[],v="",w=[],x=0,y=[],z=null,A={},B={},C=d3.line(),D=d3.axisLeft();c();var E=o.svg.append("g").attr("transform","translate("+o.margin.left+","+s+")");return e(),d(),o.update=function(a){o.data=a,c(),E.attr("transform","translate("+o.margin.left+","+s+")"),m.remove(),n.remove(),l.remove(),e(),d()},o.toCanvas=function(){var a=document.getElementById(o.container);return new Promise(function(b){html2canvas(a).then(function(a){b(a)})})},o.toImage=function(){var a=document.getElementById(o.container);return new Promise(function(b){html2canvas(a).then(function(a){b(a.toDataURL("image/png"))})})},o}a.parallelLines=function(a){return a.type="",new b(a)}}(eve),function(a){function b(b){function c(){g.data.nodes.forEach(function(b,c){b.color=c>=a.colors.length?a.randColor():a.colors[c]}),i=d3.sum(g.data.links,function(a){return+a[h.measureField]}),j=d3.max(g.data.nodes,function(a){return a.name.toString().length}),k=j>i.toString().length?j:i.toString().length,l=g.xAxis.labelFormat?g.xAxis.labelFontSize/2*(k+1)+g.xAxis.labelFontSize:10,m=g.yAxis.labelFormat?2*g.yAxis.labelFontSize:10,n.left=l,n.right=l,n.top=m,n.bottom=m,o=g.plot.width-n.left-n.right,p=g.plot.height-n.top-n.bottom}function d(){s.transition(g.animation.duration).ease(g.animation.easing.toEasing()).delay(function(a,b){return b*g.animation.delay}).attr("stroke",function(a){return a.source.color}).attr("stroke-width",function(a){return Math.max(1,a.dy)}),t.transition(g.animation.duration).ease(g.animation.easing.toEasing()).delay(function(a,b){return b*g.animation.delay}).attr("transform",function(a){return"translate("+a.x+","+(isNaN(a.y)?0:a.y)+")"}).attr("height",function(a){return a.dy}).attr("fill",function(a){return a.color}).attr("stroke",function(a){return d3.rgb(a.color).darker(2)})}function e(){q=d3.sankey().nodeWidth(36).nodePadding(40).size([o,p]),r=q.link(),q.nodes(g.data.nodes).links(g.data.links).layout(32),s=u.append("g").selectAll(".eve-sankey-link").data(g.data.links).enter().append("path").attr("class","eve-sankey-link").style("stroke-opacity",.5).style("fill","none").style("fill-opacity",0).attr("d",r).attr("stroke",function(a){return a.source.color}).attr("stroke-width",1).sort(function(a,b){return b.dy-a.dy}),t=u.append("g").selectAll(".eve-sankey-node").data(g.data.nodes).enter().append("rect").attr("class","eve-sankey-node").attr("transform",function(a){return"translate("+a.x+","+(isNaN(a.y)?0:a.y)+")"}).attr("width",q.nodeWidth()).attr("height",0).style("stroke-width",1).attr("fill",function(a){return a.color}).attr("stroke",function(a){return d3.rgb(a.color).darker(0)}).on("mousemove",function(a,b){g.showTooltip(g.getContent(a,h,g.tooltip.format))}).on("mouseout",function(a,b){g.hideTooltip()}),t.call(d3.drag().subject(function(a){return a}).on("start",function(a){this.parentNode.appendChild(this)}).on("drag",f))}function f(a){d3.select(this).attr("transform","translate("+a.x+","+(a.y=Math.max(0,Math.min(p-a.dy,d3.event.y)))+")"),q.relayout(),s.attr("d",r)}b.legend?b.legend.enabled=!1:b.legend={enabled:!1};var g=eve.base.init(b),h=g.series[0],i=0,j=0,k=0,l=0,m=0,n={left:0,top:0,bottom:g.margin.bottom,right:0},o=0,p=0,q=(d3.format(""),null),r=null,s=null,t=null;c();var u=g.svg.append("g").attr("transform","translate("+g.plot.left+","+g.plot.top+")");return e(),d(),g.update=function(a){g.data=a,c(),u.attr("transform","translate("+g.plot.left+","+g.plot.top+")"),s.remove(),t.remove(),e(),d()},g.toCanvas=function(){var a=document.getElementById(g.container);return new Promise(function(b){html2canvas(a).then(function(a){b(a)})})},g.toImage=function(){var a=document.getElementById(g.container);return new Promise(function(b){html2canvas(a).then(function(a){b(a.toDataURL("image/png"))})})},g}a.sankey=function(a){return a.type="",new b(a)}}(eve),function(a){function b(b){function c(){n=d3.area().curve(d3.curveCardinal).x(function(a){return f.xScale(a.data[j])}).y0(function(a){return f.yScale(a[0])/2}).y1(function(a){return f.yScale(a[1])/2}),i.transition(e.animation.duration).ease(e.animation.easing.toEasing()).delay(function(a,b){return b*e.animation.delay}).attr("d",n)}function d(){m.length=0,e.series.forEach(function(b,c){switch(e.legend.type){case"gradient":m.push(a.gradient(e.legend.gradientColors[0],e.legend.gradientColors[1],100-c*o));break;default:m.push(b.color)}})}b.yAxis?b.yAxis.position||(b.yAxis.position="right"):b.yAxis={position:"right"},b.frozenMaxY=!0;var e=eve.base.init(b),f=eve.base.createAxis(e),g=null,h=null,i=null,j=e.xField,k=0,l=d3.stack().keys(e.serieNames).offset(d3.stackOffsetSilhouette).order(d3.stackOrderInsideOut),m=[],n=null,o=100/e.series.length,p=null,q=null,r=e.svg.append("g").attr("transform","translate("+e.plot.left+","+e.plot.top+")");return e.data.sort(function(a,b){return a[e.xField]<b[e.xField]?-1:a[e.xField]>b[e.xField]?1:0}),k=Math.abs(f.yScale(0)-f.yScale(e.domains.y[0])),h=null,g=l(e.data),g.forEach(function(a){a.forEach(function(b){b.serieIndex=a.index})}),d(),n=d3.area().curve(d3.curveCardinal).x(function(a){return f.xScale(a.data[j])}).y0(function(a){return f.yScale(a[0])/2}).y1(function(a){return f.yScale(a[0])/2}),i=r.selectAll(".eve-streamgraph-layer").data(g).enter().append("path").attr("class","eve-streamgraph-layer").attr("d",n).attr("fill",function(a,b){return m[b]}).attr("stroke",function(a,b){return m[b]}).attr("fill-opacity",function(a,b){return e.series[a.index].alpha}).attr("stroke-opacity",function(a,b){return e.series[a.index].sliceStrokeAlpha}).attr("stroke-width",function(a,b){return e.series[a.index].sliceStrokeThickness}),r.selectAll(".eve-streamgraph-layer").on("mouseover",function(a,b){d3.select(this).attr("fill-opacity",e.series[b].sliceHoverAlpha)}).on("mousemove",function(a,b){p=d3.mouse(this),p=p[0],q=Math.ceil(f.xScale.invert(p)),a.forEach(function(a){a.data[j]===q&&e.showTooltip(e.getContent(a,e.series[b],e.tooltip.format))})}).on("mouseout",function(a,b){d3.select(this).attr("fill-opacity",e.series[b].alpha),e.hideTooltip()}),c(),e.update=function(a){e.data=a,e.data.sort(function(a,b){return a[e.xField]<b[e.xField]?-1:a[e.xField]>b[e.xField]?1:0}),f.updateAxis(),e.updateLegend(),h=null,g=l.keys(e.serieNames).offset(d3.stackOffsetSilhouette).order(d3.stackOrderInsideOut)(e.data),g.forEach(function(a){a.forEach(function(b){b.serieIndex=a.index})}),d(),i.data(g).exit().remove(),c()},e.toCanvas=function(){var a=document.getElementById(e.container);return new Promise(function(b){html2canvas(a).then(function(a){b(a)})})},e.toImage=function(){var a=document.getElementById(e.container);return new Promise(function(b){html2canvas(a).then(function(a){b(a.toDataURL("image/png"))})})},e}a.streamGraph=function(a){return a.type="xy",new b(a)}}(eve),function(a){function b(b){function c(){q=d3.hierarchy(h.data).each(function(a){/^other[0-9]+$/.test(a.data[i.labelField])&&(a.data[i.labelField]=null)}).sum(function(a){return+a[i.sizeField]}).sort(function(a,b){return b.value-a.value}),j=d3.max(q.descendants(),function(a){return a.data[i.labelField].toString().length}),k=i.labelFormat?h.xAxis.labelFontSize*j+1:10,k=h.xAxis.labelFontSize*j+1,l.left=h.margin.left+k,l.right=h.margin.right+k,l.top=h.margin.top,l.bottom=h.margin.bottom,m=h.plot.width-l.left-l.right,n=h.plot.height-l.top-l.bottom,o=Math.min(h.plot.width-k,h.plot.height-k)/2,p=d3.partition().size([360,o]).padding(0),r=d3.hierarchy(h.data,function(a){return a.children}).sum(function(a){return a.children?0:1}),p(r),t=d3.scaleLinear().domain([0,o]).range([0,2*Math.PI]).clamp(!0),u=d3.scaleLinear().domain([0,o]).range([0,2*Math.PI]).clamp(!0),s=d3.scaleOrdinal(a.colors),v=d3.arc().startAngle(function(a){return t(a.x0)}).endAngle(function(a){return t(a.x1)}).innerRadius(function(a){return a.y0}).outerRadius(function(a){return 10})}function d(){v=d3.arc().startAngle(function(a){return t(a.x0)}).endAngle(function(a){return t(a.x1)}).innerRadius(function(a){return a.y0}).outerRadius(function(a){return a.y1}),x.transition(h.animation.duration).ease(h.animation.easing.toEasing()).delay(function(a,b){return b*h.animation.delay}).attr("d",v),x.exit().remove(),y.transition(h.animation.duration).ease(h.animation.easing.toEasing()).delay(function(a,b){return b*h.animation.delay}).text(function(a){return h.xAxis.labelFormat.replaceAll("{source}",a.data.name).replaceAll("{measure}",h.formatNumber(a.data.size,h.xAxis.numberFormat))}).attr("dx",0).attr("dy",".5em").attr("x",function(a){return t(a.y0)}).attr("transform",function(a){if(a.depth>0){var b=v.centroid(a);return"translate("+b+")rotate("+g(a)+")"}return null}),y.exit().remove()}function e(){x=z.selectAll("path").data(r.descendants()).enter().append("path").attr("display",function(a){return a.depth?null:"none"}).attr("d",v).attr("class","eve-sunburst-node").attr("stroke","#fff").attr("fill",function(a){return s((a.children?a:a.parent).data.name)}).attr("fill-rule","evenodd").on("mousemove",function(a,b){w=f(a),d3.selectAll(".eve-sunburst-node").style("opacity",.3),d3.selectAll(".eve-sunburst-node").filter(function(a){return w.indexOf(a)>=0}).style("opacity",1),h.showTooltip(h.getContent(a,i,h.tooltip.format))}).on("mouseout",function(a,b){d3.selectAll(".eve-sunburst-node").style("opacity",1),h.hideTooltip()}),y=z.selectAll("text").data(r.descendants()).enter().append("text").style("fill",h.xAxis.labelFontColor).style("font-size",h.xAxis.labelFontSize+"px").style("font-family",h.xAxis.labelFontFamily).style("font-style","bold"===h.xAxis.labelFontStyle?"normal":h.xAxis.labelFontStyle).style("font-weight","bold"===h.xAxis.labelFontStyle?"bold":"normal").attr("text-anchor","middle").text(function(a){return h.xAxis.labelFormat.replaceAll("{source}",a.data.name).replaceAll("{measure}",h.formatNumber(a.data.size,h.xAxis.numberFormat))}).attr("dx",0).attr("dy",".5em").attr("x",function(a){return t(a.y0)}).attr("transform",function(a){if(a.depth>0){var b=v.centroid(a);return"translate("+b+")rotate("+g(a)+")"}return null})}function f(a){for(var b=[],c=a;c.parent;)b.unshift(c),c=c.parent;return b}function g(a){var b=180/Math.PI*(v.startAngle()(a)+v.endAngle()(a))/2-90;return b>90?b-180:b}b.legend?b.legend.enabled=!1:b.legend={enabled:!1};var h=eve.base.init(b),i=h.series[0],j=0,k=0,l={left:0,top:0,bottom:0,right:0},m=0,n=0,o=0,p=null,q=null,r=null,s=null,t=null,u=null,v=null,w=null,x=null,y=null;c();var z=h.svg.append("g").attr("transform","translate("+h.plot.width/2+","+n/2+")");return e(),d(),h.update=function(a){h.data=a,c(),z.attr("transform","translate("+h.plot.width/2+","+n/2+")"),x.remove(),y.remove(),e(),d()},h.toCanvas=function(){var a=document.getElementById(h.container);return new Promise(function(b){html2canvas(a).then(function(a){b(a)})})},h.toImage=function(){var a=document.getElementById(h.container);return new Promise(function(b){html2canvas(a).then(function(a){b(a.toDataURL("image/png"))})})},h}a.sunburst=function(a){return a.type="",new b(a)}}(eve),function(a){function b(b){function c(a){return d3.axisBottom().scale(a?L:K)}function d(){t.data.sort(function(a,b){return d3.ascending(a[u.labelField],b[u.labelField])}),D=d3.min(t.data,function(a){return new Date(a[u.startField])}),E=d3.max(t.data,function(a){return u.endField?new Date(a[u.endField]):new Date(a[u.startField])}),F=E.diff(D),F>365?(D=d3.timeMonth.offset(D,-1),E=d3.timeMonth.offset(E,1)):F<1?(D=d3.timeDay.offset(D,-1),E=d3.timeDay.offset(E,1)):(D=d3.timeDay.offset(D,-1),E=d3.timeDay.offset(E,1)),t.data.forEach(function(b,c){I=b[u.labelField],G.indexOf(I)===-1&&G.push(I),I!==H?J[I]?J[I].push(a.clone(b)):(J[I]=[],J[I].push(a.clone(b))):J[I].push(a.clone(b)),H=I}),O=c(!1),Q=c(!0),U=A/t.data.length,K.domain([D,E]),M.domain(G),L.domain(K.domain()),N.domain(M.domain())}function e(a,b){var c=0;return J[a].forEach(function(a,d){u.dateEndField?b[u.startField]==a[u.startField]&&b[u.endField]==a[u.endField]&&b[u.groupField]==a[u.groupField]&&(c=d):b[u.startField]==a[u.startField]&&b[u.groupField]==a[u.groupField]&&(c=d)}),c}function f(a){return I=a[u.labelField],$=e(I,a),X=K(new Date(a[u.startField])),Y=M(a[u.labelField])+U*$,"translate("+(isNaN(X)?0:X)+","+Y+")"}function g(a){return X=L(new Date(a[u.startField])),Y=N(a[u.labelField]),"translate("+(isNaN(X)?0:X)+","+Y+")"}function h(a,b){return u.groupField?(t.legendValues.forEach(function(b,c){a[u.groupField]===b.value&&(Z=b.color)}),Z):u.color}function i(){_.append("defs").append("clipPath").attr("id","eve-timeline-clip").append("rect").attr("width",C).attr("height",A),p=_.append("g").attr("class","eve-timeline-base").attr("width",C).attr("transform","translate("+y.left+","+y.top+")"),q=_.append("g").attr("class","eve-timeline-context").attr("width",C).attr("transform","translate("+z.left+","+z.top+")")}function j(){r=p.append("g").selectAll(".eve-timeline-base-content").data(t.data).enter().append("rect").attr("class","eve-timeline-base-content").attr("transform",f).style("fill",h).attr("height",u.endField?U:V).attr("rx",u.endField?U/2:0).attr("ry",u.endField?U/2:0).attr("width",function(a){return u.endField?(W=Math.abs(K(new Date(a[u.endField]))-K(new Date(a[u.startField]))),isNaN(W)?0:W):V}).on("mousemove",function(a,b){t.showTooltip(t.getContent(a,u,t.tooltip.format))}).on("mouseout",function(a,b){t.hideTooltip()}),s=q.append("g").selectAll(".eve-timeline-lane-content").data(t.data).enter().append("rect").attr("class","eve-timeline-lane-content").attr("transform",g).style("fill",h).style("fill-opacity",.1).attr("rx",u.endField?V/2:0).attr("ry",u.endField?V/2:0).attr("height",V).attr("width",function(a){return u.endField?(W=Math.abs(L(new Date(a[u.endField]))-L(new Date(a[u.startField]))),isNaN(W)?0:W):V})}function k(){S.selectAll(".domain").style("stroke","none").style("stroke-width","0px"),S.selectAll("line").style("stroke-opacity",t.xAxis.gridLineThickness).style("stroke-width",t.xAxis.gridLineAlpha).style("stroke-dasharray","2,2").style("stroke",t.xAxis.gridLineColor),P.selectAll("path").style("stroke-opacity",t.xAxis.alpha).style("stroke-width",t.xAxis.thickness+"px").style("stroke",t.xAxis.color),P.selectAll("line").style("fill","none").style("stroke-width",t.xAxis.thickness+"px").style("shape-rendering","crispEdges").style("stroke-opacity",t.xAxis.alpha).style("stroke",t.xAxis.color),P.selectAll("text").style("fill",t.xAxis.labelFontColor).style("font-size",t.xAxis.labelFontSize+"px").style("font-family",t.xAxis.labelFontFamily+", Arial, Helvetica, Ubuntu").style("font-style","bold"===t.xAxis.labelFontStyle?"normal":t.xAxis.labelFontStyle).style("font-weight","bold"===t.xAxis.labelFontStyle?"bold":"normal")}function l(){S=p.append("g").attr("class","eve-x-grid").attr("transform","translate(0,"+A+")").call(c(!1).tickSize(-A,0,0).tickFormat("")),P=p.append("g").style("fill","none").style("shape-rendering","crispEdges").attr("class","eve-timeline-x-axis-base").attr("transform","translate(0,"+A+")").call(O),R=q.append("g").style("fill","none").style("shape-rendering","crispEdges").attr("class","eve-timeline-x-axis-base").attr("transform","translate(0,"+B+")").call(Q),R.selectAll("path").style("stroke-opacity",t.xAxis.alpha).style("stroke-width",t.xAxis.thickness+"px").style("stroke",t.xAxis.color),R.selectAll("line").style("fill","none").style("stroke-width",t.xAxis.thickness+"px").style("shape-rendering","crispEdges").style("stroke-opacity",t.xAxis.alpha).style("stroke",t.xAxis.color),R.selectAll("text").style("fill",t.xAxis.labelFontColor).style("font-size",t.xAxis.labelFontSize+"px").style("font-family",t.xAxis.labelFontFamily+", Arial, Helvetica, Ubuntu").style("font-style","bold"===t.xAxis.labelFontStyle?"normal":t.xAxis.labelFontStyle).style("font-weight","bold"===t.xAxis.labelFontStyle?"bold":"normal"),k()}function m(){T=d3.brushX().extent([[0,0],[C,B]]).on("brush end",n);var a=K.range(),b=a[1]-a[0],c=b/2,d=b/x,e=c-d,f=c+d;q.append("g").attr("class","eve-x-brush").call(T).call(T.move,[e,f]).selectAll("rect").attr("y",0).attr("height",B)}function n(){var a=d3.event.selection||L.range();K.domain(a.map(L.invert,L)),r.attr("transform",f).attr("rx",u.endField?U/2:0).attr("ry",u.endField?U/2:0).attr("width",function(a){
return u.endField?(W=Math.abs(K(new Date(a[u.endField]))-K(new Date(a[u.startField]))),isNaN(W)?0:W):V}),P.call(O),S.call(c().tickSize(-A,0,0).tickFormat("")),k()}function o(){d(),i(),j(),l(),m()}var p,q,r,s,t=eve.base.init(b),u=t.series[0],v=t.plot.height-t.plot.top-t.plot.bottom-t.margin.bottom-t.margin.top,w=v/4,x=10,y={top:0,left:0,right:t.plot.right,bottom:w},z={top:v-w+2*t.xAxis.labelFontSize,left:0,right:t.plot.right,bottom:0},A=v-y.top-y.bottom,B=v-z.top-z.bottom-2*t.xAxis.labelFontSize+x,C=t.plot.width-t.plot.left-t.plot.right-t.margin.right-t.margin.left,D=null,E=null,F=null,G=[],H="",I="",J={},K=d3.scaleUtc().range([0,C]),L=d3.scaleUtc().range([0,C]),M=d3.scaleBand().range([A,0]).padding(.1),N=d3.scaleBand().range([B,0]).padding(.1),O=null,P=null,Q=null,R=null,S=null,T=null,U=A/t.data.length,V=4,W=0,X=0,Y=0,Z=u.color,$=0,_=t.svg.append("g").attr("transform","translate("+t.plot.left+","+t.plot.top+")").attr("width",C);return o(),t.update=function(a){t.data=a,t.updateLegend(),_.selectAll("*").remove(),o()},t.toCanvas=function(){var a=document.getElementById(t.container);return new Promise(function(b){html2canvas(a).then(function(a){b(a)})})},t.toImage=function(){var a=document.getElementById(t.container);return new Promise(function(b){html2canvas(a).then(function(a){b(a.toDataURL("image/png"))})})},t}a.timeline=function(a){return a.type="grouped",new b(a)}}(eve),function(a){function b(a){function b(){i=e.plot.width-e.plot.left-e.plot.right,j=e.plot.height-e.plot.top-e.plot.bottom-g,k=d3.scaleLinear().domain([0,i]).range([0,i]),l=d3.scaleLinear().domain([0,j]).range([g,j]),m=d3.scaleLinear().range(e.legend.gradientColors).domain(e.domains.y),h=d3.rgb(e.legend.gradientColors[e.legend.gradientColors.length-1]).darker(),n=d3.treemap().size([i,j]).tile(f.tileType.toTileType()).paddingInner(0).round(!0),p=r=e.data,q=d3.hierarchy(r).sum(function(a){return a[f.sizeField]}).sort(function(a,b){return b.value-a.value}),n(q)}function c(){s.transition(e.animation.duration).ease(e.animation.easing.toEasing()).delay(function(a,b){return b*e.animation.delay}).style("fill",function(a){for(;a.depth>1;)a=a.parent;return m(a.value)}).attr("transform",function(a){return v=k(a.x0),w=l(a.y0),"translate("+v+","+w+")"}).attr("width",function(a){return k(a.x1-a.x0)}).attr("height",function(a){return l(a.y1-a.y0)})}function d(){o=x.append("g").attr("class","grandparent"),o.append("rect").attr("y",0).attr("width",i).attr("height",g).style("fill",h).style("fill-opacity",1),o.append("text").attr("x",6).attr("y",(g-11)/2).attr("dy",".75em").style("font-family","Tahoma").style("font-size",11).style("fill","#FFFFFF").text("Treemap"),s=x.selectAll(".eve-treemap-node").data(q.descendants()).enter().append("rect").attr("class",function(a){return"eve-treemap-node eve-treemap-node-level-"+a.depth}).style("stroke","#fff").style("stroke-width",function(a){return 1/(a.depth+1)}).style("fill","#fff").attr("transform",function(a){return v=k(a.x0),w=g,"translate("+v+","+w+")"}).attr("width",function(a){return k(a.x1-a.x0)}).attr("height",function(a){return l(0)}).on("mousemove",function(a,b){e.showTooltip(e.getContent(a,f,e.tooltip.format))}).on("mouseout",function(a,b){e.hideTooltip()}),t=x.selectAll(".eve-treemap-text").data(q.descendants()).enter().append("text").attr("class",function(a){return"eve-treemap-text eve-treemap-text-level-"+a.depth}).style("fill",f.labelFontColor).style("font-size",f.labelFontSize).style("font-family",f.labelFontFamily).style("font-style","bold"===f.labelFontStyle?"normal":f.labelFontStyle).style("font-weight","bold"===f.labelFontStyle?"bold":"normal").attr("text-anchor","start").text(function(a){return a.depth===u&&a.data[f.labelField]?a.data[f.labelField]:""}).attr("transform",function(a){return v=k(a.x0)+k(a.x1-a.x0)/2-this.getBBox().width/2,w=l(a.y0)+l(a.y1-a.y0)/2,"translate("+v+","+w+")"})}var e=eve.base.init(a),f=e.series[0],g=25,h="",i=0,j=0,k=null,l=null,m=null,n=null,o=null,p=null,q=null,r=null,s=null,t=null,u=1,v=0,w=0;b();var x=e.svg.append("g").style("fill","#fff").attr("transform","translate("+e.plot.left+","+e.plot.top+")");return d(),c(),e.update=function(a){e.data=a,b(),e.updateTreeDomain(),e.updateLegend(),s.data(q.descendants()).exit().remove(),t.data(q.descendants()).exit().remove(),c()},e.toCanvas=function(){var a=document.getElementById(e.container);return new Promise(function(b){html2canvas(a).then(function(a){b(a)})})},e.toImage=function(){var a=document.getElementById(e.container);return new Promise(function(b){html2canvas(a).then(function(a){b(a.toDataURL("image/png"))})})},e}a.treemap=function(a){return a.type="tree",new b(a)}}(eve),function(a){function b(b){function c(){l=f.plot.width-f.plot.left-f.plot.right-f.margin.left-f.margin.right,o=f.plot.height-f.plot.top-f.plot.bottom-f.margin.bottom-f.margin.top,m=d3.scaleLinear().range(f.legend.gradientColors).domain(f.domains.y),f.data.forEach(function(b){h=+b[g.measureField],i=f.legend.enabled?m(h):a.randColor(),j=a.randInt(-90,90),k=g.minFontSize+h/f.domains.y[1]*g.maxFontSize,b.fontSize=k,b.fontColor=i,b.angle=j})}function d(){d3.layout.cloud().size([l,o]).words(f.data.map(function(a){return{text:a[g.sourceField],size:parseFloat(a.fontSize),value:+a[g.measureField],color:a.fontColor,angle:a.angle,opacity:1}})).padding(5).rotate(function(){return 90*~~(2*Math.random())}).font(g.fontFamily).fontSize(function(a){return a.size}).on("end",e).start()}function e(a){n=p.selectAll("text").data(a).enter().append("text").style("font-size",function(a){return a.size+"px"}).style("font-family",g.fontFamily).style("cursor","pointer").style("fill",function(a,b){return a.color}).attr("text-anchor","middle").attr("transform",function(a){return"translate("+[0,0]+")rotate(0)"}).on("mousemove",function(a,b){f.showTooltip(f.getContent(a,g,f.tooltip.format))}).on("mouseout",function(a,b){f.hideTooltip()}).text(function(a){return a.text}),n.transition(f.animation.duration).ease(f.animation.easing.toEasing()).style("font-size",function(a){return a.size+"px"}).style("fill",function(a,b){return a.color}).attr("transform",function(a){return"translate("+[a.x,a.y]+")rotate("+a.rotate+")"})}var f=eve.base.init(b),g=f.series[0],h=0,i=a.colors[0],j=0,k=0,l=0,m=null,n=null,o=0;c();var p=f.svg.append("g").attr("transform","translate("+l/2+","+o/2+")");return d(),f.update=function(a){f.data=a,f.updateStandardDomain(),f.updateLegend(),c(),p.attr("transform","translate("+l/2+","+o/2+")"),n.remove(),d()},f.toCanvas=function(){var a=document.getElementById(f.container);return new Promise(function(b){html2canvas(a).then(function(a){b(a)})})},f.toImage=function(){var a=document.getElementById(f.container);return new Promise(function(b){html2canvas(a).then(function(a){b(a.toDataURL("image/png"))})})},f}a.wordCloud=function(a){return a.type="standard",new b(a)}}(eve);
//# sourceMappingURL=sourceMap.map