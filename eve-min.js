/*!
 * eve charts
 * https://github.com/eveui/eve
 *
 * Copyright 2015, Ismail Ozdemir
 * Released under the MIT license
 * https://github.com/eveui/eve/blob/master/LICENSE
 *
 * Date: 2015-04-09 09:15 AM (EST)
 *
 * DEFINITION
 * EVE Chart library classes.
 */

(function(){var eve={colors:["#83AA30","#1499D3","#4D6684","#3D3D3D","#B9340B","#CEA45C","#C5BE8B","#498379","#3F261C","#E74700","#F1E68F","#FF976F","#FF6464","#554939","#706C4D"]};eve.setLocale=function(e){var t="locales/"+e+".json";-1==e.indexOf(".json")&&(t=e),d3.json(t,function(){eve.consts=arguments[1]})},eve.setColors=function(e){eve.colors=e},eve.getType=function(e){var t=typeof e,l="null";if(null===e)return"null";if(void 0===e)return"undefined";switch(t){case"string":case"number":case"boolean":case"function":l=t;break;default:if("undefined"==typeof e.getMonth)if("[object Array]"===Object.prototype.toString.call(e))l="array";else if("[object Function]"===Object.prototype.toString.call(e))l="function";else if("[object NodeList]"===Object.prototype.toString.call(e))l="nodeList";else if("[object Object]"===Object.prototype.toString.call(e))l="object";else{var n="object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName;l=n?"htmlElement":"wtf"}else l="date"}return l},eve.randInt=function(e,t){if(null==e&&(e=0),null==t&&(t=1),e>=t)throw Error("Max argument should be greater than min argument!");return Math.floor(Math.random()*(t-e+1))+e},eve.randColor=function(){for(var e="0123456789ABCDEF".split(""),t="#",l=0;6>l;l++)t+=e[Math.floor(16*Math.random())];return t},eve.clone=function(e){var t,l=eve.getType(e);if("array"===l)t=[],e.forEach(function(e){t.push(eve.clone(e))});else if("object"===l){t={};for(var n in e)t[n]=e[n]}else t=e;return t},eve.isPrime=function(e){if(isNaN(e)||!isFinite(e)||e%1||2>e)return!1;if(e%2===0)return 2==e;for(var t=Math.sqrt(e),l=3;t>=l;l+=2)if(e%l===0)return!1;return!0},eve.getPrimeFactors=function(e){if(isNaN(e)||!isFinite(e))return[];var t=Math.sqrt(e),l=arguments[1]||[],n=2;if(e%n)for(n=3;e%n&&(n+=2)<t;);return n=t>=n?n:e,l.push(n),n===e?l:eve.getPrimeFactors(e/n,l)},eve.extend=function(sub,base){function extended(){}if(extended.prototype=base.prototype,"function"===eve.getType(sub)&&"function"===eve.getType(base)){for(var key in base)eval("sub."+key+" = base."+key);return sub}if("object"===eve.getType(sub)&&"object"===eve.getType(base)){for(var key in base){var baseType=eve.getType(base[key]);"object"===baseType?sub[key]?eve.extend(sub[key],base[key]):sub[key]=base[key]:null==sub[key]&&(sub[key]=base[key])}return sub}},eve.queryString=function(e){if(0===arguments.length)return"";e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)"),l=t.exec(window.location.search);return null===l?"":decodeURIComponent(l[1].replace(/\+/g," "))},eve.offset=function(e){var t={width:0,height:0,left:0,top:0};if(null==e)return t;if("htmlElement"!==eve.getType(e))return t;if(e.getBoundingClientRect){var l=e.getBoundingClientRect();t.width=l.width,t.height=l.height,t.left=l.left,t.top=l.top}else t.width=null==e.offsetWidth?0:parseFloat(e.offsetWidth),t.height=null==e.offsetHeight?0:parseFloat(e.offsetHeight),t.left=null==e.offsetLeft?0:parseFloat(e.offsetLeft),t.top=null==e.offsetTop?0:parseFloat(e.offsetTop);return t},eve.appendHTML=function(e,t){if(null!=e&&null!=t&&"string"===eve.getType(t)){var l=eve.getType(e),n=e,r=null;if(!("string"!==l&&"htmlElement"!==l||"string"===l&&(n=document.getElementById(e),null==n))){r=document.createElement("div"),r.innerHTML=t;for(var a=0;a<r.childNodes.length;a++)n.appendChild(r.childNodes[a]);try{document.removeChild(r)}catch(i){}}}},String.prototype.replaceAll=function(e,t){return this.replace(new RegExp(e,"g"),t)},Date.prototype.diff=function(e){return(this.getTime()-e.getTime())/864e5},Date.prototype.addHours=function(e){return this.setHours(this.getHours()+e)},Array.prototype.max||(Array.prototype.max=function(){return Math.max.apply(null,this)}),Array.prototype.min||(Array.prototype.min=function(){return Math.min.apply(null,this)}),"undefined"!=typeof amd?define(function(){return eve}):"object"==typeof module&&module.exports?module.exports=eve:window.eve=eve}).call(this),function(e){function t(n,r){var a=n?e.extend(n,l):l,i=this,o=null,s=null,u=null,c=a.container;for(var d in a)i[d]=a[d];if(null==i.container||""==i.container)throw Error("Chart container could not found!");if(null==i.data)throw new Error("Could not found chart data!");"string"===e.getType(c)&&(c=document.getElementById(c)),c.innerHTML="",s=c.parentNode,o=e.offset(s),"auto"===i.width&&(i.width=o.width),"auto"===i.height&&(i.height=o.height),i.aspectRatio=i.width/i.height,i.balloon.enabled&&(eve.appendHTML(document.body,'<div id="'+i.container+'_balloon" style="position: absolute; display: none; z-index: 1000; box-shadow: 0 3px 6px rgba(0, 0, 0, .15)"></div>'),u=document.getElementById(i.container+"_balloon"),u.style.backgroundColor=i.balloon.backColor,u.style.borderStyle=i.balloon.borderStyle,u.style.borderColor=i.balloon.borderColor,u.style.borderRadius=i.balloon.borderRadius+"px",u.style.borderWidth=i.balloon.borderSize+"px",u.style.color=i.balloon.fontColor,u.style.fontFamily=i.balloon.fontFamily,u.style.fontSize=i.balloon.fontSize+"px",u.style.paddingLeft=i.balloon.padding+"px",u.style.paddingTop=i.balloon.padding+"px",u.style.paddingRight=i.balloon.padding+"px",u.style.paddingBottom=i.balloon.padding+"px","bold"==i.balloon.fontStyle?u.style.fontWeight="bold":u.style.fontStyle=i.balloon.fontStyle),i.svg=d3.select(c).append("svg").attr("id",i.container+"_svg").attr("viewBox","0 0 "+i.width+" "+i.height).attr("preserveAspectRatio","xMidYMid").attr("width",i.width).attr("height",i.height).attr("fill",i.backColor).append("g"),t.zoomable&&i.svg.append("rect").attr("fill",i.backColor).attr("width",i.width).attr("height",i.height),i.showBalloon=function(t,l,n){null!=t&&("string"!==e.getType(t)&&(t=t.toString()),null==l&&(l=parseInt(d3.event.pageX+5)),null==n&&(n=parseInt(d3.event.pageY+5)),i.balloon.enabled&&null!=u&&(u.innerHTML=t,u.style.left=l+"px",u.style.top=n+"px",u.style.display="block"))},i.hideBalloon=function(){i.balloon.enabled&&null!=u&&(u.style.display="none")},i.getSlicedFormat=function(e,t,l){var n="",r=i.data[e],a=d3.sum(i.data,function(e){return e[t.valueField]}),o=null==r[t.valueField]?0:r[t.valueField],s=(o/a*100).toFixed(2),u=d3.format();switch(null==l&&(l="balloon"),l){case"label":""!==t.numberFormat&&(u=d3.format(t.numberFormat)),n=t.labelFormat;break;case"balloon":""!==i.balloon.numberFormat&&(u=d3.format(i.balloon.numberFormat)),n=i.balloon.format}return t.titleField&&(n=n.replaceAll("{title}",r[t.titleField])),t.valueField&&(n=n.replaceAll("{value}",u(o))),t.alphaField&&(n=n.replaceAll("{alpha}",r[t.alphaField])),t.colorField&&(n=n.replaceAll("{color}",r[t.colorField])),null!=a&&(n=n.replaceAll("{total}",u(a))),null!=s&&(n=n.replaceAll("{percent}",s+"%")),n},i.getXYFormat=function(t,l,n){var r="",a=d3.format(),o=d3.time.format("%m/%d/%Y"),s=t.xValue,u=t.yValue,c=t.sizeValue;switch(null==n&&(n="balloon"),n){case"label":""!==l.numberFormat&&(a=d3.format(l.numberFormat)),""!==l.dateFormat&&(o=d3.format(l.dateFormat)),r=l.labelFormat;break;case"balloon":""!==i.balloon.numberFormat&&(a=d3.format(i.balloon.numberFormat)),""!==i.balloon.dateFormat&&(o=d3.time.format(i.balloon.dateFormat)),r=i.balloon.format}return null!=s&&("date"===e.getType(s)?(r=r.replaceAll("{x}",o(s)),r=r.replaceAll("{title}",o(s))):"number"===e.getType(s)?(r=r.replaceAll("{x}",a(s)),r=r.replaceAll("{title}",a(s))):(r=r.replaceAll("{x}",s),r=r.replaceAll("{title}",s))),isNaN(parseFloat(u))||(r=r.replaceAll("{y}",a(u)),r=r.replaceAll("{value}",a(u))),isNaN(parseFloat(c))||(r=r.replaceAll("{size}",a(c))),t.name&&(r=r.replaceAll("{serie}",t.name)),r}}var l={animationDuration:500,balloon:{backColor:"#ffffff",borderColor:"#61c9f6",borderRadius:3,borderSize:1,borderStyle:"solid",enabled:!0,fontColor:"#333333",fontFamily:"Tahoma",fontSize:12,fontStyle:"normal",format:"",opacity:.9,padding:10,dateFormat:"",numberFormat:""},backColor:"#ffffff",container:null,data:null,legend:{enabled:!0,fontColor:"#333333",fontFamily:"Tahoma",fontSize:12,fontStyle:"normal",icon:"square",position:"right"},series:[],title:{text:"",fontColor:"#333333",fontFamily:"Tahoma",fontSize:13,fontStyle:"bold"},trends:[],width:"auto",height:"auto",xField:"",xAxis:{alpha:1,color:"#cccccc",gridLineColor:"#cccccc",gridLineThickness:.5,gridLineAlpha:.5,labelAngle:0,labelFontColor:"#999999",labelFontFamily:"Tahoma",labelFontSize:10,labelFontStyle:"normal",labelFormat:"",startsFromZero:!0,tickCount:10,title:"",titleFontColor:"#666666",titleFontFamily:"Tahoma",titleFontSize:11,titleFontStyle:"bold",thickness:1},yAxis:{alpha:1,color:"#cccccc",gridLineColor:"#cccccc",gridLineThickness:.5,gridLineAlpha:.5,labelAngle:0,labelFontColor:"#999999",labelFontFamily:"Tahoma",labelFontSize:10,labelFontStyle:"normal",labelFormat:"",startsFromZero:!0,tickCount:10,title:"",titleFontColor:"#666666",titleFontFamily:"Tahoma",titleFontSize:11,titleFontStyle:"bold",thickness:1,stacked:!0},zoomable:!1};e.charts={init:function(e,l){return new t(e,l)}}}(eve),function(e){function t(t){function l(){return d3.svg.axis().scale(d.x).orient("bottom").ticks(t.xAxis.tickCount)}function n(){return d3.svg.axis().scale(d.y).orient("left").ticks(t.yAxis.tickCount)}function r(){if(t.legend.enabled){t.svg.selectAll(".eve-legend-text").data(t.series).enter().append("g").append("text").attr("class","eve-legend-text").style("cursor","pointer").style("fill",t.legend.fontColor).style("font-weight","bold"==t.legend.fontStyle?"bold":"normal").style("font-style","bold"==t.legend.fontStyle?"normal":t.legend.fontStyle).style("font-family",t.legend.fontFamily).style("font-size",t.legend.fontSize+"px").text(function(e,l){return""===t.series[l].title?t.series[l].yField:t.series[l].title}).style("text-anchor",function(e){var l=this.getBBox().width+t.legend.fontSize;return l>y&&(y=l),"left"}).attr("transform",function(e,l){var n=t.width-y,r=(t.height-x)/2+(t.legend.fontSize+5)*l;return"translate("+n+","+r+")"}).on("click",function(e,l){switch(e.selected?e.selected=!1:e.selected=!0,e.type){case"line":var n=t.svg.selectAll(".eve-line-serie-"+l),r=t.svg.selectAll(".eve-line-point-"+l);e.selected?(t.svg.selectAll(".eve-series path").style("stroke-opacity",.1),n.style("stroke-width",e.strokeSize+2),n.style("stroke-opacity",1),r.style("stroke-opacity",1)):(t.svg.selectAll(".eve-series path").style("stroke-opacity",1),n.style("stroke-opacity",e.lineAlpha),n.style("stroke-width",e.strokeSize));break;case"scatter":var a=t.svg.selectAll(".eve-series path.eve-scatter-point"),r=t.svg.selectAll(".eve-scatter-point-"+l);e.selected?(a.style("stroke-opacity",.1),a.style("fill-opacity",.1),r.style("stroke-opacity",e.bulletStrokeAlpha),r.style("fill-opacity",e.bulletAlpha)):(a.style("stroke-opacity",e.bulletStrokeAlpha),a.style("fill-opacity",e.bulletAlpha));break;case"bubble":var a=t.svg.selectAll(".eve-series path.eve-bubble-point"),r=t.svg.selectAll(".eve-bubble-point-"+l);e.selected?(a.style("stroke-opacity",.1),a.style("fill-opacity",.1),r.style("stroke-opacity",e.bulletStrokeAlpha),r.style("fill-opacity",e.bulletAlpha)):(a.style("stroke-opacity",e.bulletStrokeAlpha),a.style("fill-opacity",e.bulletAlpha));break;case"area":var a=t.svg.selectAll(".eve-series path.eve-area-serie"),n=t.svg.selectAll(".eve-area-serie-"+l);t.svg.selectAll(".eve-area-point-"+l);e.selected?(n.style("stroke-width",e.strokeSize+2),a.style("stroke-opacity",.1),a.style("fill-opacity",.1),n.style("stroke-width",e.strokeSize),n.style("fill-opacity",e.alpha)):(a.style("stroke-opacity",e.strokeSize),a.style("fill-opacity",e.alpha));break;case"bar":var a=t.svg.selectAll(".eve-series rect"),n=t.svg.selectAll(".eve-bar-serie-"+l);e.selected?(a.style("stroke-opacity",.1),a.style("fill-opacity",.1),n.style("stroke-opacity",e.alpha),n.style("fill-opacity",e.alpha)):(a.style("stroke-opacity",e.alpha),a.style("fill-opacity",e.alpha))}t.legendClick&&t.legendClick(e,l)});t.svg.selectAll(".eve-legend-icon").data(t.series).enter().append("g").append("path").attr("d",d3.svg.symbol().type(t.legend.icon).size(C)).attr("class","eve-legend-icon").style("cursor","pointer").style("fill",function(t,l){return""!==t.color?t.color:l<=e.colors.length?e.colors[l]:e.randColor()}).attr("transform",function(e,l){var n=this.getBBox(),r=t.width-y-10,a=(t.height-x)/2+(n.height+5)*l-5;return"translate("+r+","+a+")"}).on("click",function(e,l){switch(e.selected?e.selected=!1:e.selected=!0,e.type){case"line":var n=t.svg.selectAll(".eve-line-serie-"+l),r=t.svg.selectAll(".eve-line-point-"+l);e.selected?(t.svg.selectAll(".eve-series path").style("stroke-opacity",.1),n.style("stroke-width",e.strokeSize+2),n.style("stroke-opacity",1),r.style("stroke-opacity",1)):(t.svg.selectAll(".eve-series path").style("stroke-opacity",1),n.style("stroke-opacity",e.lineAlpha),n.style("stroke-width",e.strokeSize));break;case"scatter":var a=t.svg.selectAll(".eve-series path.eve-scatter-point"),r=t.svg.selectAll(".eve-scatter-point-"+l);e.selected?(a.style("stroke-opacity",.1),a.style("fill-opacity",.1),r.style("stroke-opacity",e.bulletStrokeAlpha),r.style("fill-opacity",e.bulletAlpha)):(a.style("stroke-opacity",e.bulletStrokeAlpha),a.style("fill-opacity",e.bulletAlpha));break;case"bubble":var a=t.svg.selectAll(".eve-series path.eve-bubble-point"),r=t.svg.selectAll(".eve-bubble-point-"+l);e.selected?(a.style("stroke-opacity",.1),a.style("fill-opacity",.1),r.style("stroke-opacity",e.bulletStrokeAlpha),r.style("fill-opacity",e.bulletAlpha)):(a.style("stroke-opacity",e.bulletStrokeAlpha),a.style("fill-opacity",e.bulletAlpha));break;case"area":var a=t.svg.selectAll(".eve-series path.eve-area-serie"),n=t.svg.selectAll(".eve-area-serie-"+l);t.svg.selectAll(".eve-area-point-"+l);e.selected?(n.style("stroke-width",e.strokeSize+2),a.style("stroke-opacity",.1),a.style("fill-opacity",.1),n.style("stroke-width",e.strokeSize),n.style("fill-opacity",e.alpha)):(a.style("stroke-opacity",e.strokeSize),a.style("fill-opacity",e.alpha));break;case"bar":var a=t.svg.selectAll(".eve-series rect"),n=t.svg.selectAll(".eve-bar-serie-"+l);e.selected?(a.style("stroke-opacity",.1),a.style("fill-opacity",.1),n.style("stroke-opacity",e.alpha),n.style("fill-opacity",e.alpha)):(a.style("stroke-opacity",e.alpha),a.style("fill-opacity",e.alpha))}t.legendClick&&t.legendClick(e,l)});b-=y+t.legend.fontSize}}function a(){f?(""!==t.xAxis.title&&t.svg.append("g").append("text").text(t.xAxis.title).style("fill",t.xAxis.titleFontColor).style("font-family",t.xAxis.titleFontFamily).style("font-size",t.xAxis.titleFontSize+"px").style("font-style","bold"===t.xAxis.titleFontStyle?"normal":t.xAxis.titleFontStyle).style("font-weight","bold"===t.xAxis.titleFontStyle?"bold":"normal").style("text-anchor","middle").attr("x",function(e){var l=this.getBBox();return(t.width-y-l.width)/2+Math.sqrt(C)/2}).attr("y",function(e){var l=this.getBBox();return g-=l.height,t.height-l.height}),""!==t.yAxis.title&&t.svg.append("g").append("text").text(t.yAxis.title).style("fill",t.yAxis.titleFontColor).style("font-family",t.yAxis.titleFontFamily).style("font-size",t.yAxis.titleFontSize+"px").style("font-style","bold"===t.yAxis.titleFontStyle?"normal":t.yAxis.titleFontStyle).style("font-weight","bold"===t.yAxis.titleFontStyle?"bold":"normal").style("text-anchor","middle").attr("transform",function(e){var l=this.getBBox();return p+=l.height,b-=l.height,"translate(0,"+(t.height/2-l.height/2)+")rotate(-90)"})):(""!==t.xAxis.title&&t.svg.append("g").append("text").text(t.xAxis.title).style("fill",t.xAxis.titleFontColor).style("font-family",t.xAxis.titleFontFamily).style("font-size",t.xAxis.titleFontSize+"px").style("font-style","bold"===t.xAxis.titleFontStyle?"normal":t.xAxis.titleFontStyle).style("font-weight","bold"===t.xAxis.titleFontStyle?"bold":"normal").style("text-anchor","middle").attr("x",function(e){var l=this.getBBox();return(t.width-y-l.width)/2+Math.sqrt(C)/2}).attr("y",function(e){var l=this.getBBox();return g-=l.height,t.height-l.height}),""!==t.yAxis.title&&t.svg.append("g").append("text").text(t.yAxis.title).style("fill",t.yAxis.titleFontColor).style("font-family",t.yAxis.titleFontFamily).style("font-size",t.yAxis.titleFontSize+"px").style("font-style","bold"===t.yAxis.titleFontStyle?"normal":t.yAxis.titleFontStyle).style("font-weight","bold"===t.yAxis.titleFontStyle?"bold":"normal").style("text-anchor","middle").attr("transform",function(e){var l=this.getBBox();return p+=l.height,b-=l.height,"translate(0,"+(t.height/2-l.height/2)+")rotate(-90)"}))}function i(){switch("date"===F?d.x=d3.time.scale().range([0,b]):"string"===F?d.x=d3.scale.ordinal().rangeRoundBands([0,b],.1):d.x=d3.scale.linear().range([0,b]),f?(d.x=d3.scale.linear().range([0,b]),"date"===F?d.y=d3.time.scale().range([g,0]):"string"===F?d.y=d3.scale.ordinal().rangeRoundBands([g,0],.1):d.y=d3.scale.linear().range([g,0])):d.y=d3.scale.linear().range([g,0]),d.xAxis=l(),d.yAxis=n(),F){case"date":var e=d3.min(t.data,function(e){return e[t.xField]}),r=d3.max(t.data,function(e){return e[t.xField]});f?d.y.domain([e,r]):d.x.domain([e,r]);break;case"string":var a=t.data.map(function(e){return e[t.xField].toString()});a.sort(),f?d.y.domain(a):d.x.domain(a);break;default:var e=t.xAxis.startsFromZero?0:d3.min(t.data,function(e){return e[t.xField]}),r=d3.max(t.data,function(e){return e[t.xField]});f?d.y.domain([e,t.xAxis.startsFromZero?r+1:r]):d.x.domain([e,t.xAxis.startsFromZero?r+1:r])}f?d.x.domain(k):d.y.domain(k),u=t.svg.append("g").attr("class","eve-x-grid").attr("transform",function(){return"translate("+p+", "+g+")"}).call(l().tickSize(-g,0,0).tickFormat("")),u.selectAll("line").style("stroke-opacity",t.xAxis.gridLineAlpha).style("stroke-width",t.xAxis.gridLineThickness+"px").style("stroke",t.xAxis.gridLineColor),c=t.svg.append("g").attr("class","eve-y-grid").attr("transform",function(){return"translate("+p+")"}).call(n().tickSize(-b,0,0).tickFormat("")),c.selectAll("line").style("stroke-opacity",t.yAxis.gridLineAlpha).style("stroke-width",t.yAxis.gridLineThickness+"px").style("stroke",t.yAxis.gridLineColor),s=t.svg.append("g").style("fill","none").style("stroke",t.yAxis.color).style("stroke-width",t.yAxis.thickness+"px").style("shape-rendering","crispEdges").attr("transform","translate("+p+")").attr("class","eve-y-axis").call(d.yAxis),s.selectAll("line").style("fill","none").style("stroke-width",t.yAxis.thickness+"px").style("shape-rendering","crispEdges").style("stroke-opacity",t.yAxis.alpha).style("stroke",t.yAxis.color),s.selectAll("text").style("fill",t.yAxis.labelFontColor).style("font-size",t.yAxis.labelFontSize+"px").style("font-family",t.yAxis.labelFontFamily).style("font-style","bold"===t.yAxis.labelFontStlye?"normal":t.yAxis.labelFontStlye).style("font-weight","bold"===t.yAxis.labelFontStlye?"bold":"normal").text(function(e){return f?"number"===F?d3.format(t.xAxis.labelFormat)(e):"date"===F?d3.time.format(t.xAxis.labelFormat)(e):e:d3.format(t.yAxis.labelFormat)(e)}).attr("transform",function(){var e=this.getBBox(),l=5,n=e.height/2;return 0!==t.yAxis.labelAngle&&45!==t.yAxis.labelAngle&&-45!==t.yAxis.labelAngle&&(t.yAxis.labelAngle=0),t.yAxis.labelAngle<0?"translate(-"+l+", -"+n+")rotate("+t.yAxis.labelAngle+")":t.yAxis.labelAngle>0?"translate(-"+l+", "+n+")rotate("+t.yAxis.labelAngle+")":"rotate("+t.yAxis.labelAngle+")"}).style("stroke-width","0px"),o=t.svg.append("g").style("fill","none").style("stroke",t.xAxis.color).style("stroke-width",t.xAxis.thickness+"px").style("shape-rendering","crispEdges").attr("transform","translate("+p+","+g+")").attr("class","eve-x-axis").call(d.xAxis),o.selectAll("line").style("fill","none").style("stroke-width",t.xAxis.thickness+"px").style("shape-rendering","crispEdges").style("stroke-opacity",t.xAxis.alpha).style("stroke",t.xAxis.color),o.selectAll("text").style("fill",t.xAxis.labelFontColor).style("font-size",t.xAxis.labelFontSize+"px").style("font-family",t.xAxis.labelFontFamily).style("font-style","bold"===t.xAxis.labelFontStlye?"normal":t.xAxis.labelFontStlye).style("font-weight","bold"===t.xAxis.labelFontStlye?"bold":"normal").text(function(e){return f?d3.format(t.yAxis.labelFormat)(e):"number"===F?d3.format(t.xAxis.labelFormat)(e):"date"===F?d3.time.format(t.xAxis.labelFormat)(e):e}).attr("transform",function(e){var l=this.getBBox(),n=l.height/2;return 0!==t.xAxis.labelAngle&&45!==t.xAxis.labelAngle&&-45!==t.xAxis.labelAngle&&(t.xAxis.labelAngle=0),t.xAxis.labelAngle<0?"translate(-"+l.width+", "+n+")rotate("+t.xAxis.labelAngle+")":t.xAxis.labelAngle>0?"translate("+l.width+", "+n+")rotate("+t.xAxis.labelAngle+")":"rotate("+t.xAxis.labelAngle+")"}).style("stroke-width","0px")}if(null==t||"object"!==e.getType(t))throw Error("Invalid chart data!");this.x=null,this.y=null,this.xAxis=null,this.yAxis=null,this.series=null,this.serieNames=[],this.xAxisDataType="numeric";var o,s,u,c,d=this,y=0,f="bar"===t.type,x=t.series.length*(t.legend.fontSize+5),p=0,h=0,b=t.width-2*t.yAxis.labelFontSize,g=t.height-2*t.xAxis.labelFontSize,m=0,v=0,F=e.getType(t.data[0][t.xField]),A=[],S=[],k=[];("bar"===t.type||"column"===t.type)&&(F="string"),this.xAxisDataType=F,p+=t.yAxis.titleFontSize,b-=t.yAxis.titleFontSize,h+=t.xAxis.titleFontSize,g-=2*t.xAxis.titleFontSize,t.svg.attr("transform","translate("+p+","+h+")"),t.series.forEach(function(e){d.serieNames.push(e.yField)}),d.series=d.serieNames.map(function(l,n){var r={name:l,serieType:t.series[n].type,values:t.data.map(function(r){var a=r[t.xField],i=t.series[n],o={};return o.name=l,o.index=n,o.serieType=i.type,o.xValue=a,i.yField&&"string"===e.getType(i.yField)&&""!==i.yField&&(o.yValue=parseFloat(r[l])),i.sizeField&&"string"===e.getType(i.sizeField)&&""!==i.sizeField&&(o.sizeValue=parseFloat(r[i.sizeField])),o})};return r});var m=d3.min(d.series,function(e){return d3.min(e.values,function(e){return parseFloat(e.yValue)})}),v=d3.max(d.series,function(e){return d3.max(e.values,function(e){return parseFloat(e.yValue)})});"area"===t.type?v=d3.sum(d.series,function(e){return d3.max(e.values,function(e){return parseFloat(e.yValue)})}):("bar"===t.type||"column"===t.type)&&t.yAxis.stacked&&(v=d3.sum(d.series,function(e){return d3.max(e.values,function(e){return parseFloat(e.yValue)})})),v*=1.25,m=t.yAxis.startsFromZero?0:m,d.series.forEach(function(e,l){if(A.push(d3.max(e.values,function(e){return parseFloat(e.yValue)})),S.push(d3.min(e.values,function(e){return parseFloat(e.yValue)})),null!=t.series[l].sizeField&&""!==t.series[l].sizeField){var n=d3.min(e.values,function(e){return parseFloat(e.sizeValue)}),r=d3.max(e.values,function(e){return parseFloat(e.sizeValue)});e.minSize=void 0===n?t.series[l].minBulletSize:n,e.maxSize=void 0===r?t.series[l].maxBulletSize:r}k.push(0),k.push(v)});var z=d3.max(A),w=S.min(),C=Math.pow(t.legend.fontSize,2);"area"===t.type?z=d3.sum(A):("bar"===t.type||"column"===t.type)&&t.yAxis.stacked&&(z=d3.sum(A));var B=z.toString().length*t.yAxis.labelFontSize/2;f&&(B=0,t.data.forEach(function(e){e[t.xField].toString().length>B&&(B=e[t.xField].toString().length*t.xAxis.labelFontSize/2+t.xAxis.titleFontSize)})),b-=B,p+=B,r(),a(),i(),this.offset={left:p,top:h,width:b,height:g},d.makeXAxis=function(){return l()},d.makeYAxis=function(){return n()},d.update=function(l){switch(null==l&&(l=t.data),k.length=[],S.length=[],A.length=[],d.series=d.serieNames.map(function(l,n){return{name:l,serieType:t.series[n].type,values:t.data.map(function(r){var a=r[t.xField],i=t.series[n],o={};return o.name=l,o.index=n,o.serieType=i.type,o.xValue=a,i.yField&&"string"===e.getType(i.yField)&&""!==i.yField&&(o.yValue=+parseFloat(r[l])),i.sizeField&&"string"===e.getType(i.sizeField)&&""!==i.sizeField&&(o.sizeValue=+parseFloat(r[i.sizeField])),o})}}),m=d3.min(d.series,function(e){return d3.min(e.values,function(e){return parseFloat(e.yValue)})}),v=d3.max(d.series,function(e){return d3.max(e.values,function(e){return parseFloat(e.yValue)})}),v*=1.1,m=t.yAxis.startsFromZero?0:m,d.series.forEach(function(e,l){if(A.push(d3.max(e.values,function(e){return parseFloat(e.yValue)})),S.push(d3.min(e.values,function(e){return parseFloat(e.yValue)})),null!=t.series[l].sizeField&&""!==t.series[l].sizeField){var n=d3.min(e.values,function(e){return parseFloat(e.sizeValue)}),r=d3.max(e.values,function(e){return parseFloat(e.sizeValue)});e.minSize=void 0===n?t.series[l].minBulletSize:n,e.maxSize=void 0===r?t.series[l].maxBulletSize:r}k.push(m),k.push(v)}),z=A.max(),w=S.min(),C=Math.pow(t.legend.fontSize,2),B=z.toString().length*t.yAxis.labelFontSize/2,f&&(B=0,t.data.forEach(function(e){e[t.xField].toString().length>B&&(B=e[t.xField].toString().length*t.xAxis.labelFontSize/2+t.xAxis.titleFontSize)})),F){case"date":var n=d3.min(t.data,function(e){return e[t.xField]}),r=d3.max(t.data,function(e){return e[t.xField]});f?d.y.domain([n,r]):d.x.domain([n,r]);break;case"string":f?d.y.domain(t.data.map(function(e){return e[t.xField].toString()})):d.x.domain(t.data.map(function(e){return e[t.xField].toString()}));break;default:var n=t.xAxis.startsFromZero?0:d3.min(t.data,function(e){return e[t.xField]}),r=d3.max(t.data,function(e){return e[t.xField]});f?d.y.domain([n,t.xAxis.startsFromZero?r+1:r]):d.x.domain([n,t.xAxis.startsFromZero?r+1:r])}return f?d.x.domain(k):d.y.domain(k),t.svg.select(".eve-x-axis").transition().duration(t.animationDuration).call(d.xAxis),t.svg.select(".eve-y-axis").transition().duration(t.animationDuration).call(d.yAxis),o.selectAll("text").style("fill",t.xAxis.labelFontColor).style("font-size",t.xAxis.labelFontSize+"px").style("font-family",t.xAxis.labelFontFamily).style("font-style","bold"===t.xAxis.labelFontStlye?"normal":t.xAxis.labelFontStlye).style("font-weight","bold"===t.xAxis.labelFontStlye?"bold":"normal").text(function(e){return"number"===F?d3.format(t.xAxis.labelFormat)(e):"date"===F?d3.time.format(t.xAxis.labelFormat)(e):e}).attr("transform",function(e){var l=this.getBBox(),n=l.height/2;return 0!==t.xAxis.labelAngle&&45!==t.xAxis.labelAngle&&-45!==t.xAxis.labelAngle&&(t.xAxis.labelAngle=0),t.xAxis.labelAngle<0?"translate(-"+l.width+", "+n+")rotate("+t.xAxis.labelAngle+")":t.xAxis.labelAngle>0?"translate("+l.width+", "+n+")rotate("+t.xAxis.labelAngle+")":"rotate("+t.xAxis.labelAngle+")"}).style("stroke-width","0px"),s.selectAll("text").style("fill",t.yAxis.labelFontColor).style("font-size",t.yAxis.labelFontSize+"px").style("font-family",t.yAxis.labelFontFamily).style("font-style","bold"===t.yAxis.labelFontStlye?"normal":t.yAxis.labelFontStlye).style("font-weight","bold"===t.yAxis.labelFontStlye?"bold":"normal").text(function(e){return d3.format(t.yAxis.labelFormat)(e)}).attr("transform",function(){var e=this.getBBox(),l=5,n=e.height/2;return 0!==t.yAxis.labelAngle&&45!==t.yAxis.labelAngle&&-45!==t.yAxis.labelAngle&&(t.yAxis.labelAngle=0),t.yAxis.labelAngle<0?"translate(-"+l+", -"+n+")rotate("+t.yAxis.labelAngle+")":t.yAxis.labelAngle>0?"translate(-"+l+", "+n+")rotate("+t.yAxis.labelAngle+")":"rotate("+t.yAxis.labelAngle+")"}).style("stroke-width","0px"),this}}eve.charts.createAxis=function(e){return new t(e)}}(eve),function(e){function t(t){function n(){y.svg.select(".eve-x-axis").call(f.xAxis),y.svg.select(".eve-y-axis").call(f.yAxis),y.svg.select(".eve-x-grid").call(f.makeXAxis().tickSize(-f.offset.height,0,0)),y.svg.select(".eve-y-grid").call(f.makeYAxis().tickSize(-f.offset.width,0,0))}function r(){d=d3.layout.stack().values(function(e){return e.values}).x(function(e){return e.xValue}).y(function(e){return e.yValue}),d(f.series),u=d3.svg.area().x(function(e){return"string"===f.xAxisDataType?f.x(e.xValue)+f.x.rangeBand()/2:f.x(e.xValue)}).y0(function(e){return f.y(e.y0)}).y1(function(e){return f.y(e.y0+e.y)}),c=d3.svg.symbol().type(function(e){return"none"===y.series[e.index].bullet?"circle":y.series[e.index].bullet}).size(function(e){return Math.pow(y.series[e.index].bulletSize,2)}),""===y.balloon.format&&(y.balloon.format="{x}: {y}"),i=y.svg.selectAll(".eve-series").data(f.series).enter().append("g").attr("class","eve-series"),i.append("path").attr("class",function(e,t){return"eve-area-serie eve-area-serie-"+t}).attr("d",function(e,t){return u(e.values)}).attr("transform","translate("+f.offset.left+")").style("fill",function(t,l){return""===y.series[l].color?l<=e.colors.length?e.colors[l]:e.randColor():y.series[l].color}).style("fill-opacity",function(e,t){return y.series[t].alpha}).style("stroke-width",1.5).style("stroke-opacity",1).style("stroke",function(t,l){return""===y.series[l].color?l<=e.colors.length?e.colors[l]:e.randColor():y.series[l].color}),s=i.selectAll(".eve-area-labels").data(f.series).enter().append("g").attr("class","eve-area-labels"),s.selectAll(".eve-area-label").data(function(e){return e.values}).enter().append("text").attr("class",function(e){return"eve-area-label eve-area-label-"+e.index}).style("cursor","pointer").style("fill",function(e){return y.series[e.index].labelFontColor}).style("font-weight",function(e){return"bold"==y.series[e.index].labelFontStyle?"bold":"normal"}).style("font-style",function(e){return"bold"==y.series[e.index].labelFontStyle?"normal":y.series[e.index].labelFontStyle}).style("font-family",function(e){return y.series[e.index].labelFontFamily}).style("font-size",function(e){return y.series[e.index].labelFontSize+"px"}).style("text-anchor","middle").text(function(e,t){return""!=y.series[e.index].labelFormat?y.getXYFormat(e,y.series[e.index],"label"):void 0}).attr("transform",function(e){return"translate("+(f.x(e.xValue)+f.offset.left)+","+f.y(e.y0+e.y)+")"}),o=i.selectAll(".eve-area-points").data(f.series).enter().append("g").attr("class","eve-area-points"),o.selectAll(".eve-area-point").data(function(e){return e.values}).enter().append("path").attr("class",function(e,t){return"eve-area-point eve-are-point-"+e.index}).attr("d",c).style("cursor","pointer").style("fill","#ffffff").style("stroke",function(t){return""===y.series[t.index].color?t.index<=e.colors.length?e.colors[t.index]:e.randColor():y.series[t.index].color}).style("stroke-width",function(e){return y.series[e.index].bulletStrokeSize+"px"}).style("stroke-opacity",0).style("fill-opacity",0).attr("transform",function(e){return"string"===f.xAxisDataType?"translate("+(f.x(e.xValue)+f.offset.left+f.x.rangeBand()/2)+","+f.y(e.y0+e.y)+")":"translate("+(f.x(e.xValue)+f.offset.left)+","+f.y(e.y0+e.y)+")"}).on("mousemove",function(e,t){var l=y.getXYFormat(e,y.series[e.index]);y.showBalloon(l),d3.select(this).style("stroke-opacity",function(e){return y.series[e.index].bulletStrokeAlpha}).style("fill-opacity",function(e){return y.series[e.index].bulletAlpha})}).on("mouseout",function(e,t){y.hideBalloon(),d3.select(this).style("stroke-opacity",0).style("fill-opacity",0)})}if(null==t.series&&"array"!==e.getType(t.series))throw new Error("Invalid chart series!");for(var a=0;a<t.series.length;a++)e.extend(t.series[a],l);var i,o,s,u,c,d,y=e.charts.init(t),f=e.charts.createAxis(y),x=d3.behavior.zoom().x(f.x).y(f.y).on("zoom",n);return y.zoomable&&y.svg.call(x),r(),y}var l={alpha:.7,bullet:"none",bulletAlpha:.5,bulletColor:"",bulletSize:8,bulletStrokeSize:1,bulletStrokeAlpha:1,color:"",dateFormat:"",labelFontColor:"#333333",labelFontFamily:"Tahoma",labelFontSize:10,labelFontStyle:"normal",labelFormat:"",numberFormat:"",title:"",type:"area",yField:""};e.areaChart=function(e){return e.type="area",new t(e)}}(eve),function(e){function t(t){function n(){if(""===x.balloon.format&&(x.balloon.format="{x}: {y}"),x.yAxis.stacked)r();else{var e="bar"===x.type?h.y.rangeBand():h.x.rangeBand();o=d3.scale.ordinal().domain(h.serieNames).rangeRoundBands([0,e]),a()}}function r(){x.data.forEach(function(e){var t=0;e.values=h.serieNames.map(function(l){var n={name:"name",xValue:e[x.xField],yValue:+e[l],y0:t,y1:t+=+e[l]};return n}),e.total=e.values[e.values.length-1].y1}),x.data.sort(function(e,t){return t.total-e.total}),s=x.svg.selectAll(".eve-series").data(x.data).enter().append("g").attr("class","eve-series").attr("transform",function(e){return p?"translate("+h.offset.left+","+h.y(e[x.xField])+")":"translate("+(h.x(e[x.xField])+h.offset.left)+",0)"}),u=s.selectAll("rect").data(function(e){return e.values}).enter().append("rect").attr("class",function(e,t){
return"eve-bar-serie eve-bar-serie-"+t}).attr("width",function(e){return p?h.x(e.y1)-h.x(e.y0):h.x.rangeBand()}).attr("height",function(e){return p?h.y.rangeBand():h.y(e.y0)-h.y(e.y1)}).style("fill",function(t,l){return""===x.series[l].color?l<=e.colors.length?e.colors[l]:e.randColor():x.series[l].color}).style("stroke",function(t,l){return""===x.series[l].color?l<=e.colors.length?e.colors[l]:e.randColor():x.series[l].color}).style("stroke-width",function(e,t){return x.series[t].strokeSize+"px"}).style("stroke-opacity",function(e,t){return x.series[t].alpha}).style("fill-opacity",function(e,t){return x.series[t].alpha}).on("mousemove",function(e,t){var l=x.getXYFormat(e,x.series[e.index]);x.showBalloon(l),d3.select(this).style("stroke-width",function(e){return x.series[t].strokeSize+1})}).on("mouseout",function(e,t){x.hideBalloon(),d3.select(this).style("stroke-width",function(e){return x.series[t].strokeSize})}),c=s.selectAll("text").data(function(e){return e.values}).enter().append("text").attr("class",function(e,t){return"eve-bar-label eve-bar-label-"+t}).style("cursor","pointer").style("fill",function(e,t){return x.series[t].labelFontColor}).style("font-weight",function(e,t){return"bold"==x.series[t].labelFontStyle?"bold":"normal"}).style("font-style",function(e,t){return"bold"==x.series[t].labelFontStyle?"normal":x.series[t].labelFontStyle}).style("font-family",function(e,t){return x.series[t].labelFontFamily}).style("font-size",function(e,t){return x.series[t].labelFontSize+"px"}).text(function(e,t){return""!=x.series[t].labelFormat?x.getXYFormat(e,x.series[t],"label"):void 0}),p?(u.attr("x",function(e){return h.x(e.y0)}),c.attr("x",function(e,t){return h.x(e.y0)+(h.x(e.y1)-h.x(e.y0))-this.getBBox().width-2}).attr("y",function(e,t){return h.y.rangeBand()-2})):(u.attr("y",function(e){return h.y(e.y1)}),c.attr("x",function(e,t){return h.x.rangeBand()/2-this.getBBox().width/2}).attr("y",function(e){return h.y(e.y1)+this.getBBox().height-2}))}function a(){x.data.forEach(function(e){e.values=h.serieNames.map(function(t){return{name:t,xValue:e[x.xField],yValue:+e[t]}})});var t=[0,d3.max(x.data,function(e){return d3.max(e.values,function(e){return 1.1*e.yValue})})];p?(t=[d3.max(x.data,function(e){return d3.max(e.values,function(e){return 1.1*e.yValue})}),0],h.x.domain(t)):h.y.domain(t);var l=o.rangeBand();d=x.svg.selectAll(".eve-series").data(x.data).enter().append("g").attr("class","eve-series").attr("transform",function(e){return p?"translate("+h.offset.left+","+h.y(e[x.xField])+")":"translate("+(h.x(e[x.xField])+h.offset.left)+",0)"}),y=d.selectAll("rect").data(function(e){return e.values}).enter().append("rect").attr("class",function(e,t){return"eve-bar-serie eve-bar-serie-"+t}).attr("width",function(e){return p?h.offset.width-h.x(e.yValue):l}).attr("x",function(e){return p?0:o(e.name)}).attr("y",function(e){return p?o(e.name):h.y(e.yValue)}).attr("height",function(e){return p?l:h.offset.height-h.y(e.yValue)}).style("fill",function(t,l){return""===x.series[l].color?l<=e.colors.length?e.colors[l]:e.randColor():x.series[l].color}).style("stroke","#ffffff").style("stroke-width",function(e,t){return x.series[t].strokeSize+"px"}).style("stroke-opacity",function(e,t){return x.series[t].alpha}).style("fill-opacity",function(e,t){return x.series[t].alpha}).on("mousemove",function(e,t){var l=x.getXYFormat(e,x.series[e.index]);x.showBalloon(l),d3.select(this).style("stroke-width",function(e){return x.series[t].strokeSize+1})}).on("mouseout",function(e,t){x.hideBalloon(),d3.select(this).style("stroke-width",function(e){return x.series[t].strokeSize})}),f=d.selectAll("text").data(function(e){return e.values}).enter().append("text").attr("class",function(e,t){return"eve-bar-label eve-bar-label-"+t}).style("cursor","pointer").style("fill",function(e,t){return x.series[t].labelFontColor}).style("font-weight",function(e,t){return"bold"==x.series[t].labelFontStyle?"bold":"normal"}).style("font-style",function(e,t){return"bold"==x.series[t].labelFontStyle?"normal":x.series[t].labelFontStyle}).style("font-family",function(e,t){return x.series[t].labelFontFamily}).style("font-size",function(e,t){return x.series[t].labelFontSize+"px"}).text(function(e,t){return""!=x.series[t].labelFormat?x.getXYFormat(e,x.series[t],"label"):void 0}).attr("x",function(e,t){return p?h.offset.width-h.x(e.yValue):t*l}).attr("y",function(e,t){return p?o(e.name)+l:h.y(e.yValue)-2})}if(null==t.series&&"array"!==e.getType(t.series))throw new Error("Invalid chart series!");for(var i=0;i<t.series.length;i++)e.extend(t.series[i],l);var o,s,u,c,d,y,f,x=e.charts.init(t),p="bar"===x.type,h=e.charts.createAxis(x);return n(),x}var l={alpha:1,color:"",dateFormat:"",labelFontColor:"#333333",labelFontFamily:"Tahoma",labelFontSize:10,labelFontStyle:"normal",labelFormat:"",numberFormat:"",strokeSize:1,title:"",type:"bar",yField:""};e.barChart=function(e){return e.type="bar",new t(e)},e.columnChart=function(e){return e.type="column",new t(e)}}(eve),function(e){function t(t){function n(){i=d3.svg.symbol().type(function(e){return"none"===o.series[e.index].bullet?"circle":o.series[e.index].bullet}).size(function(e){var t=o.series[e.index],l=s.series[e.index];if(""!==t.sizeField){var n=l.maxSize-l.minSize,r=t.maxBulletSize-t.minBulletSize,a=0===n?t.maxBulletSize:e.sizeValue/n*r-l.minSize/n*r+t.minBulletSize;return Math.pow(a,2)}return Math.pow(t.bulletSize,2)}),""===o.balloon.format&&(o.balloon.format="x: {x}: y: {y}, size: {size}");var t=o.svg.append("defs").selectAll("radialGradient").data(s.series).enter().append("radialGradient").attr("cx",0).attr("cy",0).attr("r","100%").attr("id",function(e,t){return"eve-grad-"+t});t.append("stop").attr("offset","10%").attr("stop-color","#ffffff"),t.append("stop").attr("offset","100%").attr("stop-color",function(t,l){return""===o.series[l].color?l<=e.colors.length?e.colors[l]:e.randColor():o.series[l].color}),a=o.svg.selectAll(".eve-series").data(s.series).enter().append("g").attr("class","eve-series"),a.selectAll(".eve-bubble-label").data(function(e){return e.values}).enter().append("text").attr("class",function(e,t){return"eve-bubble-label eve-bubble-label-"+t}).style("cursor","pointer").style("fill",function(e,t){return o.series[e.index].labelFontColor}).style("font-weight",function(e,t){return"bold"==o.series[e.index].labelFontStyle?"bold":"normal"}).style("font-style",function(e,t){return"bold"==o.series[e.index].labelFontStyle?"normal":o.series[e.index].labelFontStyle}).style("font-family",function(e,t){return o.series[e.index].labelFontFamily}).style("font-size",function(e,t){return o.series[e.index].labelFontSize+"px"}).style("text-anchor","middle").text(function(e,t){return""!=o.series[e.index].labelFormat?o.getXYFormat(e,o.series[e.index],"label"):void 0}).attr("transform",function(e){var t=o.series[e.index],l=s.series[e.index],n=0,r=0;if(""!==t.sizeField){var a=l.maxSize-l.minSize,i=t.maxBulletSize-t.minBulletSize;r=0===a?t.maxBulletSize:e.sizeValue/a*i-l.minSize/a*i+t.minBulletSize,n=r/2}else n=t.bulletSize/2;return"translate("+(s.x(e.xValue)+s.offset.left)+","+(s.y(e.yValue)-n-o.series[e.index].labelFontSize/2-r)+")"}),a.selectAll(".eve-bubble-point").data(function(e){return e.values}).enter().append("path").attr("class",function(e,t){return 0===e.yValue?"eve-bubble-point-null eve-bubble-point-null-"+e.index:"eve-bubble-point eve-bubble-point-"+e.index}).attr("d",function(e){return i(e)}).style("cursor","pointer").style("fill",function(e){return"url(#eve-grad-"+e.index+")"}).style("stroke",function(t){return""===o.series[t.index].color?t.index<=e.colors.length?e.colors[t.index]:e.randColor():o.series[t.index].color}).style("stroke-width",function(e){return o.series[e.index].bulletStrokeSize+"px"}).style("stroke-opacity",function(e){return 0===e.yValue?0:o.series[e.index].bulletStrokeAlpha}).style("stroke-dasharray",0).style("fill-opacity",function(e){return 0===e.yValue?0:o.series[e.index].bulletAlpha}).attr("transform",function(e){var t=o.series[e.index],l=s.series[e.index],n=0;if(""!==t.sizeField){var r=l.maxSize-l.minSize,a=t.maxBulletSize-t.minBulletSize;n=0===r?t.maxBulletSize:e.sizeValue/r*a-l.minSize/r*a+t.minBulletSize}return"string"===s.xAxisDataType?"translate("+(s.x(e.xValue)+s.offset.left+s.x.rangeBand()/2)+","+(s.y(e.yValue)-n/2)+")":"translate("+(s.x(e.xValue)+s.offset.left)+","+(s.y(e.yValue)-n/2)+")"}).on("mousemove",function(e,t){if(0===e.yValue)return null;var l=o.getXYFormat(e,o.series[e.index]);o.showBalloon(l),d3.select(this).style("stroke-width",o.series[e.index].bulletStrokeSize+1)}).on("mouseout",function(e,t){o.hideBalloon(),d3.select(this).style("stroke-width",o.series[e.index].bulletStrokeSize)})}if(null==t.series&&"array"!==e.getType(t.series))throw new Error("Invalid chart series!");for(var r=0;r<t.series.length;r++)e.extend(t.series[r],l);var a,i,o=e.charts.init(t),s=e.charts.createAxis(o);return n(),o}var l={bullet:"none",bulletAlpha:.5,bulletColor:"",bulletSize:8,bulletStrokeSize:1,bulletStrokeAlpha:1,color:"",dateFormat:"",labelFontColor:"#333333",labelFontFamily:"Tahoma",labelFontSize:10,labelFontStyle:"normal",labelFormat:"",maxBulletSize:50,minBulletSize:5,numberFormat:"",title:"",type:"bubble",yField:""};e.bubbleChart=function(e){return e.type="bubble",new t(e)}}(eve),function(e){function t(t){function n(){function e(n,r,i,o){o>=c.data.length||(v=c.data[o][y.valueField],a=v*A/S,pw=r-n,nw=Math.sqrt((F*pw*pw-4*a)/F),nl=(pw-nw)/2+n,nr=r-(pw-nw)/2,nh=F*(pw-nw)/2+i,l=[[nr,nh]],l.push([r,i]),l.push([n,i]),l.push([nl,nh]),l.push([nr,nh]),t.push(l),e(nl,nr,nh,o+1))}var t=[],l=[];return e(0,b,0,0),t}function r(){c.svg.append("g").attr("class","eve-funnel-slices"),c.legend.enabled&&(c.svg.append("g").attr("class","eve-legend-icon"),c.svg.append("g").attr("class","eve-legend-text"),z=c.data.length*(c.legend.fontSize+5),s=c.svg.select(".eve-legend-text").selectAll("text.eve-legend-text").data(c.data).enter().insert("text").attr("class","eve-legend-text").style("cursor","pointer").style("fill",c.legend.fontColor).style("font-weight","bold"==c.legend.fontStyle?"bold":"normal").style("font-style","bold"==c.legend.fontStyle?"normal":c.legend.fontStyle).style("font-family",c.legend.fontFamily).style("font-size",c.legend.fontSize+"px").text(function(e,t){return e[y.titleField]}).style("text-anchor",function(e,t){var l=this.getBBox().width+c.legend.fontSize;return l>k&&(k=l),"left"}).on("click",function(e,t){e.selected?e.selected=!1:e.selected=!0,e.selected?(d3.select(i[0][t]).transition().duration(c.animationDuration/2).attr("transform",function(){return d?"translate("+(b+10)+","+g+")rotate(180)":"translate(10)"}),t===c.data.length-1&&null!=o&&o.transition().duration(c.animationDuration/2).attr("transform",function(){return"translate(10)"})):(d3.select(i[0][t]).transition().duration(c.animationDuration/2).attr("transform",function(){return d?"translate("+b+","+g+")rotate(180)":"translate(0)"}),t===c.data.length-1&&t===c.data.length-1&&null!=o&&o.transition().duration(c.animationDuration/2).attr("transform",function(){return"translate(0)"})),c.legendClick&&c.legendClick(e,t)}),u=c.svg.select(".eve-legend-icon").selectAll("path.eve-legend-icon").data(c.data).enter().insert("path").attr("d",d3.svg.symbol().type(c.legend.icon).size(f)).attr("class","eve-legend-icon").style("cursor","pointer").style("fill",function(t,l){return void 0!==i?d3.select(i[0][l]).style("fill"):""!==y.colorField?t[y.colorField]:l<=e.colors.length?e.colors[l]:e.randColor()}).on("click",function(e,t){e.selected?e.selected=!1:e.selected=!0,e.selected?(d3.select(i[0][t]).transition().duration(c.animationDuration/2).attr("transform",function(){return d?"translate("+(b+10)+","+g+")rotate(180)":"translate(10)"}),t===c.data.length-1&&null!=o&&o.transition().duration(c.animationDuration/2).attr("transform",function(){return"translate(10)"})):(d3.select(i[0][t]).transition().duration(c.animationDuration/2).attr("transform",function(){return d?"translate("+b+","+g+")rotate(180)":"translate(0)"}),t===c.data.length-1&&t===c.data.length-1&&null!=o&&o.transition().duration(c.animationDuration/2).attr("transform",function(){return"translate(0)"})),c.legendClick&&c.legendClick(e,t)}),b-=k,F=2*g/(b-m*b),A=(b+m*b)*g/2);var t=n();if(c.svg.attr("transform","translate("+p+", "+h+")"),i=c.svg.select(".eve-funnel-slices").selectAll("path.eve-funnel-slice").data(c.data).enter().insert("path").attr("class",function(e,t){return"eve-funnel-slice eve-funnel-slice-"+t}).attr("d",function(e,l){return B(t[l])}).style("stroke","#ffffff").style("stroke-width",0).style("fill",function(t,l){return""!==y.colorField?t.data[y.colorField]:l<=e.colors.length?e.colors[l]:e.randColor()}).style("fill-opacity",function(e,t){if(""!==y.alphaField){var l=C-w,n=e.data[y.alphaField]/l*.8-w/l*.8+.2;return n}return 1}).on("click",function(e,t){e.selected?e.selected=!1:e.selected=!0,e.selected?(d3.select(this).transition().duration(c.animationDuration/2).attr("transform",function(){return d?"translate("+(b+10)+","+g+")rotate(180)":"translate(10)"}),t===c.data.length-1&&null!=o&&o.transition().duration(c.animationDuration/2).attr("transform",function(){return"translate(10)"})):(d3.select(this).transition().duration(c.animationDuration/2).attr("transform",function(){return d?"translate("+b+","+g+")rotate(180)":"translate(0)"}),t===c.data.length-1&&t===c.data.length-1&&null!=o&&o.transition().duration(c.animationDuration/2).attr("transform",function(){return"translate(0)"}))}).on("mousemove",function(e,t){var l=c.getSlicedFormat(t,y);c.showBalloon(l),d3.select(this).style("opacity",y.hoverOpacity),void 0!==o&&t===c.data.length-1&&o.style("opacity",y.hoverOpacity)}).on("mouseout",function(e,t){c.hideBalloon(),d3.select(this).style("opacity",1),void 0!==o&&t===c.data.length-1&&o.style("opacity",1)}),!d&&y.neckHeight>0){var l=c.data[c.data.length-1][y.valueField],r=i[0][c.data.length-1].getBBox(),a=r.height+r.y,v=y.neckHeight,T=l*A/S,V=Math.sqrt((F*r.width*r.width-4*T)/F),M=r.x+r.width/2-V/2;o=c.svg.insert("rect").style("fill",function(){var t=c.data[c.data.length-1],l=c.data.length-1;return""!==y.colorField?t[y.colorField]:l<=e.colors.length?e.colors[l]:e.randColor()}).style("fill-opacity",function(){var e=c.data[c.data.length-1];c.data.length-1;if(""!==y.alphaField){var t=C-w,l=e[y.alphaField]/t*.8-w/t*.8+.2;return l}return 1}).style("stroke-width",0).attr("width",V).attr("height",v).attr("y",a).attr("x",M).on("mousemove",function(){var e=c.getSlicedFormat(c.data.length-1,y);c.showBalloon(e),d3.select(this).style("opacity",y.hoverOpacity),d3.select(i[0][c.data.length-1]).style("opacity",y.hoverOpacity)}).on("mouseout",function(){c.hideBalloon(),d3.select(this).style("opacity",1),d3.select(i[0][c.data.length-1]).style("opacity",1)})}if(d&&i.attr("transform","translate("+b+","+g+")rotate(180)"),c.legend.enabled&&(s.attr("x",c.width-k-x.left).attr("y",function(e,t){var l=Math.sqrt(f)/2,n=(c.height-z)/2+(c.legend.fontSize+l)*t-Math.sqrt(f);return n}),u.attr("transform",function(e,t){var l=(this.getBBox(),Math.sqrt(f)/2),n=c.width-k-x.left-Math.sqrt(f),r=(c.height-z)/2+(c.legend.fontSize+l)*t-(c.legend.fontSize+l);return"translate("+n+","+r+")"})),""!==y.labelFormat){c.svg.append("g").attr("class","eve-funnel-labels");c.svg.select(".eve-funnel-labels").selectAll("text").data(c.data).enter().append("text").style("fill",y.labelFontColor).style("font-weight","bold"==y.labelFontStyle?"bold":"normal").style("font-style","bold"==y.labelFontStyle?"normal":y.labelFontStyle).style("font-family",y.labelFontFamily).style("font-size",y.labelFontSize+"px").style("text-anchor","left").text(function(e,t){return c.getSlicedFormat(t,y,"label")}).attr("transform",function(e,t){var l=i[0][t].getBBox(),n=this.getBBox(),r=b/2-n.width/2,a=l.y+l.height/2+n.height/2;return d&&(a=g-l.y-l.height/2+n.height/2),"translate("+r+","+a+")"})}}var i,o,s,u,c=e.charts.init(t),d="pyramid"===t.type,y=e.extend(c.series[0],l),f=Math.pow(c.legend.fontSize,2),x={left:10+Math.sqrt(f),top:10+Math.sqrt(f),right:10+Math.sqrt(f),bottom:10+Math.sqrt(f)},p=x.left,h=x.top,b=c.width-x.left-x.right,g=!d&&y.neckHeight>0?c.height-y.neckHeight-x.top-x.bottom:c.height-x.top-x.bottom,m=d?.005:.1,F=2*g/(b-m*b),A=(b+m*b)*g/2,S=d3.sum(c.data,function(e){return e[y.valueField]}),k=0,z=0,w=0,C=0,B=d3.svg.line().x(function(e){return e[0]}).y(function(e){return e[1]});if(0===c.series.length)throw Error("Chart serie could not found!");return""===c.balloon.format&&(c.balloon.format="{title}: {value}"),""!==y.alphaField&&(w=d3.min(c.data,function(e){return e[y.alphaField]}),C=d3.max(c.data,function(e){return e[y.alphaField]})),r(),c}var l={alphaField:"",colorField:"",hoverOpacity:.9,labelPosition:"inside",labelFontColor:"#ffffff",labelFontFamily:"Tahoma",labelFontSize:11,labelFontStyle:"normal",labelFormat:"{percent}",neckHeight:25,sliceBorderOpacity:.1,titleField:"",valueField:"",valueFormat:""};e.funnelChart=function(e){return e.type="funnel",new t(e)},e.pyramidChart=function(e){return e.type="pyramid",new t(e)}}(eve),function(e){function t(t){function n(){u.svg.select(".eve-x-axis").call(c.xAxis),u.svg.select(".eve-y-axis").call(c.yAxis),u.svg.select(".eve-x-grid").call(c.makeXAxis().tickSize(-c.offset.height,0,0)),u.svg.select(".eve-y-grid").call(c.makeYAxis().tickSize(-c.offset.width,0,0)),u.svg.selectAll(".eve-line-serie").attr("d",function(e){return o(e.values)}),u.svg.selectAll(".eve-line-point").attr("d",function(e){return s(e)})}function r(){o=d3.svg.line().x(function(e){return"string"===c.xAxisDataType?c.x(e.xValue)+c.x.rangeBand()/2:c.x(e.xValue)}).y(function(e){return c.y(e.yValue)}),s=d3.svg.symbol().type(function(e){return"none"===u.series[e.index].bullet?"circle":u.series[e.index].bullet}).size(function(e){return Math.pow(u.series[e.index].bulletSize,2)}),""===u.balloon.format&&(u.balloon.format="{x}: {y}"),i=u.svg.selectAll(".eve-series").data(c.series).enter().append("g").attr("class","eve-series"),i.append("path").attr("class",function(e,t){return"eve-line-serie eve-line-serie-"+t}).attr("d",function(e,t){return"stepLine"===u.series[t].behavior?o.interpolate("step"):"spLine"===u.series[t].behavior&&o.interpolate("cardinal"),o(e.values)}).attr("transform","translate("+c.offset.left+")").style("fill","none").style("stroke-width",function(e,t){return u.series[t].strokeSize+"px"}).style("stroke-opacity",function(e,t){return u.series[t].lineAlpha}).style("stroke-dasharray",function(e,t){return"dotted"===u.series[t].drawingStyle?"2, 2":"dashed"===u.series[t].drawingStyle?"5, 2":"0"}).style("stroke",function(t,l){return""===u.series[l].color?l<=e.colors.length?e.colors[l]:e.randColor():u.series[l].color}),i.selectAll(".eve-line-label").data(function(e){return e.values}).enter().append("text").attr("class",function(e,t){return"eve-line-label eve-line-label-"+t}).style("cursor","pointer").style("fill",function(e,t){return u.series[e.index].labelFontColor}).style("font-weight",function(e,t){return"bold"==u.series[e.index].labelFontStyle?"bold":"normal"}).style("font-style",function(e,t){return"bold"==u.series[e.index].labelFontStyle?"normal":u.series[e.index].labelFontStyle}).style("font-family",function(e,t){return u.series[e.index].labelFontFamily}).style("font-size",function(e,t){return u.series[e.index].labelFontSize+"px"}).style("text-anchor","middle").text(function(e,t){return""!=u.series[e.index].labelFormat?u.getXYFormat(e,u.series[e.index],"label"):void 0}).attr("transform",function(e){return"translate("+(c.x(e.xValue)+c.offset.left)+","+(c.y(e.yValue)-u.series[e.index].bulletSize)+")"}),lineBullets=i.selectAll(".eve-line-point").data(function(e){return e.values}).enter().append("path").attr("class",function(e,t){return"eve-line-point eve-line-point-"+e.index}).attr("d",function(e){return s(e)}).style("cursor","pointer").style("fill",function(t){return""===u.series[t.index].color?t.index<=e.colors.length?e.colors[t.index]:e.randColor():u.series[t.index].color}).style("stroke",function(t){return""===u.series[t.index].color?t.index<=e.colors.length?e.colors[t.index]:e.randColor():u.series[t.index].color}).style("stroke-dasharray",0).style("stroke-width",function(e){return u.series[e.index].bulletStrokeSize+"px"}).style("stroke-opacity",0).style("fill-opacity",0).attr("transform",function(e){return"string"===c.xAxisDataType?"translate("+(c.x(e.xValue)+c.offset.left+c.x.rangeBand()/2)+","+c.y(e.yValue)+")":"translate("+(c.x(e.xValue)+c.offset.left)+","+c.y(e.yValue)+")"}).on("mousemove",function(e,t){var l=u.getXYFormat(e,u.series[e.index]);u.showBalloon(l),d3.select(this).style("stroke-opacity",function(e){return u.series[e.index].bulletStrokeAlpha}).style("fill-opacity",function(e){return u.series[e.index].bulletAlpha})}).on("mouseout",function(e,t){u.hideBalloon(),d3.select(this).style("stroke-opacity",0).style("fill-opacity",0)})}if(null==t.series&&"array"!==e.getType(t.series))throw new Error("Invalid chart series!");for(var a=0;a<t.series.length;a++)e.extend(t.series[a],l);var i,o,s,u=e.charts.init(t),c=e.charts.createAxis(u),d=d3.behavior.zoom().x(c.x).y(c.y).on("zoom",n);return u.zoomable&&u.svg.call(d),r(),u}var l={behavior:"linear",bullet:"none",bulletAlpha:.5,bulletColor:"",bulletSize:8,bulletStrokeSize:1,bulletStrokeAlpha:1,color:"",dateFormat:"",drawingStyle:"solid",labelFontColor:"#333333",labelFontFamily:"Tahoma",labelFontSize:10,labelFontStyle:"normal",labelFormat:"",lineAlpha:1,numberFormat:"",strokeSize:1.5,title:"",type:"line",yField:""};e.lineChart=function(e){return e.type="line",new t(e)}}(eve),function(e){function t(t){function n(){o.legend.enabled&&(o.svg.append("g").attr("class","eve-legend-icon"),o.svg.append("g").attr("class","eve-legend-text"),b=o.data.length*(o.legend.fontSize+5),a=o.svg.select(".eve-legend-text").selectAll("text.eve-legend-text").data(x(o.data),p).enter().insert("text").attr("class","eve-legend-text").style("cursor","pointer").style("fill",o.legend.fontColor).style("font-weight","bold"==o.legend.fontStyle?"bold":"normal").style("font-style","bold"==o.legend.fontStyle?"normal":o.legend.fontStyle).style("font-family",o.legend.fontFamily).style("font-size",o.legend.fontSize+"px").text(function(e,t){return e.data[u.titleField]}).style("text-anchor",function(e,t){var l=this.getBBox().width+o.legend.fontSize;return l>h&&(h=l),"left"}).on("click",function(e,t){null!=r&&(e.data.selected?e.data.selected=!1:e.data.selected=!0,e.data.selected?d3.select(r[0][t]).style("stroke-opacity",1).transition().duration(o.animationDuration/2).attr("transform",function(){var t=(e.startAngle+e.endAngle)/2,l=5*Math.sin(t),n=5*-Math.cos(t);return"translate("+l+","+n+")"}):d3.select(r[0][t]).style("stroke-opacity",.1).transition().duration(o.animationDuration/2).attr("transform","translate(0,0)")),o.legendClick&&o.legendClick(e,t)}),i=o.svg.select(".eve-legend-icon").selectAll("path.eve-legend-icon").data(x(o.data),p).enter().insert("path").attr("d",d3.svg.symbol().type(o.legend.icon).size(v)).attr("class","eve-legend-icon").style("cursor","pointer").style("fill",function(t,l){return void 0!==r?d3.select(r[0][l]).style("fill"):""!==u.colorField?t.data[u.colorField]:l<=e.colors.length?e.colors[l]:e.randColor()}).on("click",function(e,t){null!=r&&(e.data.selected?e.data.selected=!1:e.data.selected=!0,e.data.selected?d3.select(r[0][t]).style("stroke-opacity",1).transition().duration(o.animationDuration/2).attr("transform",function(){var t=(e.startAngle+e.endAngle)/2,l=5*Math.sin(t),n=5*-Math.cos(t);return"translate("+l+","+n+")"}):d3.select(r[0][t]).style("stroke-opacity",.1).transition().duration(o.animationDuration/2).attr("transform","translate(0,0)")),o.legendClick&&o.legendClick(e,t)}),"left"===o.legend.position?c+=h/2:c-=h/2,y-=2*h,F=Math.min(y,f)/2,A=""!==u.labelFormat&&"outside"===u.labelPosition?.8*F:.9*F,S=s?F/2:0),o.svg.append("g").attr("class","eve-pie-slices");var t=d3.svg.arc().outerRadius(A).innerRadius(S);o.svg.attr("transform","translate("+c+","+d+")"),r=o.svg.select(".eve-pie-slices").selectAll("path.eve-pie-slice").data(x(o.data),p),r.enter().insert("path").style("fill",function(t,l){return""!==u.colorField?t.data[u.colorField]:l<=e.colors.length?e.colors[l]:e.randColor()}).style("fill-opacity",function(e,t){if(""!==u.alphaField){var l=m-g,n=e.data[u.alphaField]/l*.8-g/l*.8+.2;return n}return 1}).style("stroke",u.sliceBorderColor).style("stroke-width",1).style("stroke-opacity",u.sliceBorderOpacity).attr("class","eve-pie-slice").on("click",function(e,t){e.data.selected?e.data.selected=!1:e.data.selected=!0,e.data.selected?d3.select(this).style("stroke-opacity",1).transition().duration(o.animationDuration/2).attr("transform",function(){var t=(e.startAngle+e.endAngle)/2,l=5*Math.sin(t),n=5*-Math.cos(t);return"translate("+l+","+n+")"}):d3.select(this).style("stroke-opacity",.1).transition().duration(o.animationDuration/2).attr("transform","translate(0,0)"),o.serieClick&&o.serieClick(e.data)}).on("mousemove",function(e,t){var l=o.getSlicedFormat(t,u);o.showBalloon(l),this.style.opacity=u.hoverOpacity}).on("mouseout",function(e){o.hideBalloon(),this.style.opacity=1}),r.transition().duration(o.animationDuration).attrTween("d",function(e){this._current=this._current||e;var l=d3.interpolate(this._current,e);return this._current=l(0),function(e){return t(l(e))}}),r.exit().remove(),o.legend.enabled&&(a.attr("x",F+Math.sqrt(v)).attr("y",function(e,t){return b/o.data.length*t-b/2+o.legend.fontSize}),i.attr("transform",function(e,t){var l=(this.getBBox(),F),n=Math.sqrt(v)/2,r=b/o.data.length*t-b/2+o.legend.fontSize-n;return"translate("+l+","+r+")"})),""!==u.labelFormat&&(o.svg.append("g").attr("class","eve-pie-labels"),"inside"===u.labelPosition?o.svg.select(".eve-pie-labels").selectAll("text").data(x(o.data),p).enter().append("text").style("fill",u.labelFontColor).style("font-weight","bold"==u.labelFontStyle?"bold":"normal").style("font-style","bold"==u.labelFontStyle?"normal":u.labelFontStyle).style("font-family",u.labelFontFamily).style("font-size",u.labelFontSize+"px").style("text-anchor","middle").text(function(e,t){return o.getSlicedFormat(t,u,"label")}).transition().duration(o.animationDuration).attr("transform",function(e){return"translate("+t.centroid(e)+")"}):(o.svg.append("g").attr("class","eve-pie-labels-lines"),o.svg.select(".eve-pie-labels-lines").selectAll("line").data(x(o.data),p).enter().append("line").style("stroke",function(t,l){return""!==u.colorField?t.data[u.colorField]:l<=e.colors.length?e.colors[l]:e.randColor()}).style("stroke-width",1).style("stroke-opacity",.2).transition().duration(o.animationDuration).attr("x1",function(e){return t.centroid(e)[0]}).attr("y1",function(e){return t.centroid(e)[1]}).attr("x2",function(e){var l=t.centroid(e),n=Math.atan2(l[1],l[0]),r=Math.cos(n)*(.9*F);return r}).attr("y2",function(e){var l=t.centroid(e),n=Math.atan2(l[1],l[0]),r=Math.sin(n)*(.9*F);return r}),o.svg.select(".eve-pie-labels").selectAll("text").data(x(o.data),p).enter().append("text").style("fill",u.labelFontColor).style("font-weight","bold"==u.labelFontStyle?"bold":"normal").style("font-style","bold"==u.labelFontStyle?"normal":u.labelFontStyle).style("font-family",u.labelFontFamily).style("font-size",u.labelFontSize+"px").text(function(e,t){return o.getSlicedFormat(t,u,"label")}).transition().duration(o.animationDuration).attr("x",function(e){var l=t.centroid(e),n=Math.atan2(l[1],l[0]),r=Math.cos(n)*(.9*F);return r+5*(r>0?1:-1)}).attr("y",function(e){var l=t.centroid(e),n=Math.atan2(l[1],l[0]);return Math.sin(n)*(.9*F)}).style("text-anchor",function(e){var l=t.centroid(e),n=Math.atan2(l[1],l[0]),r=Math.cos(n)*(.9*F);return r>0?"start":"end"})))}var r,a,i,o=e.charts.init(t),s="donut"===t.type,u=e.extend(o.series[0],l),c=o.width/2,d=o.height/2,y=o.width,f=o.height,x=d3.layout.pie().sort(null).value(function(e){return e[u.valueField]}),p=function(e){return e.data[u.titleField]},h=0,b=0,g=0,m=0,v=Math.pow(o.legend.fontSize,2),F=Math.min(y,f)/2,A=""!==u.labelFormat&&"outside"===u.labelPosition?.8*F:.9*F,S=s?F/2:0;if(0===o.series.length)throw Error("Chart serie could not found!");return""===o.balloon.format&&(o.balloon.format="{title}: {value}"),""!==u.alphaField&&(g=d3.min(o.data,function(e){return e[u.alphaField]}),m=d3.max(o.data,function(e){return e[u.alphaField]})),n(),o}var l={alphaField:"",colorField:"",hoverOpacity:.9,labelPosition:"inside",labelFontColor:"#ffffff",labelFontFamily:"Tahoma",labelFontSize:11,labelFontStyle:"normal",labelFormat:"{percent}",sliceBorderOpacity:.1,titleField:"",valueField:"",valueFormat:""};e.pieChart=function(e){return e.type="pie",new t(e,!1)},e.donutChart=function(e){return e.type="donut",new t(e,!0)}}(eve),function(e){function t(t){function n(){s.svg.select(".eve-x-axis").call(u.xAxis),s.svg.select(".eve-y-axis").call(u.yAxis),s.svg.select(".eve-x-grid").call(u.makeXAxis().tickSize(-u.offset.height,0,0)),s.svg.select(".eve-y-grid").call(u.makeYAxis().tickSize(-u.offset.width,0,0))}function r(){o=d3.svg.symbol().type(function(e){return"none"===s.series[e.index].bullet?"circle":s.series[e.index].bullet}).size(function(e){return Math.pow(s.series[e.index].bulletSize,2)}),""===s.balloon.format&&(s.balloon.format="{x}: {y}"),i=s.svg.selectAll(".eve-series").data(u.series).enter().append("g").attr("class","eve-series"),i.selectAll(".eve-scatter-label").data(function(e){return e.values}).enter().append("text").attr("class",function(e,t){return"eve-scatter-label eve-scatter-label-"+t}).style("cursor","pointer").style("fill",function(e,t){return s.series[e.index].labelFontColor}).style("font-weight",function(e,t){return"bold"==s.series[e.index].labelFontStyle?"bold":"normal"}).style("font-style",function(e,t){return"bold"==s.series[e.index].labelFontStyle?"normal":s.series[e.index].labelFontStyle}).style("font-family",function(e,t){return s.series[e.index].labelFontFamily}).style("font-size",function(e,t){return s.series[e.index].labelFontSize+"px"}).style("text-anchor","middle").text(function(e,t){return""!=s.series[e.index].labelFormat?s.getXYFormat(e,s.series[e.index],"label"):void 0}).attr("transform",function(e){return"translate("+(u.x(e.xValue)+u.offset.left)+","+(u.y(e.yValue)-s.series[e.index].bulletSize)+")"}),i.selectAll(".eve-scatter-point").data(function(e){return e.values}).enter().append("path").attr("class",function(e,t){return"eve-scatter-point eve-scatter-point-"+e.index}).attr("d",function(e){return o(e)}).style("cursor","pointer").style("fill",function(t){return""===s.series[t.index].color?t.index<=e.colors.length?e.colors[t.index]:e.randColor():s.series[t.index].color}).style("stroke",function(t){return""===s.series[t.index].color?t.index<=e.colors.length?e.colors[t.index]:e.randColor():s.series[t.index].color}).style("stroke-width",function(e){return s.series[e.index].bulletStrokeSize+"px"}).style("stroke-opacity",function(e){return s.series[e.index].bulletStrokeAlpha}).style("stroke-dasharray",0).style("fill-opacity",function(e){return s.series[e.index].bulletAlpha}).attr("transform",function(e){return"string"===u.xAxisDataType?"translate("+(u.x(e.xValue)+u.offset.left+u.x.rangeBand()/2)+","+u.y(e.yValue)+")":"translate("+(u.x(e.xValue)+u.offset.left)+","+u.y(e.yValue)+")"}).on("mousemove",function(e,t){var l=s.getXYFormat(e,s.series[e.index]);s.showBalloon(l),d3.select(this).style("stroke-width",s.series[e.index].bulletStrokeSize+1)}).on("mouseout",function(e,t){s.hideBalloon(),d3.select(this).style("stroke-width",s.series[e.index].bulletStrokeSize)})}if(null==t.series&&"array"!==e.getType(t.series))throw new Error("Invalid chart series!");for(var a=0;a<t.series.length;a++)e.extend(t.series[a],l);var i,o,s=e.charts.init(t),u=e.charts.createAxis(s),c=d3.behavior.zoom().x(u.x).y(u.y).on("zoom",n);return s.zoomable&&s.svg.call(c),r(),s}var l={bullet:"none",bulletAlpha:.5,bulletColor:"",bulletSize:8,bulletStrokeSize:1,bulletStrokeAlpha:1,color:"",dateFormat:"",labelFontColor:"#333333",labelFontFamily:"Tahoma",labelFontSize:10,labelFontStyle:"normal",labelFormat:"",numberFormat:"",title:"",type:"scatter",yField:""};e.scatterChart=function(e){
return e.type="scatter",new t(e)}}(eve);